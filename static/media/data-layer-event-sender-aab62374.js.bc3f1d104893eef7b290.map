{"version":3,"names":["sendDataLayerEvent","_a","_b","datalayerEventAction","EventActions","NAVIGATION_CLICK","analyticsId","text","link","elementId","clickElementType","_c","customDatalayerProperties","globalDataLayerService","pushDataLayerEvent","Object","assign","componentClick","clickElementId","clickElementName","targetElement","analyticsManager","getModelTargetElement","ClickElementTypes","Link","targetUrl","componentDisplay","displayElementId","calculateDisplayElementId","displayElementType","calculateDisplayElementType","removeLastRoutingSegment","ElementTypes","menuItem","displayElementName","MODEL_RANGE_CLICK","car","modelRangeName","toLowerCase"],"sources":["src/services/analytics/data-layer-event-sender.ts"],"sourcesContent":["import { ClickElementType, ClickElementTypes, ElementTypes, EventAction, EventActions } from '../../utility/constants';\nimport globalDataLayerService from './global-data-layer-service';\nimport analyticsManager from './analytics-manager';\nimport { removeLastRoutingSegment } from '../../entities/routing-key';\nimport { TDataLayer } from '@porsche/globaldatalayer-events/projects/pcom/all/types';\n\ntype DataLayerEventSenderType = {\n  datalayerEventAction: EventAction;\n  analyticsId: string;\n  text: string;\n  link: string;\n  elementId: string;\n  clickElementType: ClickElementType;\n  customDatalayerProperties: TDataLayer;\n};\nexport function sendDataLayerEvent({\n  datalayerEventAction = EventActions.NAVIGATION_CLICK,\n  analyticsId,\n  text,\n  link,\n  elementId,\n  clickElementType,\n  customDatalayerProperties = {}\n}: DataLayerEventSenderType): void {\n  globalDataLayerService.pushDataLayerEvent(datalayerEventAction, {\n    componentClick: {\n      clickElementId: analyticsId,\n      clickElementName: text,\n      targetElement: analyticsManager.getModelTargetElement(elementId, text),\n      clickElementType,\n      ...(clickElementType === ClickElementTypes.Link ? { targetUrl: link } : {})\n    },\n    componentDisplay: {\n      displayElementId: analyticsManager.calculateDisplayElementId(elementId),\n      displayElementType: analyticsManager.calculateDisplayElementType(\n        removeLastRoutingSegment(elementId),\n        ElementTypes.menuItem\n      ),\n      displayElementName: text\n    },\n    ...customDatalayerProperties,\n    ...(datalayerEventAction === EventActions.MODEL_RANGE_CLICK\n      ? {\n          car: {\n            modelRangeName: text.toLowerCase()\n          }\n        }\n      : {})\n  });\n}\n"],"mappings":"0UAegBA,mBAAmBC,G,IACjCC,EAAAD,EAAAE,uBAAoBD,SAAA,EAAGE,aAAaC,iBAAgBH,EACpDI,EAAWL,EAAAK,YACXC,EAAIN,EAAAM,KACJC,EAAIP,EAAAO,KACJC,EAASR,EAAAQ,UACTC,EAAgBT,EAAAS,iBAChBC,EAAAV,EAAAW,4BAAyBD,SAAA,EAAG,GAAEA,EAE9BE,uBAAuBC,mBAAmBX,EAAoBY,OAAAC,OAAAD,OAAAC,OAAA,CAC5DC,eAAcF,OAAAC,OAAA,CACZE,eAAgBZ,EAChBa,iBAAkBZ,EAClBa,cAAeC,iBAAiBC,sBAAsBb,EAAWF,GACjEG,iBAAgBA,GACZA,IAAqBa,kBAAkBC,KAAO,CAAEC,UAAWjB,GAAS,IAE1EkB,iBAAkB,CAChBC,iBAAkBN,iBAAiBO,0BAA0BnB,GAC7DoB,mBAAoBR,iBAAiBS,4BACnCC,yBAAyBtB,GACzBuB,aAAaC,UAEfC,mBAAoB3B,IAEnBK,GACCT,IAAyBC,aAAa+B,kBACtC,CACEC,IAAK,CACHC,eAAgB9B,EAAK+B,gBAGzB,IAER,Q"}