{"version":3,"names":["resetToFarRight","el","style","left","position","mainDrawerHTMLSelector","registerOpenDoubleDrawerSequence","_b","onAnimationStarts","onAnimationEnds","sequence","onStart","elementSelector","animation","className","cleanUpAfterAnimation","element","opacity","backgroundColor","onEnd","animationManager","register","AnimationSequences","OPEN_DOUBLE_DRAWER","makeSequence","registerCloseDoubleDrawerSequence","onBackdropFadeOutEnd","cleanUpBeforeAnimation","CLOSE_DOUBLE_DRAWER","registerTransitionSequence","direction","onSlideMainDrawerOutEnd","concat","registerForwardToNextMenuSequence","registerBackToPreviousMenuSequence","isPlayingDoubleDrawerAnimation","doubleDrawerAnimationSequences","TRANSITION_NEXT_LEVEL_DOUBLE_DRAWER","TRANSITION_PREVIOUS_LEVEL_DOUBLE_DRAWER","TRANSITION_SAME_LEVEL_DOUBLE_DRAWER","TRANSITION_SAME_LEVEL_DOUBLE_DRAWER_REVERSE","some","isPlaying","_a"],"sources":["src/components/double-drawer/double-drawer-animation-sequences.ts"],"sourcesContent":["import animationManager, {\n  AnimationStatusCallbacks,\n  makeSequence,\n  SequenceStep\n} from '../../services/animations/animation-manager';\nimport { AnimationSequences, AnimationSequencesType } from '../../utility/constants';\n\nexport type RouteChangeCallbacks = {\n  onSlideMainDrawerOutEnd: () => Promise<unknown>;\n};\n\nconst resetToFarRight = (el: HTMLElement) => {\n  el.style.left = '150%';\n  el.style.position = 'relative';\n};\n\nconst mainDrawerHTMLSelector = '#main-drawer > div:first-child';\n\nexport const registerOpenDoubleDrawerSequence = ({\n  onAnimationStarts,\n  onAnimationEnds\n}: Required<AnimationStatusCallbacks>): void => {\n  const sequence: SequenceStep[] = [\n    [\n      {\n        onStart: onAnimationStarts,\n        elementSelector: 'phn-double-drawer',\n        animation: {\n          className: 'opening-animation',\n          cleanUpAfterAnimation: (element) => {\n            element.style.left = '0px';\n          }\n        }\n      },\n      {\n        elementSelector: 'phn-backdrop',\n        animation: {\n          className: 'fade-in-animation',\n          cleanUpAfterAnimation: (element) => {\n            element.style.opacity = '1';\n            element.style.backgroundColor = 'rgba(0, 0, 0, 0.6)';\n          }\n        },\n        onEnd: onAnimationEnds\n      }\n    ]\n  ];\n\n  animationManager.register(AnimationSequences.OPEN_DOUBLE_DRAWER, makeSequence(sequence));\n};\n\nexport const registerCloseDoubleDrawerSequence = ({\n  onBackdropFadeOutEnd,\n  onAnimationStarts,\n  onAnimationEnds\n}: Required<AnimationStatusCallbacks> & {\n  onBackdropFadeOutEnd: () => Promise<void>;\n}): void => {\n  const sequence: SequenceStep[] = [\n    [\n      {\n        elementSelector: 'phn-double-drawer',\n        onStart: onAnimationStarts,\n        animation: {\n          className: 'closing-animation',\n          cleanUpBeforeAnimation: (element) => {\n            element.style.left = '';\n          }\n        }\n      },\n      {\n        elementSelector: 'phn-backdrop',\n        animation: {\n          className: 'fade-out-animation',\n          cleanUpBeforeAnimation: (element) => {\n            element.style.opacity = '';\n            element.style.backgroundColor = '';\n          }\n        },\n        onEnd: () => {\n          onBackdropFadeOutEnd();\n          onAnimationEnds();\n        }\n      }\n    ]\n  ];\n\n  animationManager.register(AnimationSequences.CLOSE_DOUBLE_DRAWER, makeSequence(sequence));\n};\n\nexport const registerTransitionSequence = (\n  { onSlideMainDrawerOutEnd }: RouteChangeCallbacks,\n  direction: 'normal' | 'reverse' = 'normal'\n): void => {\n  animationManager.register(\n    `transitionSameLevelDoubleDrawer${direction === 'reverse' ? 'Reverse' : ''}`,\n    makeSequence([\n      [\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className:\n              direction === 'reverse' ? 'transition-backward-animation-out' : 'transition-forward-animation-out',\n            cleanUpAfterAnimation: resetToFarRight\n          },\n          onEnd: onSlideMainDrawerOutEnd\n        }\n      ],\n      [\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: direction === 'reverse' ? 'transition-forward-animation-in' : 'transition-forward-animation-in',\n            cleanUpBeforeAnimation: (element) => {\n              element.style.left = '';\n              element.style.position = '';\n            }\n          }\n        }\n      ]\n    ])\n  );\n};\n\nexport const registerForwardToNextMenuSequence = ({ onSlideMainDrawerOutEnd }: RouteChangeCallbacks): void => {\n  animationManager.register(\n    'transitionNextLevelDoubleDrawer',\n    makeSequence([\n      [\n        {\n          elementSelector: '#side-drawer > div',\n          animation: {\n            className: 'transition-forward-animation-out'\n          }\n        },\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: 'transition-forward-animation-out'\n          },\n          onEnd: onSlideMainDrawerOutEnd\n        }\n      ],\n      [\n        {\n          elementSelector: '#side-drawer > div',\n          animation: {\n            className: 'transition-forward-animation-in'\n          }\n        },\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: 'transition-forward-animation-in'\n          }\n        }\n      ]\n    ])\n  );\n};\nexport const registerBackToPreviousMenuSequence = ({ onSlideMainDrawerOutEnd }: RouteChangeCallbacks): void => {\n  animationManager.register(\n    'transitionPreviousLevelDoubleDrawer',\n    makeSequence([\n      [\n        {\n          elementSelector: '#side-drawer > div',\n          animation: {\n            className: 'transition-backward-animation-out'\n          }\n        },\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: 'transition-backward-animation-out'\n          },\n          onEnd: onSlideMainDrawerOutEnd\n        }\n      ],\n      [\n        {\n          elementSelector: '#side-drawer > div',\n          animation: {\n            className: 'transition-backward-animation-in'\n          }\n        },\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: 'transition-backward-animation-in'\n          }\n        }\n      ]\n    ])\n  );\n};\n\nexport const isPlayingDoubleDrawerAnimation = (): boolean => {\n  const doubleDrawerAnimationSequences: AnimationSequencesType[] = [\n    AnimationSequences.OPEN_DOUBLE_DRAWER,\n    AnimationSequences.CLOSE_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_NEXT_LEVEL_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_PREVIOUS_LEVEL_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_SAME_LEVEL_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_SAME_LEVEL_DOUBLE_DRAWER_REVERSE\n  ];\n\n  return doubleDrawerAnimationSequences.some((sequence) => {\n    try {\n      return animationManager.isPlaying(sequence);\n    } catch {\n      return false;\n    }\n  });\n};\n"],"mappings":"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"}