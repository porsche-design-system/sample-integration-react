{"version":3,"names":["M","Object","defineProperty","W","r","t","e","enumerable","configurable","writable","value","o","y","BEFORE_MERGE","AFTER_MERGE","w","clean","enabled","executionPlace","values","logging","level","validation","allowUnknown","verbose","webProperties","eventNamePattern","reactiveUrl","reactiveDimensions","U","prototype","create","event","length","context","eventAction","S","_","s","i","m","P","n","l","includes","G","concat","toString","k","B","split","C","push","j","x","error","warn","log","v","this","prefix","settings","__assign","_getMergedSettings","_isAllowed","isAvailable","_log","console","dir","debug","info","b","u","_i","arguments","forEach","Array","isArray","q","timestamp","server","hostname","pageExperience","pageId","url","visitor","deviceBrowserBreakpoint","breakpoint","deviceBrowserHeight","height","deviceBrowserOrientation","orientation","deviceBrowserWidth","width","deviceType","useragent","userAgent","K","V","window","location","href","replace","Y","Date","toISOString","Q","R","innerHeight","D","innerWidth","T","X","matchMedia","matches","z","navigator","J","breakpoints","Z","ee","keys","indexOf","map","trim","test","Number","parseFloat","te","issues","eventMatrix","_a","events","__rest","type","name","message","a","d","c","filter","g","h","f","p","E","N","ie","Map","_className","_logger","_settings","_dataLayerStore","pagData","_defaultProperties","setup","_handleDefaultWebProperties","getRegisteredExtension","getRegisteredExtensionByClassName","className","_extensions","has","get","getRegisteredExtensions","registerExtension","dataLayerInstance","set","removeExtension","delete","removeExtensionByClassName","_eventNamePayloadFactory","getDefaultProperties","__spreadArray","apply","sort","join","byName","byArray","byRegex","identifier","data","RegExp","setDefaultProperties","find","_webPropertiesHandled","_webPayloadFactory","oe","_super","__extends","_this","call","getEnvironmentAbbreviation","env","Environments","PRODUCTION","PREVIEW","GlobalDataLayerService","homeNavEventId","initialise","gdl","GlobalDataLayer","pushDataLayerEvent","eventData","setEnvironment","environment","setPageName","pageName","setUser","userId","loginStatus","ids","setLocale","locale","splitLocale","country","language","err","defaultGDLProperties","applicationId","DATA_LAYER_APP_ID","assign","applicationName","DATA_LAYER_APPLICATION_NAME","isString","globalDataLayerService"],"sources":["node_modules/@porsche/globaldatalayer/dist/GlobalDataLayer.es.js","src/services/analytics/global-data-layer-service.ts"],"sourcesContent":["var M = Object.defineProperty;\nvar W = (r, t, e) => t in r ? M(r, t, { enumerable: !0, configurable: !0, writable: !0, value: e }) : r[t] = e;\nvar o = (r, t, e) => (W(r, typeof t != \"symbol\" ? t + \"\" : t, e), e);\nconst y = {\n  BEFORE_MERGE: \"BEFORE_MERGE\",\n  AFTER_MERGE: \"AFTER_MERGE\"\n}, w = {\n  clean: {\n    enabled: !1,\n    executionPlace: y.AFTER_MERGE,\n    values: [\"\", void 0, null]\n  },\n  logging: {\n    enabled: !0,\n    level: \"warn\"\n  },\n  validation: {\n    enabled: !1,\n    allowUnknown: !1,\n    verbose: !0\n  },\n  webProperties: {\n    enabled: !0,\n    eventNamePattern: /.*/,\n    reactiveUrl: !0,\n    reactiveDimensions: !0\n  }\n};\nclass U {\n  /**\n   * Creates a PCOM (default) data layer schema specific object, that contains the given event name.\n   *\n   * @param data - Contains the event name in a standardized {@link IFactoryData} like way.\n   *\n   * @returns The event name in the PCOM (default) data layer schema specific object.\n   *\n   * @example\n   * myEventNameFactory.create({ event: 'MY_EVENT_NAME' });\n   * // returns:\n   * // {\n   * //   context: {\n   * //     eventAction: 'MY_EVENT_NAME'\n   * //   }\n   * // }\n   */\n  create(t) {\n    return typeof t.event != \"string\" || t.event.length === 0 ? {} : {\n      context: {\n        eventAction: t.event\n      }\n    };\n  }\n}\nconst S = (r, t) => {\n  let e;\n  for (e in r)\n    if (!(!r || !r[e]) && t(r[e], e) === !1)\n      return !1;\n  return !0;\n}, _ = (r, t) => S(r, (e, s) => {\n  for (const i in r[s])\n    if (t(e[i], i, e, s) === !1)\n      return !1;\n  return !0;\n}), ne = (r) => {\n  if (m(r))\n    return !0;\n  let t = 0, e = 0;\n  return S(r, (s) => {\n    t++, m(s) && e++;\n  }), t === e;\n}, m = (r) => {\n  for (const t in r)\n    return !1;\n  return !0;\n}, P = (r, t = ((e) => (e = w.clean) == null ? void 0 : e.values)() || []) => (_(\n  r,\n  (s, i, n, l) => {\n    t.includes(s) && (delete n[i], m(n) && delete r[l]);\n  }\n), r), G = (r, t) => r && (_(\n  r,\n  (e, s, i, n) => {\n    t.includes(`${n.toString()}.${s.toString()}`) && (delete i[s], m(i) && delete r[n]);\n  }\n), r), k = (r) => (_(\n  r,\n  (t, e, s) => (typeof t != \"function\" || (s[e] = t()), !0)\n), r);\nclass H {\n  /**\n   * Creates a new instance of {@link FrameTicker}.\n   *\n   * @param callback The functionality that should be called\n   * @param ticksPerSecond How many times should the functionality been called in one second\n   */\n  constructor(t, e = 10) {\n    o(this, \"tickInterval\");\n    o(this, \"callback\");\n    o(this, \"_tickTime\", Date.now());\n    o(this, \"_tickActive\", !1);\n    this.callback = t, this.tickInterval = 1e3 / e;\n  }\n  /**\n   * Start the {@link FrameTicker}.\n   */\n  start() {\n    this._tickActive || (this._tickActive = !0, this.run());\n  }\n  /**\n   * Stop the {@link FrameTicker}.\n   */\n  stop() {\n    this._tickActive = !1;\n  }\n  /**\n   * Internal function executed on each _tick_.\n   *\n   * @private\n   */\n  run() {\n    if (!this._tickActive)\n      return;\n    requestAnimationFrame(this.run.bind(this));\n    const t = Date.now(), e = t - this._tickTime;\n    e < this.tickInterval || (this._tickTime = t - e % this.tickInterval, this.callback());\n  }\n}\nconst B = (r, t) => {\n  const e = t.split(\".\");\n  if (e.length !== 2)\n    return;\n  const s = r[e[0]];\n  if (s)\n    return s[e[1]];\n}, C = (r) => {\n  if (!r)\n    return [];\n  const t = [];\n  return _(\n    r,\n    (e, s, i, n) => {\n      t.push(`${n.toString()}.${s.toString()}`);\n    }\n  ), t;\n}, j = w.logging;\nvar x = /* @__PURE__ */ ((r) => (r[r.error = 0] = \"error\", r[r.warn = 1] = \"warn\", r[r.log = 2] = \"log\", r))(x || {});\nconst v = class v {\n  /**\n   * Creates an instance of the {@link Logger} class.\n   *\n   * @param prefix A prefix that is used in all logs\n   *   (`[PREFIX] MESSAGE`, i.e. `[GlobalDataLayer] This is a serious message`).\n   * @param options Options to be merged as settings with the {@link DEFAULT_SETTINGS.logging}.\n   */\n  constructor(t, e) {\n    /**\n     * The prefix that is used in all logs.\n     * @private\n     */\n    o(this, \"prefix\");\n    /**\n     * The merged settings. Also see the options of the {@link constructor} and the {@link DEFAULT_SETTINGS.logging}.\n     *\n     * @see {@link TLoggerSettings}\n     *\n     * @private\n     */\n    o(this, \"settings\");\n    this.prefix = t, this.settings = {\n      ...j,\n      ...e\n    };\n  }\n  /**\n   * Helper function to merge the options of a log method call with the current {@link settings}.\n   *\n   * @param options  Options to be merged with the available {@link settings}\n   *\n   * @returns The merged temporary settings.\n   *\n   * @private\n   */\n  _getMergedSettings(t) {\n    return t ? {\n      ...this.settings,\n      ...t\n    } : this.settings;\n  }\n  /**\n   * Check, if this log message is allowed.\n   *\n   * @see {@link TLoggerSettings.enabled} and {@link TLoggerSettings.level} and {@link isAvailable}\n   *\n   * @param type Type of the current log message.\n   * @param settings The current (temporary) settings.\n   *\n   * @returns `true`if the log message is allowed.\n   *\n   * @private\n   */\n  _isAllowed(t, e) {\n    if (!v.isAvailable || !e.enabled)\n      return !1;\n    const s = x[e.level];\n    switch (t) {\n      case \"error\":\n      case \"warn\":\n        return s >= x[t];\n      case \"info\":\n      case \"log\":\n      case \"debug\":\n      case \"dir\":\n        return s >= 2;\n      default:\n        return !1;\n    }\n  }\n  /**\n   * A helper method to execute the log messages of all different types.\n   *\n   * @param msg The message text.\n   * @param type The type of the message.\n   * @param options Temporary options, that will be merged with the current {@link settings}.\n   *\n   * @private\n   */\n  _log(t, e = \"log\", s) {\n    const i = this._getMergedSettings(s);\n    if (this._isAllowed(e, i))\n      switch (e) {\n        case \"dir\":\n          console.log(`[${this.prefix}] ${e}:`), console[e](t);\n          break;\n        default:\n          console[e](`[${this.prefix}] ${t}`);\n      }\n  }\n  /**\n   * Write a normal log message.\n   *\n   * @param msg The message text.\n   * @param options Temporary options, that will be merged with the current {@link settings}.\n   */\n  log(t, e) {\n    this._log(t, \"log\", e);\n  }\n  /**\n   * Write a log message of type `dir`.\n   *\n   * This message will be split in two messages, the prefix with \" dir:\" and the\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/console/dir dir} output as interactive list.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/console/dir console.dir()}\n   *\n   * @param msg The message text.\n   * @param options Temporary options, that will be merged with the current {@link settings}.\n   */\n  dir(t, e) {\n    this._log(t, \"dir\", e);\n  }\n  /**\n   * Write a log message of type `debug`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/console/debug console.debug()}\n   *\n   * @param msg The message text.\n   * @param options Temporary options, that will be merged with the current {@link settings}.\n   */\n  debug(t, e) {\n    this._log(t, \"debug\", e);\n  }\n  /**\n   * Write a log message of type `error`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/console/error console.error()}\n   *\n   * @param msg The message text.\n   * @param options Temporary options, that will be merged with the current {@link settings}.\n   */\n  error(t, e) {\n    this._log(t, \"error\", e);\n  }\n  /**\n   * Write a log message of type `info`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/console/info console.info()}\n   *\n   * @param msg The message text.\n   * @param options Temporary options, that will be merged with the current {@link settings}.\n   */\n  info(t, e) {\n    this._log(t, \"info\", e);\n  }\n  /**\n   * Write a log message of type `warn`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/console/warn console.warn()}\n   *\n   * @param msg The message text.\n   * @param options Temporary options, that will be merged with the current {@link settings}.\n   */\n  warn(t, e) {\n    this._log(t, \"warn\", e);\n  }\n};\n/**\n * Check if there is a console available that makes logging possible.\n */\no(v, \"isAvailable\", (() => typeof console < \"u\")());\nlet b = v;\nconst u = (...r) => {\n  const t = {};\n  return r.forEach((e) => {\n    if (m(e))\n      return;\n    const s = {\n      ...t,\n      ...e\n    };\n    let i;\n    for (i in s)\n      typeof s[i] == \"object\" && !Array.isArray(s[i]) ? t[i] = {\n        ...t[i],\n        ...e[i]\n      } : t[i] = s[i];\n  }), t;\n};\nclass q {\n  /**\n   * Creates a PCOM (default) data layer schema specific object, that contains the given web properties.\n   *\n   * @param data - Contains the web properties in a standardized {@link IFactoryData} like way.\n   *\n   * @returns The given web properties in the PCOM (default) data layer schema specific object.\n   *\n   * @example\n   * myWebPropertiesFactory.create({ userAgent: 'MY_USE_AGENT' });\n   * // returns:\n   * // {\n   * //   visitor: {\n   * //     userAgent: 'MY_USE_AGENT'\n   * //   }\n   * // }\n   */\n  create(t) {\n    return P(\n      {\n        context: {\n          timestamp: t.timestamp,\n          server: t.hostname\n        },\n        pageExperience: {\n          pageId: t.url\n        },\n        visitor: {\n          deviceBrowserBreakpoint: t.breakpoint,\n          deviceBrowserHeight: t.height,\n          deviceBrowserOrientation: t.orientation,\n          deviceBrowserWidth: t.width,\n          deviceType: t.deviceType,\n          useragent: t.userAgent\n        }\n      },\n      [void 0]\n    );\n  }\n}\nconst K = w.webProperties, V = () => window.location.href.replace(/[?#].*/, \"\"), Y = () => (/* @__PURE__ */ new Date()).toISOString(), Q = () => window.location.hostname, R = () => window.innerHeight.toString(), D = () => window.innerHeight > window.innerWidth ? \"p\" : \"l\", T = () => window.innerWidth.toString(), X = () => window.matchMedia(\"(hover: none), (pointer: coarse)\").matches ? \"mobile\" : \"desktop\", z = () => window.navigator.userAgent, J = (r) => {\n  if (!r.breakpoints || r.breakpoints.length < 1)\n    return;\n  const { breakpoints: t } = r, e = () => {\n    const s = window.innerWidth;\n    let i = 0, n = 0;\n    for (; n < t.length && s >= t[n]; )\n      i = t[n], n++;\n    return i.toString();\n  };\n  return r.reactiveDimensions ? e : e();\n}, Z = (r, t) => {\n  const e = {\n    ...K,\n    ...r\n  }, i = {\n    breakpoint: J(e),\n    timestamp: Y(),\n    hostname: Q(),\n    url: e.reactiveUrl ? V : V(),\n    height: e.reactiveDimensions ? R : R(),\n    orientation: e.reactiveDimensions ? D : D(),\n    width: e.reactiveDimensions ? T : T(),\n    deviceType: X(),\n    userAgent: z()\n  };\n  return t ? t.create(i) : i;\n}, ee = (r, t) => {\n  switch (t) {\n    case \"string\":\n    case \"number\":\n    case \"boolean\":\n      return typeof r === t;\n    case \"any[]\":\n      return Array.isArray(r) && r.length > 0;\n    case \"Record<string, any>\":\n      return typeof r == \"object\" && !Array.isArray(r) && Object.keys(r).length > 0;\n    case \"any\":\n      return !0;\n    default:\n      if ((typeof r == \"boolean\" || typeof r == \"number\" || typeof r == \"string\") && t.indexOf(\"|\") > 0)\n        return t.split(\"|\").map((s) => {\n          const i = s.trim();\n          return /^'.*'$/.test(i) ? i.replace(/(^ ?'?|'? ?$)/g, \"\") : /^(true|false)$/.test(i) ? i === \"true\" : /^-?(\\d*\\.)?\\d+$/.test(i) ? Number.parseFloat(i) : i.replace(/(^ ?'?|'? ?$)/g, \"\");\n        }).includes(r);\n  }\n  return !0;\n}, te = (r, t, e) => {\n  const s = {\n    level: null,\n    issues: []\n  };\n  if (!e.enabled || !e.eventMatrix)\n    return s;\n  const { events: i, ...n } = e.eventMatrix, l = i.indexOf(r);\n  if (l === -1)\n    return s.level = \"error\", s.issues.push({\n      level: \"error\",\n      type: \"EVENT_NOT_FOUND\",\n      name: r,\n      message: `'${r}': Event does not exist.`\n    }), s;\n  const a = C(t), d = Object.keys(n), c = a.filter(\n    (g) => !d.includes(g)\n  );\n  c.length > 0 && (e.allowUnknown || G(t, c), c.forEach((g) => {\n    s.level = s.level ?? \"warn\", s.issues.push({\n      level: \"warn\",\n      type: \"PROPERTY_DOES_NOT_EXIST\",\n      name: g,\n      message: `'${g}': Property does not exist in the given Event Matrix.${e.allowUnknown ? \"\" : \" It was omitted from the DataLayer payload.\"}`\n    });\n  }));\n  let h;\n  for (h in n) {\n    const g = n[h], f = typeof g.e[l] < \"u\", p = g.r === 1, E = t ? B(t, h) : void 0, N = typeof E < \"u\";\n    if (f && // Does the event want this property?\n    p && // Is the property mandatory in general?\n    !N && (s.level = \"error\", s.issues.push({\n      level: \"error\",\n      type: \"REQUIRED_PROPERTY_MISSING\",\n      name: h,\n      message: `'${h}': The required property is missing.`\n    }), !e.verbose) || N && !ee(E, g.t) && (s.level = \"error\", s.issues.push({\n      level: \"error\",\n      type: \"WRONG_PROPERTY_TYPE\",\n      name: h,\n      message: `'${h}': Wrong type detected. Expected '${g.t}', got '${typeof E}'.`\n    }), !e.verbose))\n      return s;\n  }\n  return s;\n};\nclass L {\n  constructor(t = \"DataLayerExtension\", e) {\n    /**\n     * A\n     * @protected\n     */\n    o(this, \"_logger\");\n    o(this, \"_className\");\n    o(this, \"_dataLayerInstance\");\n    this._className = t, this._logger = new b(this.className, e);\n  }\n  get dataLayerInstance() {\n    return this._dataLayerInstance;\n  }\n  set dataLayerInstance(t) {\n    this._dataLayerInstance = t;\n  }\n  get className() {\n    return this._className;\n  }\n  set className(t) {\n    this._className = t;\n  }\n  get isRegistered() {\n    return typeof this._dataLayerInstance < \"u\";\n  }\n}\nconst A = {\n  eventName: \"UNKNOWN\",\n  thresholds: {\n    filled: 0.5,\n    visible: 0.3,\n    minValidityPeriod: 1\n  },\n  triggerUpdates: {\n    enabled: !1,\n    eventName: \"VIEWPORT_TRACKER_STATUS_CHANGE\"\n  },\n  tickerSettings: {\n    ticksPerSecond: 10\n  }\n};\nclass se extends Event {\n  constructor(e, s) {\n    super(e);\n    o(this, \"registeredElement\");\n    this.registeredElement = s;\n  }\n}\nclass $ extends L {\n  /**\n   * Creates a new instance of {@link ViewportTrackerExtension} with optional settings of type\n   * {@link TViewportTrackerSettings}.\n   *\n   * @param options The settings to initialize the instance. Will be merged with the defaults.\n   */\n  constructor(e) {\n    var s;\n    super(\"ViewportTrackerExtension\", e == null ? void 0 : e.logger);\n    o(this, \"settings\");\n    o(this, \"observer\", null);\n    o(this, \"frameTicker\");\n    o(this, \"registeredElements\", []);\n    o(this, \"visibleElements\", []);\n    this.settings = e ? u(A, e) : A, this.observer = this.createObserver(), this.frameTicker = new H(\n      this.checkVisibilityOfElements.bind(this),\n      (s = this.settings.tickerSettings) == null ? void 0 : s.ticksPerSecond\n    );\n  }\n  /**\n   * Will create and return the mandatory {@link IntersectionObserver}. The function will log an error if this is not\n   * possible.\n   *\n   * @returns The ready-to-use {@link IntersectionObserver} instance or null.\n   *\n   * @private\n   */\n  createObserver() {\n    return !window || !(\"IntersectionObserver\" in window) ? (this._logger.error(\"The ViewportTrackerExtension will need IntersectionObserver to work.\"), null) : new IntersectionObserver(this.observerHandler.bind(this), {\n      threshold: 0,\n      rootMargin: \"0px 0px\"\n    });\n  }\n  /**\n   * Register an {@link HTMLElement} to be observed.\n   *\n   * @param element The {@link HTMLElement} to register with optional _DataLayer_ properties.\n   */\n  registerElement(e) {\n    var s;\n    this.unregisterElement(e.el), this.registeredElements.push({\n      el: e.el,\n      properties: e.properties,\n      state: {\n        isFilled: !1,\n        isVisible: !1,\n        passedValidityPeriod: !1\n      }\n    }), (s = this.observer) == null || s.observe(e.el);\n  }\n  /**\n   * Register multiple {@link HTMLElement}s to be observed.\n   *\n   * @param elements The {@link HTMLElement}s to register with optional _DataLayer_ properties.\n   */\n  registerElements(e) {\n    for (const s of e)\n      this.registerElement(s);\n  }\n  /**\n   * Unregister an {@link HTMLElement} from observation.\n   *\n   * @param element The {@link HTMLElement} to unregister.\n   */\n  unregisterElement(e) {\n    var i;\n    (i = this.observer) == null || i.unobserve(e);\n    const s = this.getRegisteredElementIndex(e);\n    s < 0 || this.registeredElements.splice(s, 1);\n  }\n  /**\n   * Unregister multiple {@link HTMLElement}s from observation.\n   *\n   * @param elements The {@link HTMLElement}s to unregister.\n   */\n  unregisterElements(e) {\n    for (const s of e)\n      this.unregisterElement(s);\n  }\n  /**\n   * Helper function to retrieve the index of a registered {@link HTMLElement} from the `registeredElements` array.\n   *\n   * @param el The {@link HTMLElement} to find.\n   * @returns The index of the element if found, otherwise `-1`.\n   *\n   * @private\n   */\n  getRegisteredElementIndex(e) {\n    return this.registeredElements.findIndex((s) => s.el === e);\n  }\n  /**\n   * Helper function to retrieve a registered {@link HTMLElement} from the `registeredElements` array.\n   *\n   * @param el The {@link HTMLElement} to find.\n   *\n   * @returns The found element, otherwise `undefined`.\n   *\n   * @private\n   */\n  getRegisteredElement(e) {\n    const s = this.getRegisteredElementIndex(e);\n    if (!(s < 0))\n      return this.registeredElements[s];\n  }\n  /**\n   * The {@link IntersectionObserver} callback function to handle updates to the registered {@link TRegisteredElement}s\n   * {@link HTMLElement}s. Registers or unregisters items based on the given settings and changes their state.\n   *\n   * @param entries Intersection element entries.\n   *\n   * @private\n   */\n  observerHandler(e) {\n    for (const s of e) {\n      const i = s.target, n = this.getRegisteredElement(i);\n      if (n) {\n        if (s.isIntersecting) {\n          this.visibleElements.findIndex((l) => l === n.el) === -1 && this.visibleElements.push(n.el);\n          continue;\n        }\n        this.removeFromVisibleStore(n.el), (n.state.isFilled || n.state.isVisible) && requestAnimationFrame(() => {\n          this.processViewportIntersection(n, {\n            isVisible: !1,\n            isFilled: !1,\n            passedValidityPeriod: !1\n          });\n        });\n      }\n    }\n    this.visibleElements.length > 0 && this.frameTicker.start();\n  }\n  /**\n   * Callback for the {@link FrameTicker} to frequently check the state of all elements which are currently marked as\n   * _in the viewport_.\n   *\n   * @private\n   */\n  checkVisibilityOfElements() {\n    if (this.visibleElements.length === 0)\n      return;\n    const e = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0), s = window.scrollY;\n    for (let i = 0; i < this.visibleElements.length; i++) {\n      const n = this.visibleElements[i], l = this.getRegisteredElement(n);\n      if (!l || !this.settings.triggerUpdates.enabled && l.state.passedValidityPeriod)\n        continue;\n      const { isVisible: a, isFilled: d } = $.percentWithinViewport(n, s, e), c = {\n        isVisible: a >= this.settings.thresholds.visible,\n        isFilled: d >= this.settings.thresholds.filled,\n        passedValidityPeriod: l.state.passedValidityPeriod\n      };\n      this.processViewportIntersection(l, c);\n    }\n  }\n  /**\n   * Get to know how much of the {@link HTMLElement} is visible the viewport.\n   *\n   * @param el The element in the viewport.\n   * @param scrollY The scrollY of the current window.\n   * @param viewportHeight The height of the viewport.\n   *\n   * @returns The % visible of the HTMLElement in the viewport.\n   *\n   * @private\n   */\n  static percentWithinViewport(e, s, i) {\n    const n = { top: s, bottom: s + i }, l = e.getBoundingClientRect(), a = {\n      top: l.y + s,\n      bottom: l.y + l.height + s\n    }, d = l.height;\n    let c = d;\n    a.top < n.top && (c = d - (s - a.top)), a.bottom > n.bottom && (c = c - (a.bottom - n.bottom));\n    let h = c / d, g = c / i;\n    return (n.top > a.bottom || n.bottom < a.top) && (h = 0, g = 0), n.top < a.top && n.bottom > a.bottom && (h = 1), a.top < n.top && a.bottom > n.bottom && (g = 1), {\n      isVisible: h,\n      isFilled: g\n    };\n  }\n  /**\n   * Processes a {@link TRegisteredElement} items intersection. If the element matches the\n   * {@link TViewportTrackerSettings.thresholds `thresholds`}, the {@link IGlobalDataLayer.push} method is called.\n   *\n   * Also dispatches the update event of the {@link TViewportTrackerSettings.triggerUpdates `triggerUpdates`} feature.\n   *\n   * @param registeredElement The registered element to process.\n   * @param isVisible Indicates, if the element is {@link TViewportTrackerSettings.thresholds.visible visible}.\n   * @param isFilled Indicates, if the element is {@link TViewportTrackerSettings.thresholds.filled filled}.\n   *\n   * @private\n   */\n  processViewportIntersection(e, { isVisible: s, isFilled: i }) {\n    const n = e.state || {\n      isVisible: !1,\n      isFilled: !1\n    }, l = Date.now(), a = {\n      isVisible: s,\n      isFilled: i,\n      timeVisible: n.isVisible !== s ? l : n.timeVisible,\n      timeFilled: n.isFilled !== i ? l : n.timeFilled,\n      passedValidityPeriod: n.passedValidityPeriod\n    }, d = (c) => (l - c) / 1e3;\n    if (n.isVisible !== a.isVisible || n.isFilled !== a.isFilled)\n      a.passedValidityPeriod = !1, e.state = a, this.dispatchEvent(e);\n    else if (!a.passedValidityPeriod && (a.isVisible || a.isFilled)) {\n      const c = d(a.timeVisible), h = d(a.timeFilled);\n      (s && c >= this.settings.thresholds.minValidityPeriod || i && h >= this.settings.thresholds.minValidityPeriod) && (a.passedValidityPeriod = !0, e.state = a, this.pushEvent(e), this.dispatchEvent(e));\n    }\n  }\n  /**\n   * Helper function to remove an {@link HTMLElement} from the state of being in the viewport. This will stop the\n   * {@link FrameTicker} checks from being processed for this {@link TRegisteredElement}.\n   *\n   * @param element The HTMLElement to remove.\n   *\n   * @private\n   */\n  removeFromVisibleStore(e) {\n    let s = -1;\n    for (; (s = this.visibleElements.findIndex((i) => i === e)) >= 0; )\n      this.visibleElements.splice(s, 1);\n    this.visibleElements.length === 0 && this.frameTicker.stop();\n  }\n  /**\n   * Will call the {@link IGlobalDataLayer.push} with the given {@link TViewportTrackerSettings.eventName `eventName`},\n   * whenever a {@link TRegisteredElement} matches the given {@link TViewportTrackerSettings.thresholds `thresholds`}.\n   *\n   * @param item The registered {@link HTMLElement} with its {@link TRegisteredElement.properties `properties` payload}.\n   *\n   * @private\n   */\n  pushEvent(e) {\n    if (!this.dataLayerInstance) {\n      this._logger.warn(\"This extension is not registered to a GlobalDataLayer instance.\");\n      return;\n    }\n    const { properties: s } = e, i = typeof s == \"function\" ? s() : s || {};\n    this.dataLayerInstance.push(this.settings.eventName, i);\n  }\n  /**\n   * Dispatches a {@link ViewportTrackerStatusChangeEvent}.\n   *\n   * @param registeredElement The registered {@link HTMLElement} to use as target.\n   *\n   * @private\n   */\n  dispatchEvent(e) {\n    this.settings.triggerUpdates && this.settings.triggerUpdates.enabled && e.el.dispatchEvent(\n      new se(this.settings.triggerUpdates.eventName, e)\n    );\n  }\n}\nconst F = (r) => r.length > 0, O = \"PageNameExtender_unknown_pageName\", I = {\n  initialPageName: O,\n  separator: \"/\"\n};\nclass ae extends L {\n  /**\n   * Constructor of PageNameExtender\n   *\n   * @param options Settings object for this extension.\n   */\n  constructor(e) {\n    super(\"PageNameExtenderExtension\", e == null ? void 0 : e.logger);\n    o(this, \"settings\");\n    /**\n     * Internal page name store. To handle the different levels.\n     */\n    o(this, \"pageName\", []);\n    /**\n     * Internal basic page name length. This is defined in the {@link set} method and used to make sure there is\n     * an option to keep ({@link reduce}) or replace ({@link set}) the basic page name.\n     */\n    o(this, \"basePageNameLength\", 0);\n    this.settings = e ? u(I, e) : I, this.set(this.settings.initialPageName);\n  }\n  /**\n   * Update the complete stored {@link pageName} with a string or an array of strings.\n   *\n   * @param pageName If a simple string is given, it will be separated by the given {@link settings} separator.\n   * @param keepExtensions Keep the parts which were added by {@link extend} method.\n   *\n   * @returns The new {@link pageName} joined with the {@link settings} separator.\n   */\n  set(e, s = !1) {\n    const i = this.basePageNameLength;\n    return typeof e == \"string\" && (e = e.split(this.settings.separator).filter(F)), e.length === 0 ? (this._logger.warn(\"`pageName` must not be empty\"), \"\") : (e[0] === O && this._logger.info(\n      \"No `initialPageName` was provided. Make sure the `pageName` is provided later via the `set` method.\"\n    ), this.basePageNameLength = e.length, s && e.push(...this.pageName.slice(i - 1)), this.pageName = e, this.get());\n  }\n  /**\n   * Get the current {@link pageName}.\n   *\n   * @param basePageNameOnly If you want to ignore the parts which were added by {@link extend}.\n   *\n   * @returns The current {@link pageName} joined with the {@link settings} separator.\n   */\n  get(e = !1) {\n    return (e ? this.pageName.slice(0, this.basePageNameLength) : this.pageName).join(\n      this.settings.separator\n    );\n  }\n  /**\n   * Add (multiple) sub levels to the {@link pageName}.\n   *\n   * @param levels If a simple string is given it will be split by the given {@link settings} separator.\n   *\n   * @returns The new {@link pageName} joined with the given {@link settings} separator.\n   */\n  extend(e) {\n    return Array.isArray(e) && (e = e.join(this.settings.separator)), e = e.split(this.settings.separator).filter(F), e.length === 0 ? this._logger.warn(\"`levels` must not be empty\") : this.pageName.push(...e), this.get();\n  }\n  /**\n   * Remove (multiple) sub levels from the {@link pageName}.\n   *\n   * @param [levelCount='last'] Number of levels that should be removed. You can also use a\n   *   {@link TPageNameExtenderReduceType} to define the \"last\" or \"all\" (except the root).\n   * @param keepBasePageName If the basic page name given by {@link set} should also be reducible. This\n   *   cannot be restored.\n   *\n   * @returns The new {@link pageName} joined with the given {@link settings} separator.\n   */\n  reduce(e = \"last\", s = !0) {\n    let i;\n    return e === \"all\" ? i = this.pageName.length - (s ? this.basePageNameLength : 1) : e === \"last\" ? i = this.pageName.length > (s ? this.basePageNameLength : 1) ? 1 : 0 : (i = e, (this.pageName.length <= e || s && this.pageName.length - this.basePageNameLength < e) && (this._logger.info(\n      `${this.pageName.length - (s ? this.basePageNameLength : 1)} - ${e} must not delete first level or more`\n    ), i = this.pageName.length - (s ? this.basePageNameLength : 1))), this.pageName.splice(i * -1, i), this.basePageNameLength > this.pageName.length && (this.basePageNameLength = this.pageName.length), this.get();\n  }\n  /**\n   * Get a temporary pre-fixed version of the current {@link pageName}.\n   *\n   * @param [prefix=''] The value that should be prepended temporarily.\n   *\n   * @returns The current {@link pageName} joined with the given {@link settings} separator pre-fixed with the given\n   *   string value.\n   */\n  getWithPrefix(e = \"\") {\n    return e + this.get();\n  }\n  /**\n   * Get a temporary post-fixed version of the current {@link pageName}.\n   *\n   * @param [postfix=''] The value that should be appended temporarily.\n   *\n   * @returns The current {@link pageName} joined with the given {@link Settings} separator post-fixed with the given\n   *   string value.\n   */\n  getWithPostfix(e = \"\") {\n    return this.get() + e;\n  }\n}\nclass ie {\n  /**\n   * Create an instance of the GlobalDataLayer library. This constructor has to be overwritten to initialize the needed\n   * factories ({@link _eventNamePayloadFactory} and {@link _webPayloadFactory}).\n   *\n   * @param options All options are merged with the {@link DEFAULT_SETTINGS} of type {@link TSettings}.\n   * @param [dataStore] The array where all the pushes are added to. The default tries to get or generate the\n   *   `window.pagData` array. If this is not possible, it creates an empty array, that is exposed via\n   *   {@link DataLayerStore}.\n   * @param [className] The class name of the library is here, because code can be uglified and/or minified later.\n   *\n   * @protected\n   */\n  constructor(t, e, s = \"GlobalDataLayer\") {\n    /**\n     * The class name of the library. This is needed, because code can be uglified and/or minified later.\n     * @protected\n     */\n    o(this, \"_className\");\n    /**\n     * The merged settings. Also see the options of the {@link constructor} and the {@link DEFAULT_SETTINGS}.\n     * @protected\n     */\n    o(this, \"_settings\");\n    /**\n     * An internal store where all default properties are added to.\n     * @protected\n     */\n    o(this, \"_defaultProperties\");\n    /**\n     * An internal logger, which has to be used for all console logs.\n     * @protected\n     */\n    o(this, \"_logger\");\n    /**\n     * A flag that indicates if the _Web Properties_ feature was already handled.\n     *\n     * @see {@link getWebProperties}\n     *\n     * @protected\n     */\n    o(this, \"_webPropertiesHandled\", !1);\n    /**\n     * the _DataLayer_ store array, that is used to push all the data.\n     *\n     * This can be transferred to the library with the second parameter `dataStore` of the {@link constructor}.\n     *\n     * @protected\n     */\n    o(this, \"_dataLayerStore\");\n    /**\n     * An internal store where all registered extensions are added to.\n     * @protected\n     */\n    o(this, \"_extensions\", /* @__PURE__ */ new Map());\n    const i = u(\n      w,\n      t || {}\n    );\n    this._className = s, this._logger = new b(this._className, i.logging), this._settings = i, e ? this._dataLayerStore = e : typeof window < \"u\" ? (this._dataLayerStore = window.pagData = window.pagData || [], this._logger.info(\"`dataLayerStore` was set to default `window.pagData`\")) : (this._dataLayerStore = [], this._logger.info(\"`dataLayerStore` was set to default `[]`\")), this._defaultProperties = [];\n  }\n  /**\n   * An internal function to set everything up after initialization is done. This has to be called at the end of the\n   * overwritten constructors.\n   * @protected\n   */\n  setup() {\n    this._handleDefaultWebProperties();\n  }\n  /**\n   * The current settings object.\n   * @readonly\n   */\n  get Settings() {\n    return this._settings;\n  }\n  /**\n   * Get the _DataLayer_ store, that is used to push all the data.\n   * @readonly\n   */\n  get DataLayerStore() {\n    return this._dataLayerStore;\n  }\n  /**\n   * Get a registered {@link DataLayerExtension} class instance based of the input type.\n   *\n   * @param TConstructor The class to search for.\n   *\n   * @returns The registered instance of the extension class, `undefined` if not found.\n   */\n  getRegisteredExtension(t) {\n    const e = new t();\n    return this.getRegisteredExtensionByClassName(e.className);\n  }\n  /**\n   * Get a registered {@link DataLayerExtension} class instance based of a classname.\n   *\n   * @param className The name of class instance to compare.\n   *\n   * @returns The registered instance of the extension class, undefined if not found.\n   */\n  getRegisteredExtensionByClassName(t) {\n    return this._extensions.has(t) ? this._extensions.get(t) : void 0;\n  }\n  /**\n   * Get all registered {@link DataLayerExtension}.\n   *\n   * @returns All registered DataLayerExtensions as array.\n   */\n  getRegisteredExtensions() {\n    const t = [];\n    for (const e of this._extensions.values())\n      t.push(e);\n    return t;\n  }\n  /**\n   * Register a new {@link DataLayerExtension} class for this instance.\n   *\n   * @param extension The extension class instance to register.\n   * @param override If there is an existing instance already registered, we override it, otherwise we do nothing.\n   */\n  registerExtension(t, e = !1) {\n    if (!e && this._extensions.has(t.className)) {\n      this._logger.warn(`Tried to register extension class <${t.className}> which already exists.`);\n      return;\n    }\n    t.dataLayerInstance = this, this._extensions.set(t.className, t), e ? this._logger.info(`Overriden registration for extension class <${t.className}>.`) : this._logger.info(`Registered extension class <${t.className}>.`);\n  }\n  /**\n   * Remove a registered {@link DataLayerExtension} instance.\n   *\n   * @param TConstructor The class to search for.\n   */\n  removeExtension(t) {\n    const e = new t();\n    if (this._extensions.has(e.className)) {\n      this._extensions.delete(e.className);\n      return;\n    }\n    this._logger.warn(`Tried to remove not existing extension class <${e.className}>.`);\n  }\n  /**\n   * Remove a registered {@link DataLayerExtension} instance by class name.\n   *\n   * @param className the name of the class\n   */\n  removeExtensionByClassName(t) {\n    if (this._extensions.has(t)) {\n      this._extensions.delete(t);\n      return;\n    }\n    this._logger.warn(`Tried to remove not existing extension class <${t}>.`);\n  }\n  /**\n   * Push a GlobalDataLayer Event with payload to the given data layer store. The method can fail and return `false`\n   *   because ...\n   *\n   *   - the given `eventName` was invalid\n   *   - the validation failed\n   *\n   * A settings object can be added as the third parameter to every call. This will then temporary override the provided\n   * settings for the time of the push action.\n   *\n   * @param eventName The name of the event that should be pushed.\n   * @param [payload] The _DataLayer_ properties to be merged and added to the data layer.\n   * @param [options] Temporary override the settings.\n   *\n   * @returns A boolean to indicate, if the push was successful.\n   */\n  push(t, e = [{}], s) {\n    var d, c;\n    if (t.length === 0)\n      return !1;\n    const i = s && !m(s) ? u(this._settings, s) : this._settings;\n    Array.isArray(e) || (e = [e]), e.forEach(k);\n    const n = this._eventNamePayloadFactory.create({ event: t }), l = k(this.getDefaultProperties(t));\n    i.clean.enabled && i.clean.executionPlace === y.BEFORE_MERGE && [l || {}, ...e].forEach(\n      (h) => P(h, i.clean.values)\n    );\n    const a = u(\n      n,\n      l || {},\n      ...e\n    );\n    if (i.clean.enabled && i.clean.executionPlace === y.AFTER_MERGE && P(a, i.clean.values), (d = i == null ? void 0 : i.validation) != null && d.enabled && ((c = i == null ? void 0 : i.validation) != null && c.eventMatrix)) {\n      const h = te(t, a, i.validation), g = h.issues.sort((f, p) => f.level !== p.level && p.level === \"warn\" ? -1 : 0).map((f) => `- [${f.level}]: ${f.message}`).join(`\n`);\n      switch (h.level) {\n        case \"error\":\n          return this._logger.error(\n            `Validation failed for event '${t}' with errors/warnings: \n${g}`,\n            i.logging\n          ), !1;\n        case \"warn\":\n          this._logger.warn(\n            `Validation success for event '${t}' with warnings: \n${g}`,\n            i.logging\n          );\n          break;\n        default:\n          this._logger.info(`Validation success for event '${t}'.`, i.logging);\n          break;\n      }\n    }\n    return this._dataLayerStore.push(a), !0;\n  }\n  /**\n   * Return the default properties for the given identifier.\n   *\n   * @param identifier The identifier to get the default properties for.\n   *\n   * @returns The found default properties for the identifier, otherwise `undefined`.\n   */\n  getDefaultProperties(t) {\n    const e = {\n      byName: [],\n      byArray: [],\n      byRegex: []\n    };\n    this._defaultProperties.forEach((i) => {\n      if (i.identifier === t)\n        return e.byName.push(i.data);\n      if (Array.isArray(i.identifier) && i.identifier.includes(t))\n        return e.byArray.push(i.data);\n      if (i.identifier instanceof RegExp && i.identifier.test(t))\n        return e.byRegex.push(i.data);\n    });\n    const s = [...e.byRegex, ...e.byArray, ...e.byName];\n    if (s.length)\n      return u(...s);\n  }\n  /**\n   * Set default properties, which will later be merged with the payload of a {@link push}, when the provided identifier\n   * matches the `eventName`.\n   *\n   * @param identifier The identifier to use the default properties for.\n   * @param data The default properties which will be used with the provided identifier to merge those properties with the payload.\n   */\n  setDefaultProperties(t, e) {\n    const s = this._defaultProperties.find((i) => i.identifier === t);\n    if (s) {\n      s.data = u(s.data, e);\n      return;\n    }\n    this._defaultProperties.push({\n      identifier: t,\n      data: e\n    });\n  }\n  /**\n   * Checks if the web properties feature ({@link getWebProperties}) is already handled or does the setup with the\n   * current settings.\n   *\n   * @private\n   */\n  _handleDefaultWebProperties() {\n    if (this._webPropertiesHandled || !this._settings.webProperties.enabled)\n      return;\n    const t = Z(\n      this._settings.webProperties,\n      this._webPayloadFactory\n    );\n    this.setDefaultProperties(this._settings.webProperties.eventNamePattern, t), this._webPropertiesHandled = !0;\n  }\n}\nclass oe extends ie {\n  /**\n   * Create an instance of the GlobalDataLayer library.\n   *\n   * @param options All options are merged with the {@link DEFAULT_SETTINGS} of type {@link TSettings}.\n   * @param [dataStore] The array where all the pushes are added to. The default tries to get or generate the\n   *   `window.pagData` array. If this is not possible, it creates an empty array, that is exposed via\n   *   {@link DataLayerStore}.\n   * @param [className] The class name of the library is here, because code can be uglified and/or minified later.\n   *\n   * @protected\n   */\n  constructor(e, s, i = \"GlobalDataLayer\") {\n    super(e, s, i);\n    o(this, \"_eventNamePayloadFactory\");\n    o(this, \"_webPayloadFactory\");\n    this._eventNamePayloadFactory = new U(), this._webPayloadFactory = new q(), this.setup();\n  }\n  setup() {\n    super.setup();\n  }\n}\nexport {\n  y as CleanExecutionPlace,\n  w as DEFAULT_SETTINGS,\n  L as DataLayerExtension,\n  U as EventNameFactory,\n  H as FrameTicker,\n  oe as GlobalDataLayer,\n  ie as GlobalDataLayerBaseClass,\n  b as Logger,\n  ae as PageNameExtenderExtension,\n  $ as ViewportTrackerExtension,\n  se as ViewportTrackerStatusChangeEvent,\n  q as WebPropertiesFactory,\n  P as clean,\n  G as cleanByDataLayerPaths,\n  _ as each,\n  S as eachFirstLevel,\n  k as executeEachFunction,\n  B as get,\n  C as getDataLayerPaths,\n  Z as getWebProperties,\n  m as isEmpty,\n  ne as isEmptyDataLayer,\n  u as merge,\n  te as validate\n};\n","import { GlobalDataLayer } from '@porsche/globaldatalayer';\nimport { TContextEnvironment, TDataLayer } from '@porsche/globaldatalayer-events/projects/pcom/all/types';\nimport { Environment, Environments } from '../../entities/environment';\nimport { splitLocale } from '../../entities/locale';\nimport { DATA_LAYER_APPLICATION_NAME, DATA_LAYER_APP_ID, EventAction } from '../../utility/constants';\nimport { isString } from '../../utility/helper';\n\nfunction getEnvironmentAbbreviation(env: Environment): TContextEnvironment {\n  switch (env) {\n    case Environments.PRODUCTION:\n      return 'P';\n    case Environments.PREVIEW:\n      return 'PP';\n    default:\n      return 'K';\n  }\n}\n\nclass GlobalDataLayerService {\n  homeNavEventId = /^PAGHomeNav_/;\n  gdl!: GlobalDataLayer<TDataLayer>;\n\n  constructor() {\n    this.initialise();\n  }\n\n  initialise() {\n    this.gdl = new GlobalDataLayer();\n  }\n\n  pushDataLayerEvent(eventAction: EventAction, eventData?: TDataLayer): void {\n    if (eventData) {\n      this.gdl.push(eventAction, eventData);\n    } else {\n      this.gdl.push(eventAction);\n    }\n  }\n\n  setEnvironment(env: Environment) {\n    this.gdl.setDefaultProperties(this.homeNavEventId, {\n      context: { environment: getEnvironmentAbbreviation(env) }\n    });\n  }\n\n  setPageName(pageName?: string) {\n    this.gdl.setDefaultProperties(this.homeNavEventId, {\n      pageExperience: {\n        pageName: pageName\n      }\n    });\n  }\n\n  setUser(userId: string, loginStatus: boolean) {\n    this.gdl.setDefaultProperties(this.homeNavEventId, {\n      ids: { userId },\n      visitor: { loginStatus }\n    });\n  }\n\n  setLocale(locale: string) {\n    try {\n      const { country, language } = splitLocale(locale);\n\n      this.gdl.setDefaultProperties(this.homeNavEventId, {\n        context: { country: country, language: language }\n      });\n    } catch (err) {\n      // throw the error away\n    }\n  }\n\n  setDefaultProperties(locale: string, pageName?: string): void {\n    let defaultGDLProperties: TDataLayer = {\n      context: { applicationId: DATA_LAYER_APP_ID },\n      visitor: { loginStatus: false }\n    };\n\n    try {\n      const { country, language } = splitLocale(locale);\n\n      defaultGDLProperties = {\n        ...defaultGDLProperties,\n        context: { ...defaultGDLProperties.context, country, language, applicationName: DATA_LAYER_APPLICATION_NAME }\n      };\n    } catch (err) {\n      // throw the error away\n    }\n\n    if (isString(pageName)) {\n      defaultGDLProperties = { ...defaultGDLProperties, pageExperience: { pageName: pageName } };\n    }\n\n    this.gdl.setDefaultProperties(this.homeNavEventId, defaultGDLProperties);\n  }\n}\n\nexport default new GlobalDataLayerService();\n"],"mappings":"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"}