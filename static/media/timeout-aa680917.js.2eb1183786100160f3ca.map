{"version":3,"names":["Timeout","delay","this","timer","prototype","set","cb","_this","cancel","setTimeout","__awaiter","_a","sent","clearTimeout","unref"],"sources":["src/utility/timeout.ts"],"sourcesContent":["export class Timeout {\n  private timer: NodeJS.Timeout | null = null;\n\n  constructor(private delay: number) {}\n\n  set<T>(cb: () => Promise<T>): void {\n    this.cancel();\n\n    this.timer = setTimeout(async () => {\n      await cb();\n      this.cancel();\n    }, this.delay);\n  }\n\n  cancel(): void {\n    if (this.timer !== null) {\n      clearTimeout(this.timer);\n\n      if (typeof this.timer.unref === 'function') {\n        this.timer.unref();\n      }\n\n      this.timer = null;\n    }\n  }\n}\n"],"mappings":"q+CAGE,SAAAA,EAAoBC,GAAAC,KAAAD,QAFZC,KAAAC,MAA+B,I,CAIvCH,EAAAI,UAAAC,IAAA,SAAOC,GAAP,IAAAC,EAAAL,KACEA,KAAKM,SAELN,KAAKC,MAAQM,YAAW,kBAAAC,UAAAH,OAAA,qB,4DACtB,SAAMD,K,OAANK,EAAAC,OACAV,KAAKM,S,mBACJN,KAAKD,M,EAGVD,EAAAI,UAAAI,OAAA,WACE,GAAIN,KAAKC,QAAU,KAAM,CACvBU,aAAaX,KAAKC,OAElB,UAAWD,KAAKC,MAAMW,QAAU,WAAY,CAC1CZ,KAAKC,MAAMW,O,CAGbZ,KAAKC,MAAQ,I"}