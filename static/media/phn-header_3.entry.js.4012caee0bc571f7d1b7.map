{"version":3,"names":["getRandomValues","rnds8","Uint8Array","rng","crypto","bind","Error","byteToHex","i","push","toString","slice","unsafeStringify","arr","offset","randomUUID","native","v4","options","buf","rnds","random","getUserInformation","accessToken","locale","config","getConfig","navStateStore","state","env","init","method","headers","uuidv4","Authorization","concat","Accept","Env","fetch","getString","BFF_ENDPOINT","response","_b","sent","errorMessage","JSON","stringify","err_1","message","NaviError","NaviErrorTypes","GENERAL","status","UNAUTHORIZED","ok","statusText","json","getUserNameFromUserData","userData","firstName","lastName","isString","initializeUserData","loggedInState","LOGGED_OUT_USER_STATUS","bffData","undefined","NO_RESULTS","finderStateStore","savedSearchesCount","savedSearches","savedVehiclesCount","savedVehicles","unreadMessagesCount","unreadMessages","LOGGED_IN_USER_NO_NAME_STATUS","userId","err_2","type","DEFAULT_UNREAD_MESSAGES_COUNT","globalDataLayerService","setUser","IsLoggedIn","initAuthIframe","queryString","getQueryString","domain","IDENTITY_PROVIDER_URL","clientId","IDENTITY_CLIENT_ID","redirect_uri","LOGIN_REDIRECT_URL","audience","IDENTITY_AUDIENCE","scope","IDENTITY_USER_SCOPES","windowService","removeElement","IFRAME_ID","createIframe","headerCss","Header","this","eventPreventedTimeout","Timeout","checkedMarketingConsent","loadedToggles","DEFAULT_LOCALE","NavigationTheme","light","NavigationMode","navbar","Application","default","getBreakpoint","class_1","prototype","localeWatchHandler","initNavContentStore","setLocale","logger","breakpoint","pageNameWatchHandler","setPageName","pageName","newEnvReceived","initEnvironment","appWatcher","newValue","app","sanitizeApp","breakpointWatcher","watchShopVariable","information","_","propName","shopInformation","parse","shopStateStore","set","initialRoutingPathWatcher","handleInitialRoutingKeyPath","resizeHandler","newAuthMessageReceived","event","URL","origin","data","token","error","err_3","handleLogin","phnLogin","emit","__awaiter","_this","defaultPrevented","loginLink","_a","navContentStore","myPorsche","link","redirectToUrl","handleLogout","phnLogout","handleUserCentricsReady","checkMarketingConsent","handleUserCentricsInitalization","navigationLoadedHandler","navigationLoaded","detail","navigationDidLoad","userConsent","maybeCheckMarketingConsent","getEnvironment","setEnvironment","featureToggles","setFeatures","loadsShopPropsOnStore","abTestingService","previouslyReceivedContent","receivedContent","loadingContent","fetchedLocale","fetchedEnv","contentService.fetchContent","contentForLocale","Object","assign","err_4","setDealerSearchResultsStore","dealerSearchResultsStore","savedDealerCookie","ppnDealers","id","coordinates","latitude","longitude","country","splitLocale","dealerId","showDealerSearchDropdown","getPPNDealerByRegion","_c","_d","getPPNDealer","DEALER_API_URL","ppnDealer","err_5","initialRoutingPath","split","topLevelRoutingKey","segments","rootContentItem","getRootMenuItem","validSegments","getValidContentPathSegments","routingKeyHistory","buildRoutingKeyHistoryFromContentPath","__spreadArray","routerStore","initialRoutingKeyHistory","initialRoutingKeyPointer","length","componentWillLoad","setDefaultProperties","window","ncs","then","Promise","all","loadContentGeneratorExperiments","componentDidLoad","version","VERSION","pushDataLayerEvent","EventActions","GENERAL_LOAD","info","disconnectedCallback","cancel","hasLimitedWidth","mode","hero","limitedWidth","render","h","class","theme","displayLogoOnly","isShopAvailable","slot","name","level0Css","Level0","operationPipeline","logoLoaded","drawerTimeout","RoutingKeyPointers","LEVEL_ZERO","class_2","loadingContentWatcher","setNavigationLoaded","newBreakpoint","oldBreakpoint","updateRoutingKeyPointerOfMobileLevel1","handleResizeAnimation","didDrawerModeChange","isDesktop","routing.isOpened","animationManager","play","AnimationSequences","OPEN_DOUBLE_DRAWER","receivedContentWatcher","logoLoadedHandler","scrollHandler","scrolledPastHeader","el","getBoundingClientRect","bottom","handleKeyDown","e","key","routing.isClosed","usingKeyboard","handleClickDrawerHeaderClose","handleClick","IsKeyboardClick","handleMobileMenuItemClick","newRoutingKeys","routingKeyPointer","handleSideDrawerItemClick","routingKeys","updateRouterStore","handleClickDrawerHeaderBack","isPlayingDoubleDrawerAnimation","CLOSE_DOUBLE_DRAWER","handleDrawerClosed","routing.reset","handleBackdropClosed","showBackdrop","handleDrawerChanged","isNavigatingBackwards","activeRoutingKey","findTopLevelRoutingKey","RoutingKeys","DEALER_SEARCH","getLastRoutingSegment","savedDealer","handleOpenDrawer","openDrawer","focusOnElement","querySelector","LEVEL_ONE","LEVEL_TWO","isNavigationLoaded","setInitialRoutingProperties","initialRoutingKey","setRoutingProperties","MODELS","routingKeyWithClick","isKeyboardClick","isLoading","componentsOnReady","isDefaultRouteOnMobile","initialRoutingKeys","MAIN_MENU","componentDidRender","promises","_i","operation","maybePromise","isPromise","splice","getLogoSize","m","Host","constructThemeClass","routing.isOpening","style","display","size","xs","initialUsingKeyboard","wrapperCss","Wrapper","redirected","setProperty","getScrollbarWidth","loadRootElement","initialize","countryRecommenderContent","countryRecommender","showCountryRecommender","countryRecommenderClosed","accessibilityStatement","Environments","PREVIEW","content","role","onBannerClosed","href","text","onBlur","getHTMLElement","currentTarget","removeAttribute"],"sources":["node_modules/uuid/dist/esm-browser/rng.js","node_modules/uuid/dist/esm-browser/stringify.js","node_modules/uuid/dist/esm-browser/native.js","node_modules/uuid/dist/esm-browser/v4.js","src/services/user-information-service.ts","src/services/user-service.ts","src/components/header/header.scss?tag=phn-header&encapsulation=shadow","src/components/header/header.tsx","src/components/level-0/level-0.scss?tag=phn-level-0&encapsulation=scoped","src/components/level-0/level-0.tsx","src/components/wrapper/wrapper.scss?tag=phn-wrapper&encapsulation=scoped","src/components/wrapper/wrapper.tsx"],"sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { UserInformation } from '../entities/user-information';\nimport { navStateStore } from '../state/nav-state-store';\nimport { getConfig, getString } from '../utility/helper';\nimport { NaviError, NaviErrorTypes } from '../utility/navi-error';\n\nimport { v4 as uuidv4 } from 'uuid';\n\nexport async function getUserInformation(accessToken: string, locale: string): Promise<UserInformation> {\n  const config = getConfig(navStateStore.state.env);\n  const init = {\n    method: 'GET',\n    headers: {\n      'X-Trace-Id': uuidv4(),\n      Authorization: `${accessToken}`,\n      Accept: 'application/json',\n      Env: navStateStore.state.env\n    }\n  };\n\n  let response: Response;\n\n  try {\n    response = await fetch(getString(`${config?.BFF_ENDPOINT}/user-information?locale=${locale}`), init);\n  } catch (err) {\n    const errorMessage = `Get User information request failed in Frontend with error: ${JSON.stringify(\n      (err as Error).message\n    )}`;\n    throw new NaviError(errorMessage, NaviErrorTypes.GENERAL);\n  }\n  if (response.status === 401) {\n    throw new NaviError('AccessToken has expired', NaviErrorTypes.UNAUTHORIZED);\n  }\n\n  if (!response.ok) {\n    const errorMessage = `Get User information request failed in Frontend with error: ${response.status} ${response.statusText}`;\n    throw new NaviError(errorMessage, NaviErrorTypes.GENERAL);\n  }\n\n  return await response.json();\n}\n","import { Config } from '../entities/config';\nimport { navStateStore } from '../state/nav-state-store';\nimport {\n  DEFAULT_UNREAD_MESSAGES_COUNT,\n  IFRAME_ID,\n  LOGGED_IN_USER_NO_NAME_STATUS,\n  LOGGED_OUT_USER_STATUS\n} from '../utility/constants';\nimport { getQueryString, getString, IsLoggedIn, isString } from '../utility/helper';\nimport { NaviError, NaviErrorTypes } from '../utility/navi-error';\nimport globalDataLayerService from './analytics/global-data-layer-service';\nimport windowService from './window-service';\nimport { getUserInformation } from './user-information-service';\nimport { finderStateStore } from '../state/finder-state-store';\nimport { UserData } from '../entities/user-information';\n\nexport function getUserNameFromUserData(userData: UserData): string {\n  let status = '';\n\n  const firstName = getString(userData.firstName);\n  const lastName = getString(userData.lastName);\n\n  if (isString(firstName)) {\n    status = firstName;\n\n    if (isString(lastName)) {\n      status += ` ${lastName}`;\n    }\n  } else {\n    if (isString(lastName)) {\n      status = lastName;\n    }\n  }\n  return status;\n}\n\nexport async function initializeUserData(accessToken: string, locale: string): Promise<void> {\n  let loggedInState = LOGGED_OUT_USER_STATUS;\n  let userId: string;\n\n  try {\n    const bffData = await getUserInformation(accessToken, locale);\n\n    if (bffData === undefined || bffData === null) {\n      throw new NaviError(`Invalid user data object extracted from user profile response`, NaviErrorTypes.NO_RESULTS);\n    }\n\n    finderStateStore.state.savedSearchesCount = bffData.savedSearches;\n    finderStateStore.state.savedVehiclesCount = bffData.savedVehicles;\n    navStateStore.state.unreadMessagesCount = bffData.unreadMessages;\n    const userData = bffData.userData;\n\n    loggedInState = getUserNameFromUserData(userData) || LOGGED_IN_USER_NO_NAME_STATUS;\n    userId = bffData.userData.userId || '';\n  } catch (err) {\n    if (!(err instanceof NaviError) || err.type !== NaviErrorTypes.UNAUTHORIZED) {\n      loggedInState = LOGGED_IN_USER_NO_NAME_STATUS;\n    }\n\n    navStateStore.state.unreadMessagesCount = DEFAULT_UNREAD_MESSAGES_COUNT;\n    navStateStore.state.loggedInState = loggedInState;\n    throw err;\n  }\n\n  navStateStore.state.loggedInState = loggedInState;\n  globalDataLayerService.setUser(userId, IsLoggedIn(loggedInState));\n}\n\nexport function initAuthIframe(config: Config): void {\n  const queryString = getQueryString({\n    domain: config.IDENTITY_PROVIDER_URL,\n    clientId: config.IDENTITY_CLIENT_ID,\n    redirect_uri: config.LOGIN_REDIRECT_URL,\n    audience: config.IDENTITY_AUDIENCE,\n    scope: config.IDENTITY_USER_SCOPES\n  });\n\n  windowService.removeElement(IFRAME_ID);\n  windowService.createIframe(IFRAME_ID, `${config.LOGIN_REDIRECT_URL}?${queryString}`);\n}\n","@import '../../scss';\n\n:host {\n  display: block;\n  position: relative;\n  visibility: visible;\n  height: auto !important; // this is here to override the styles from app.scss\n  z-index: $phn-z-index-header;\n\n  .header {\n    min-height: $phn-header-height-base;\n\n    @include pds-media-query-min('xs') {\n      min-height: $phn-header-height-xs;\n    }\n\n    @include pds-media-query-min('s') {\n      min-height: $phn-header-height-s;\n    }\n\n    @include pds-media-query-min('m') {\n      min-height: $phn-header-height-m;\n    }\n\n    @include pds-media-query-min('l') {\n      min-height: $phn-header-height-l;\n    }\n  }\n\n  .limited-width {\n    @include pds-media-query-min('xxl') {\n      max-width: p-px-to-rem(2560px);\n      margin: 0 auto;\n    }\n  }\n\n}\n","import { Component, Event, EventEmitter, h, Listen, Prop, State, Watch } from '@stencil/core';\nimport { TMenu } from '../../components';\nimport { Message } from '../../entities/auth';\nimport { Content } from '../../entities/content';\nimport { getEnvironment } from '../../entities/environment';\nimport { splitLocale } from '../../entities/locale';\nimport globalDataLayerService from '../../services/analytics/global-data-layer-service';\nimport * as contentService from '../../services/content-service';\nimport { getPPNDealer, getPPNDealerByRegion } from '../../services/dealer-service';\nimport featureToggles from '../../services/feature-toggles';\nimport logger from '../../services/logger';\nimport { initAuthIframe, initializeUserData } from '../../services/user-service';\nimport windowService from '../../services/window-service';\nimport { dealerSearchResultsStore } from '../../state/dealer-search-results-store';\nimport { navContentStore } from '../../state/nav-content-store';\nimport { navStateStore } from '../../state/nav-state-store';\nimport { shopStateStore, ShopStateStoreTypes } from '../../state/shop-state-store';\nimport { routerStore } from '../../state/router-store';\nimport {\n  DEFAULT_LOCALE,\n  EventActions,\n  IFRAME_ID,\n  NavigationMode,\n  NavigationModeType,\n  NavigationTheme,\n  NavigationThemeType,\n  VERSION\n} from '../../utility/constants';\nimport {\n  buildRoutingKeyHistoryFromContentPath,\n  getConfig,\n  getRootMenuItem,\n  getValidContentPathSegments,\n  isString,\n  sanitizeApp\n} from '../../utility/helper';\nimport { isShopAvailable, loadsShopPropsOnStore } from '../../utility/helpers/shop-helper';\nimport { Timeout } from '../../utility/timeout';\nimport { ApplicationType, Application } from '../../utility/constants/app';\nimport { showDealerSearchDropdown } from '../../utility/helpers/dealer-search-helper';\nimport abTestingService from '../../services/ab-testing/ab-testing-constructor-service';\nimport { initMonitoringSystem } from '../../services/monitoring';\n\n@Component({\n  tag: 'phn-header',\n  styleUrl: 'header.scss',\n  shadow: true,\n  assetsDirs: ['auth']\n})\nexport class Header {\n  @Prop() locale = DEFAULT_LOCALE;\n  @Prop() env = '';\n  @Prop() clientId = '';\n  @Prop() pageName = '';\n  @Prop() theme: NavigationThemeType = NavigationTheme.light;\n  @Prop() mode: NavigationModeType = NavigationMode.navbar;\n  @Prop() limitedWidth = 'true';\n  @Prop() app: ApplicationType = Application.default;\n  @Prop() initialRoutingPath = '';\n  @Prop() displayLogoOnly = false;\n  @Prop() numberOfShoppingItems = 0;\n  @Prop() wishlistItemsNumber = 0;\n  @Prop() shopInformation = '{ \"wishlistItemsNumber\": 0, \"numberOfShoppingItems\": 0, \"subTotal\": \"0\" }';\n\n  @State() loadingContent = false;\n  @State() receivedContent = false;\n  @State() breakpoint = windowService.getBreakpoint();\n\n  private eventPreventedTimeout = new Timeout(0);\n  private checkedMarketingConsent = false;\n  private loadedToggles = false;\n\n  @Event({ composed: true }) navigationDidLoad!: EventEmitter<void>;\n  @Event({ composed: true, bubbles: true, cancelable: true }) phnLogout!: EventEmitter<void>;\n  @Event({ composed: true, bubbles: true, cancelable: true }) phnLogin!: EventEmitter<void>;\n\n  @Watch('locale')\n  async localeWatchHandler(): Promise<void> {\n    navStateStore.state.locale = this.locale;\n    await this.initNavContentStore();\n    globalDataLayerService.setLocale(this.locale);\n    logger.init(this.breakpoint, this.locale);\n  }\n\n  @Watch('pageName')\n  pageNameWatchHandler(): void {\n    globalDataLayerService.setPageName(this.pageName);\n  }\n\n  @Watch('env')\n  async newEnvReceived(): Promise<void> {\n    await this.initEnvironment();\n    await this.initNavContentStore();\n\n    initAuthIframe(getConfig(navStateStore.state.env));\n  }\n\n  @Watch('app')\n  async appWatcher(newValue: string): Promise<void> {\n    navStateStore.state.app = sanitizeApp(newValue);\n  }\n\n  @Watch('breakpoint')\n  breakpointWatcher(): void {\n    logger.init(this.breakpoint, this.locale);\n  }\n\n  @Watch('shopInformation')\n  watchShopVariable(information: string, _: string, propName: keyof ShopStateStoreTypes): void {\n    const shopInformation = JSON.parse(information);\n    shopStateStore.set(propName, shopInformation);\n  }\n\n  @Watch('initialRoutingPath')\n  initialRoutingPathWatcher(): void {\n    this.handleInitialRoutingKeyPath();\n  }\n\n  @Listen('resize', { target: 'window', passive: true })\n  resizeHandler(): void {\n    this.breakpoint = windowService.getBreakpoint();\n  }\n\n  @Listen('message', { target: 'window', passive: true })\n  async newAuthMessageReceived(event: Message): Promise<void> {\n    const config = getConfig(navStateStore.state.env);\n\n    if (new URL(config.LOGIN_REDIRECT_URL).origin !== new URL(event.origin).origin) {\n      return;\n    }\n\n    if (isString(event.data.token)) {\n      try {\n        windowService.removeElement(IFRAME_ID);\n        await initializeUserData(event.data.token, this.locale);\n      } catch (err) {\n        logger.error('INIT_USER_DATA', err as Error);\n      }\n    }\n  }\n\n  @Listen('loginEvent')\n  async handleLogin(): Promise<void> {\n    const phnLogin = this.phnLogin.emit();\n\n    this.eventPreventedTimeout.set(async () => {\n      if (phnLogin.defaultPrevented) {\n        return;\n      }\n\n      const loginLink = navContentStore.state.myPorsche?.link;\n      if (isString(loginLink)) {\n        windowService.redirectToUrl(loginLink);\n        return;\n      }\n    });\n  }\n\n  @Listen('logoutEvent')\n  async handleLogout(): Promise<void> {\n    const config = getConfig(navStateStore.state.env);\n\n    const phnLogout = this.phnLogout.emit();\n\n    this.eventPreventedTimeout.set(async () => {\n      if (phnLogout.defaultPrevented) {\n        return;\n      }\n\n      // TODO which logout url to use? myporsche? auth0?\n      windowService.redirectToUrl(`${config.IDENTITY_PROVIDER_URL}/v2/logout`);\n      return;\n    });\n  }\n\n  @Listen('ucReady', { target: 'window', passive: true })\n  handleUserCentricsReady(): void {\n    this.checkMarketingConsent();\n  }\n\n  @Listen('ucInit', { target: 'window', passive: true })\n  handleUserCentricsInitalization(): void {\n    this.checkMarketingConsent();\n  }\n\n  @Listen('navigationLoaded')\n  navigationLoadedHandler({ detail: navigationLoaded }: CustomEvent<boolean>): void {\n    windowService.navigationLoaded = navigationLoaded;\n\n    if (navigationLoaded) {\n      this.navigationDidLoad.emit();\n    }\n  }\n\n  private checkMarketingConsent() {\n    if (!this.checkedMarketingConsent) {\n      navStateStore.state.userConsent = false;\n      this.checkedMarketingConsent = windowService.maybeCheckMarketingConsent(() => {\n        navStateStore.state.userConsent = true;\n      });\n    }\n  }\n\n  private async initEnvironment() {\n    navStateStore.state.env = getEnvironment(this.env);\n    navStateStore.state.app = sanitizeApp(this.app);\n    navStateStore.state.locale = this.locale;\n    globalDataLayerService.setEnvironment(navStateStore.state.env);\n\n    const config = getConfig(navStateStore.state.env);\n    initAuthIframe(config);\n\n    this.loadedToggles = false;\n    await featureToggles.setFeatures(navStateStore.state.env);\n    this.loadedToggles = true;\n    initMonitoringSystem();\n\n    logger.init(this.breakpoint, this.locale);\n    const shopInformation = JSON.parse(this.shopInformation);\n\n    loadsShopPropsOnStore({\n      shopInformation: shopInformation\n    });\n\n    await abTestingService().init();\n  }\n\n  private async initNavContentStore() {\n    const previouslyReceivedContent = this.receivedContent;\n    this.receivedContent = false;\n    this.loadingContent = true;\n    try {\n      const fetchedLocale = this.locale;\n      const fetchedEnv = navStateStore.state.env;\n\n      const contentForLocale = await contentService.fetchContent(fetchedLocale, this.app);\n\n      // This is to make sure that the response is valid for the current locale and environment\n      // and wasn't made with another locale or enironment\n      if (this.locale === fetchedLocale && navStateStore.state.env === fetchedEnv) {\n        Object.assign(navContentStore.state, contentForLocale);\n        this.receivedContent = true;\n      }\n    } catch (err) {\n      logger.error('FETCH_CONTENT', err as Error);\n\n      if (previouslyReceivedContent) {\n        this.receivedContent = true;\n      }\n    }\n\n    this.loadingContent = false;\n  }\n\n  private async setDealerSearchResultsStore(): Promise<void> {\n    const { savedDealerCookie, ppnDealers } = dealerSearchResultsStore.state;\n\n    if (savedDealerCookie === null || ppnDealers[savedDealerCookie.id] !== undefined) {\n      return;\n    }\n\n    const coordinates = { latitude: savedDealerCookie.latitude, longitude: savedDealerCookie.longitude };\n    const { env } = navStateStore.state;\n\n    try {\n      const { country } = splitLocale(this.locale);\n      const { id: dealerId } = savedDealerCookie;\n\n      const ppnDealer = showDealerSearchDropdown(country)\n        ? await getPPNDealerByRegion(dealerId, country)\n        : await getPPNDealer(env, getConfig(env).DEALER_API_URL, dealerId, coordinates, country);\n\n      dealerSearchResultsStore.state.ppnDealers[savedDealerCookie.id] = ppnDealer;\n    } catch (err) {\n      logger.error('GET_DEALER', err as Error);\n      dealerSearchResultsStore.state.savedDealerCookie = null;\n    }\n  }\n\n  private handleInitialRoutingKeyPath(): void {\n    const [topLevelRoutingKey, ...segments] = this.initialRoutingPath.split('>');\n    const rootContentItem: TMenu | null = getRootMenuItem(navContentStore.state, topLevelRoutingKey as keyof Content);\n\n    if (rootContentItem === null) {\n      return;\n    }\n\n    const validSegments = getValidContentPathSegments(rootContentItem, segments);\n    const routingKeyHistory = buildRoutingKeyHistoryFromContentPath([topLevelRoutingKey, ...validSegments]);\n\n    routerStore.state.initialRoutingKeyHistory = routingKeyHistory;\n    routerStore.state.initialRoutingKeyPointer = routingKeyHistory.length - 1;\n  }\n\n  componentWillLoad(): void {\n    globalDataLayerService.setDefaultProperties(this.locale, this.pageName);\n    (window as any).ncs = navContentStore;\n\n    this.checkMarketingConsent();\n\n    this.initEnvironment()\n      .then(() => Promise.all([this.initNavContentStore(), this.setDealerSearchResultsStore()]))\n      .then(() => Promise.all([abTestingService().loadContentGeneratorExperiments()]))\n      .then(() => {\n        this.handleInitialRoutingKeyPath();\n      });\n  }\n\n  async componentDidLoad(): Promise<void> {\n    windowService.version = VERSION;\n    globalDataLayerService.pushDataLayerEvent(EventActions.GENERAL_LOAD);\n    logger.info('NAVIGATION_LOAD');\n  }\n\n  disconnectedCallback(): void {\n    this.eventPreventedTimeout.cancel();\n  }\n\n  private hasLimitedWidth(): boolean {\n    return this.mode === NavigationMode.hero && this.limitedWidth === 'true' ? true : false;\n  }\n\n  render(): HTMLPhnHeaderElement {\n    if (!this.loadedToggles) {\n      return <div></div>;\n    }\n\n    return (\n      // div needed because conditional styling does not work on Host of shadow component for some unknown reason\n      <div class={this.hasLimitedWidth() ? 'header limited-width' : 'header'}>\n        <phn-wrapper\n          theme={this.theme}\n          mode={this.mode}\n          locale={this.locale}\n          loadingContent={this.loadingContent}\n          receivedContent={this.receivedContent}\n          breakpoint={this.breakpoint}\n          app={sanitizeApp(this.app)}\n          displayLogoOnly={this.displayLogoOnly}\n          limitedWidth={this.hasLimitedWidth()}\n        >\n          {isShopAvailable(this.locale, sanitizeApp(this.app)) ? (\n            <div slot=\"contextual_drawer_header\">\n              <slot name=\"contextual_drawer_header\"></slot>\n            </div>\n          ) : null}\n        </phn-wrapper>\n      </div>\n    );\n  }\n}\n","@import '../../scss';\n\n:host {\n  display: block;\n  @include apply-themes();\n\n  header.limited-width {\n    @include pds-media-query-min('xxl') {\n      padding: 0 calc(50vw - 5120px/2);\n    }\n  }\n\n  header {\n    @include pds-grid;\n\n    font-family: $pds-font-family;\n    font-weight: $pds-font-weight-regular;\n    color: $pds-theme-light-background-base;\n    height: $phn-header-height-base;\n\n    @include pds-media-query-min('xs') {\n      height: $phn-header-height-xs;\n    }\n\n    @include pds-media-query-min('s') {\n      height: $phn-header-height-s;\n    }\n\n    @include pds-media-query-min('m') {\n      height: $phn-header-height-m;\n    }\n\n    @include pds-media-query-min('l') {\n      height: $phn-header-height-l;\n      flex-direction: row;\n    }\n\n    .level-0-content {\n      height: 100%;\n      display: flex;\n      align-items: center;\n      position: relative;\n      grid-column: wide-start/wide-end;\n\n      .level-0-content-logo {\n        display: flex;\n        align-items: center;\n      }\n\n      .level-0-content-icons {\n        position: absolute;\n        width: 100%;\n      }\n\n      phn-burger-button,\n      phn-level-0-icons,\n      phn-logo,\n      .skeleton-container {\n        flex: 1;\n        display: flex;\n      }\n\n      .skeleton-container.crest-skeleton {\n        justify-content: center;\n      }\n\n      phn-logo {\n        justify-content: center;\n        z-index: $phn-z-index-logo-mobile;\n        @include bugfix__iOS-transition-zindex-using-transform();\n\n        @include pds-media-query-min('l') {\n          z-index: $phn-z-index-logo-mobile;\n        }\n      }\n\n      .burger-button-skeleton {\n        width: p-px-to-rem(24px);\n        height: p-px-to-rem(24px);\n        border-radius: p-px-to-rem(4px);\n        background: $pds-theme-light-contrast-low;\n\n        @include pds-media-query-min('xs') {\n          width: p-px-to-rem(76px);\n          height: p-px-to-rem(24px);\n        }\n      }\n\n      .label-bone {\n        width: p-px-to-rem(124px);\n        height: p-px-to-rem(24px);\n        border-radius: p-px-to-rem(4px);\n        background-color: $pds-theme-light-contrast-low;\n\n        @include pds-media-query-min('s') {\n          width: p-px-to-rem(288px);\n        }\n      }\n\n      .crest-bone {\n        width: p-px-to-rem(22.45px);\n        height: p-px-to-rem(29px);\n        background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='22.45px' height='29px' viewBox='0 0 29 37' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3Ecrest-path-pixel-perfect-3%3C/title%3E%3Cg id='Design-Focus' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='832-skeleton-hn-1366' transform='translate(-130.000000, -39.000000)' fill='%23E3E4E5' fill-rule='nonzero'%3E%3Cg id='Crest-bones' transform='translate(78.000000, 0.000000)'%3E%3Cpath d='M80.8612951,41.6891698 C79.3593022,41.0929534 77.8195513,40.5958533 76.2520235,40.2010916 C74.092052,39.6781633 71.8946453,39.3227949 69.6795438,39.1381787 C68.6125828,39.0425165 67.6096394,39.0106291 66.4786608,39 L66.4679912,39 C65.4010302,39 64.3340692,39 63.2671082,39.1381787 C61.0520067,39.3227949 58.8545999,39.6781633 56.6946284,40.2010916 C55.1285058,40.5930516 53.5918758,41.093847 52.0960265,41.6997989 L52,41.6997989 C52,41.6997989 52.1813834,52.8710141 52.3200883,58.3981614 C52.3624958,60.0288438 52.6613178,61.6428163 53.2056659,63.1812698 C53.83596,64.927843 54.6779771,66.5912102 55.7130243,68.1344441 C56.7974563,69.7321996 58.1093136,71.164397 59.6074319,72.3860959 C60.1877267,72.8817079 60.8047619,73.3329574 61.4532745,73.7359954 C62.4748439,74.3534515 63.5453697,74.8866836 64.6541575,75.3303648 C65.0062546,75.4791727 65.3263429,75.6279805 65.6144224,75.7236426 C65.9077386,75.8428333 66.2112826,75.9353298 66.5213392,76 C66.8313958,75.9353298 67.1349399,75.8428333 67.4282561,75.7236426 C67.7163355,75.6279805 68.0364238,75.4791727 68.3991906,75.3303648 C69.4899033,74.8845355 70.542531,74.3513317 71.5467255,73.7359954 C72.1928274,73.3294237 72.8096114,72.8783579 73.3925681,72.3860959 C74.8933275,71.167176 76.2055628,69.7345659 77.2869757,68.1344441 C78.3220229,66.5912102 79.16404,64.927843 79.7943341,63.1812698 C80.3386822,61.6428163 80.6375042,60.0288438 80.6799117,58.3981614 C80.8186166,52.8710141 81,41.6997989 81,41.6997989 L80.8612951,41.6891698 Z' id='crest-path-pixel-perfect-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n        background-repeat: no-repeat;\n        background-position: center;\n\n        @include pds-media-query-min('xs') {\n          width: p-px-to-rem(27px);\n          height: p-px-to-rem(36px);\n          background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='27px' height='36px' viewBox='0 0 29 37' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3Ecrest-path-pixel-perfect-3%3C/title%3E%3Cg id='Design-Focus' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='832-skeleton-hn-1366' transform='translate(-130.000000, -39.000000)' fill='%23E3E4E5' fill-rule='nonzero'%3E%3Cg id='Crest-bones' transform='translate(78.000000, 0.000000)'%3E%3Cpath d='M80.8612951,41.6891698 C79.3593022,41.0929534 77.8195513,40.5958533 76.2520235,40.2010916 C74.092052,39.6781633 71.8946453,39.3227949 69.6795438,39.1381787 C68.6125828,39.0425165 67.6096394,39.0106291 66.4786608,39 L66.4679912,39 C65.4010302,39 64.3340692,39 63.2671082,39.1381787 C61.0520067,39.3227949 58.8545999,39.6781633 56.6946284,40.2010916 C55.1285058,40.5930516 53.5918758,41.093847 52.0960265,41.6997989 L52,41.6997989 C52,41.6997989 52.1813834,52.8710141 52.3200883,58.3981614 C52.3624958,60.0288438 52.6613178,61.6428163 53.2056659,63.1812698 C53.83596,64.927843 54.6779771,66.5912102 55.7130243,68.1344441 C56.7974563,69.7321996 58.1093136,71.164397 59.6074319,72.3860959 C60.1877267,72.8817079 60.8047619,73.3329574 61.4532745,73.7359954 C62.4748439,74.3534515 63.5453697,74.8866836 64.6541575,75.3303648 C65.0062546,75.4791727 65.3263429,75.6279805 65.6144224,75.7236426 C65.9077386,75.8428333 66.2112826,75.9353298 66.5213392,76 C66.8313958,75.9353298 67.1349399,75.8428333 67.4282561,75.7236426 C67.7163355,75.6279805 68.0364238,75.4791727 68.3991906,75.3303648 C69.4899033,74.8845355 70.542531,74.3513317 71.5467255,73.7359954 C72.1928274,73.3294237 72.8096114,72.8783579 73.3925681,72.3860959 C74.8933275,71.167176 76.2055628,69.7345659 77.2869757,68.1344441 C78.3220229,66.5912102 79.16404,64.927843 79.7943341,63.1812698 C80.3386822,61.6428163 80.6375042,60.0288438 80.6799117,58.3981614 C80.8186166,52.8710141 81,41.6997989 81,41.6997989 L80.8612951,41.6891698 Z' id='crest-path-pixel-perfect-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n        }\n\n        @include pds-media-query-min('s') {\n          width: p-px-to-rem(28px);\n          height: p-px-to-rem(36px);\n          background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='28px' height='36px' viewBox='0 0 29 37' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3Ecrest-path-pixel-perfect-3%3C/title%3E%3Cg id='Design-Focus' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='832-skeleton-hn-1366' transform='translate(-130.000000, -39.000000)' fill='%23E3E4E5' fill-rule='nonzero'%3E%3Cg id='Crest-bones' transform='translate(78.000000, 0.000000)'%3E%3Cpath d='M80.8612951,41.6891698 C79.3593022,41.0929534 77.8195513,40.5958533 76.2520235,40.2010916 C74.092052,39.6781633 71.8946453,39.3227949 69.6795438,39.1381787 C68.6125828,39.0425165 67.6096394,39.0106291 66.4786608,39 L66.4679912,39 C65.4010302,39 64.3340692,39 63.2671082,39.1381787 C61.0520067,39.3227949 58.8545999,39.6781633 56.6946284,40.2010916 C55.1285058,40.5930516 53.5918758,41.093847 52.0960265,41.6997989 L52,41.6997989 C52,41.6997989 52.1813834,52.8710141 52.3200883,58.3981614 C52.3624958,60.0288438 52.6613178,61.6428163 53.2056659,63.1812698 C53.83596,64.927843 54.6779771,66.5912102 55.7130243,68.1344441 C56.7974563,69.7321996 58.1093136,71.164397 59.6074319,72.3860959 C60.1877267,72.8817079 60.8047619,73.3329574 61.4532745,73.7359954 C62.4748439,74.3534515 63.5453697,74.8866836 64.6541575,75.3303648 C65.0062546,75.4791727 65.3263429,75.6279805 65.6144224,75.7236426 C65.9077386,75.8428333 66.2112826,75.9353298 66.5213392,76 C66.8313958,75.9353298 67.1349399,75.8428333 67.4282561,75.7236426 C67.7163355,75.6279805 68.0364238,75.4791727 68.3991906,75.3303648 C69.4899033,74.8845355 70.542531,74.3513317 71.5467255,73.7359954 C72.1928274,73.3294237 72.8096114,72.8783579 73.3925681,72.3860959 C74.8933275,71.167176 76.2055628,69.7345659 77.2869757,68.1344441 C78.3220229,66.5912102 79.16404,64.927843 79.7943341,63.1812698 C80.3386822,61.6428163 80.6375042,60.0288438 80.6799117,58.3981614 C80.8186166,52.8710141 81,41.6997989 81,41.6997989 L80.8612951,41.6891698 Z' id='crest-path-pixel-perfect-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n        }\n\n        @include pds-media-query-min('m') {\n          width: p-px-to-rem(31px);\n          height: p-px-to-rem(41px);\n          background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='31px' height='41px' viewBox='0 0 29 37' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3Ecrest-path-pixel-perfect-3%3C/title%3E%3Cg id='Design-Focus' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='832-skeleton-hn-1366' transform='translate(-130.000000, -39.000000)' fill='%23E3E4E5' fill-rule='nonzero'%3E%3Cg id='Crest-bones' transform='translate(78.000000, 0.000000)'%3E%3Cpath d='M80.8612951,41.6891698 C79.3593022,41.0929534 77.8195513,40.5958533 76.2520235,40.2010916 C74.092052,39.6781633 71.8946453,39.3227949 69.6795438,39.1381787 C68.6125828,39.0425165 67.6096394,39.0106291 66.4786608,39 L66.4679912,39 C65.4010302,39 64.3340692,39 63.2671082,39.1381787 C61.0520067,39.3227949 58.8545999,39.6781633 56.6946284,40.2010916 C55.1285058,40.5930516 53.5918758,41.093847 52.0960265,41.6997989 L52,41.6997989 C52,41.6997989 52.1813834,52.8710141 52.3200883,58.3981614 C52.3624958,60.0288438 52.6613178,61.6428163 53.2056659,63.1812698 C53.83596,64.927843 54.6779771,66.5912102 55.7130243,68.1344441 C56.7974563,69.7321996 58.1093136,71.164397 59.6074319,72.3860959 C60.1877267,72.8817079 60.8047619,73.3329574 61.4532745,73.7359954 C62.4748439,74.3534515 63.5453697,74.8866836 64.6541575,75.3303648 C65.0062546,75.4791727 65.3263429,75.6279805 65.6144224,75.7236426 C65.9077386,75.8428333 66.2112826,75.9353298 66.5213392,76 C66.8313958,75.9353298 67.1349399,75.8428333 67.4282561,75.7236426 C67.7163355,75.6279805 68.0364238,75.4791727 68.3991906,75.3303648 C69.4899033,74.8845355 70.542531,74.3513317 71.5467255,73.7359954 C72.1928274,73.3294237 72.8096114,72.8783579 73.3925681,72.3860959 C74.8933275,71.167176 76.2055628,69.7345659 77.2869757,68.1344441 C78.3220229,66.5912102 79.16404,64.927843 79.7943341,63.1812698 C80.3386822,61.6428163 80.6375042,60.0288438 80.6799117,58.3981614 C80.8186166,52.8710141 81,41.6997989 81,41.6997989 L80.8612951,41.6891698 Z' id='crest-path-pixel-perfect-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n        }\n\n        @include pds-media-query-min('l') {\n          width: p-px-to-rem(32px);\n          height: p-px-to-rem(43px);\n          background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='32px' height='43px' viewBox='0 0 29 37' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3Ecrest-path-pixel-perfect-3%3C/title%3E%3Cg id='Design-Focus' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='832-skeleton-hn-1366' transform='translate(-130.000000, -39.000000)' fill='%23E3E4E5' fill-rule='nonzero'%3E%3Cg id='Crest-bones' transform='translate(78.000000, 0.000000)'%3E%3Cpath d='M80.8612951,41.6891698 C79.3593022,41.0929534 77.8195513,40.5958533 76.2520235,40.2010916 C74.092052,39.6781633 71.8946453,39.3227949 69.6795438,39.1381787 C68.6125828,39.0425165 67.6096394,39.0106291 66.4786608,39 L66.4679912,39 C65.4010302,39 64.3340692,39 63.2671082,39.1381787 C61.0520067,39.3227949 58.8545999,39.6781633 56.6946284,40.2010916 C55.1285058,40.5930516 53.5918758,41.093847 52.0960265,41.6997989 L52,41.6997989 C52,41.6997989 52.1813834,52.8710141 52.3200883,58.3981614 C52.3624958,60.0288438 52.6613178,61.6428163 53.2056659,63.1812698 C53.83596,64.927843 54.6779771,66.5912102 55.7130243,68.1344441 C56.7974563,69.7321996 58.1093136,71.164397 59.6074319,72.3860959 C60.1877267,72.8817079 60.8047619,73.3329574 61.4532745,73.7359954 C62.4748439,74.3534515 63.5453697,74.8866836 64.6541575,75.3303648 C65.0062546,75.4791727 65.3263429,75.6279805 65.6144224,75.7236426 C65.9077386,75.8428333 66.2112826,75.9353298 66.5213392,76 C66.8313958,75.9353298 67.1349399,75.8428333 67.4282561,75.7236426 C67.7163355,75.6279805 68.0364238,75.4791727 68.3991906,75.3303648 C69.4899033,74.8845355 70.542531,74.3513317 71.5467255,73.7359954 C72.1928274,73.3294237 72.8096114,72.8783579 73.3925681,72.3860959 C74.8933275,71.167176 76.2055628,69.7345659 77.2869757,68.1344441 C78.3220229,66.5912102 79.16404,64.927843 79.7943341,63.1812698 C80.3386822,61.6428163 80.6375042,60.0288438 80.6799117,58.3981614 C80.8186166,52.8710141 81,41.6997989 81,41.6997989 L80.8612951,41.6891698 Z' id='crest-path-pixel-perfect-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n        }\n      }\n    }\n\n    phn-crest {\n      z-index: $phn-z-index-logo-mobile;\n      @include bugfix__iOS-transition-zindex-using-transform();\n\n      @include pds-media-query-min('l') {\n        z-index: $phn-z-index-logo-mobile;\n      }\n    }\n\n    phn-burger-button {\n      padding: p-px-to-rem(20px) 0 p-px-to-rem(16px) p-px-to-rem(12px);\n\n      @include pds-media-query-min('xs') {\n        padding: p-px-to-rem(20px) 0 p-px-to-rem(16px) p-px-to-rem(12px);\n      }\n\n      @include pds-media-query-min('s') {\n        padding: p-px-to-rem(28px) 0 p-px-to-rem(24px) p-px-to-rem(20px);\n      }\n\n      @include pds-media-query-min('m') {\n        padding: p-px-to-rem(32px) 0 p-px-to-rem(28px) p-px-to-rem(24px);\n      }\n\n      @include pds-media-query-min('xl') {\n        padding: p-px-to-rem(36px) 0 p-px-to-rem(32px) p-px-to-rem(28px);\n      }\n    }\n\n    .burger-button:focus {\n      @include design-system__focus();\n    }\n  }\n\n  .main-content {\n    width: p-px-to-rem(20px);\n  }\n\n  .main-content:focus {\n    outline-style: none;\n  }\n\n  .sr-only {\n    position: absolute;\n    width: p-px-to-rem(1px);\n    height: p-px-to-rem(1px);\n    white-space: nowrap;\n    overflow: hidden;\n    clip: rect(1px, 1px, 1px, 1px);\n    clip-path: inset(50%);\n  }\n\n  phn-p-icon {\n    width: p-px-to-rem(24px);\n\n    @include pds-media-query-min('s') {\n      width: p-px-to-rem(24px);\n    }\n\n    @include pds-media-query-min('m') {\n      width: p-px-to-rem(24px);\n    }\n  }\n}\n","import { breakpoint } from '@porsche-design-system/components-js/styles';\nimport { Component, Element, Event, EventEmitter, h, Host, Listen, Prop, State, Watch } from '@stencil/core';\nimport {\n  findTopLevelRoutingKey,\n  getLastRoutingSegment,\n  RoutingKey,\n  RoutingKeyPointers,\n  RoutingKeys,\n  RoutingKeyWithClick\n} from '../../entities/routing-key';\nimport animationManager from '../../services/animations/animation-manager';\nimport { dealerSearchResultsStore } from '../../state/dealer-search-results-store';\nimport { routerStore } from '../../state/router-store';\nimport {\n  AnimationSequences,\n  NavigationMode,\n  NavigationModeType,\n  NavigationTheme,\n  NavigationThemeType\n} from '../../utility/constants';\nimport { Application, ApplicationType } from '../../utility/constants/app';\nimport {\n  constructThemeClass,\n  focusOnElement,\n  isDesktop,\n  IsKeyboardClick,\n  isPromise,\n  isString\n} from '../../utility/helper';\nimport { isShopAvailable } from '../../utility/helpers/shop-helper';\nimport { componentsOnReady } from '../../utility/ready';\nimport { Timeout } from '../../utility/timeout';\nimport { isPlayingDoubleDrawerAnimation } from '../double-drawer/double-drawer-animation-sequences';\nimport * as routing from '../../services/routing-manager';\nimport { navStateStore } from '../../state/nav-state-store';\n\n@Component({\n  tag: 'phn-level-0',\n  styleUrl: 'level-0.scss',\n  scoped: true\n})\nexport class Level0 {\n  @Prop() locale!: string;\n  @Prop() breakpoint!: number;\n  @Prop() loadingContent = false;\n  @Prop() receivedContent = false;\n  @Prop() theme: NavigationThemeType = NavigationTheme.light;\n  @Prop() mode: NavigationModeType = NavigationMode.navbar;\n  @Prop() app: ApplicationType = Application.default;\n  @Prop() displayLogoOnly = false;\n  @Prop() limitedWidth = false;\n\n  @State() usingKeyboard = false;\n  @State() scrolledPastHeader = false;\n  @State() showBackdrop = false;\n  @State() routingKeyHistory: string[] = [];\n  @State() routingKeyPointer = RoutingKeyPointers.LEVEL_ZERO;\n  @State() isNavigationLoaded = false;\n  @State() isLoading = false;\n  @State() isMyPorscheHoveredOn = false;\n\n  @Element() el!: HTMLPhnLevel0Element;\n\n  @Event() navigationLoaded!: EventEmitter<boolean>;\n\n  private operationPipeline: ((() => Promise<void>) | (() => void))[] = [];\n\n  private logoLoaded = false;\n  private drawerTimeout = new Timeout(20000);\n\n  @Watch('loadingContent')\n  loadingContentWatcher(): void {\n    this.setNavigationLoaded();\n  }\n\n  @Watch('breakpoint')\n  breakpointWatcher(newBreakpoint: number, oldBreakpoint: number): void {\n    this.updateRoutingKeyPointerOfMobileLevel1();\n    this.setNavigationLoaded();\n    this.handleResizeAnimation(newBreakpoint, oldBreakpoint);\n  }\n\n  private handleResizeAnimation(newBreakpoint: number, oldBreakpoint: number): void {\n    const didDrawerModeChange =\n      (isDesktop(newBreakpoint) && !isDesktop(oldBreakpoint)) ||\n      (!isDesktop(newBreakpoint) && isDesktop(oldBreakpoint));\n    if (routing.isOpened() && didDrawerModeChange) {\n      if (isDesktop(this.breakpoint)) {\n        this.operationPipeline.push(() => {\n          animationManager.play(AnimationSequences.OPEN_DOUBLE_DRAWER);\n        });\n      }\n    }\n  }\n\n  @Watch('receivedContent')\n  receivedContentWatcher(): void {\n    this.setNavigationLoaded();\n  }\n\n  @Listen('logoLoaded')\n  logoLoadedHandler(): void {\n    this.logoLoaded = true;\n    this.setNavigationLoaded();\n  }\n\n  @Listen('scroll', { target: 'window', passive: true })\n  scrollHandler(): void {\n    this.scrolledPastHeader = this.el.getBoundingClientRect().bottom <= 0;\n  }\n\n  @Listen('keydown', { target: 'window', passive: true })\n  handleKeyDown(e: KeyboardEvent): void {\n    if (e.key === 'Escape' && !routing.isClosed()) {\n      this.usingKeyboard = true;\n      navStateStore.state.usingKeyboard = true;\n      this.handleClickDrawerHeaderClose();\n      return;\n    }\n  }\n\n  @Listen('click', { passive: true })\n  handleClick(e: MouseEvent): void {\n    this.usingKeyboard = IsKeyboardClick(e);\n    navStateStore.state.usingKeyboard = IsKeyboardClick(e);\n  }\n\n  @Listen('mobileMenuItemClick')\n  handleMobileMenuItemClick({ detail: newRoutingKeys }: CustomEvent<string[]>): void {\n    this.routingKeyHistory = [...this.routingKeyHistory.slice(0, this.routingKeyPointer + 1), ...newRoutingKeys];\n    this.routingKeyPointer = this.routingKeyPointer + newRoutingKeys.length;\n  }\n\n  @Listen('sideDrawerItemClick')\n  handleSideDrawerItemClick({ detail: routingKeys }: CustomEvent<string[]>): void {\n    this.routingKeyHistory = [...this.routingKeyHistory.slice(0, this.routingKeyPointer), ...routingKeys];\n    if (routingKeys.length > 0) {\n      this.routingKeyPointer = this.routingKeyPointer + routingKeys.length - 1;\n    }\n    this.updateRouterStore();\n  }\n\n  @Listen('clickDrawerHeaderBack')\n  handleClickDrawerHeaderBack(): void {\n    this.routingKeyPointer = this.routingKeyPointer - 1;\n  }\n\n  @Listen('clickDrawerHeaderClose')\n  handleClickDrawerHeaderClose(): void {\n    if (isPlayingDoubleDrawerAnimation()) {\n      return;\n    }\n\n    this.routingKeyPointer = -1;\n\n    if (isDesktop(this.breakpoint)) {\n      animationManager.play(AnimationSequences.CLOSE_DOUBLE_DRAWER).then(() => {\n        this.handleDrawerClosed();\n        this.updateRouterStore();\n      });\n    } else {\n      routing.reset();\n    }\n  }\n\n  @Listen('backdropClosed')\n  handleBackdropClosed(): void {\n    this.showBackdrop = false;\n  }\n\n  @Listen('drawerChanged')\n  handleDrawerChanged({ detail: isNavigatingBackwards }: CustomEvent<boolean>): void {\n    const activeRoutingKey = isNavigatingBackwards\n      ? this.routingKeyHistory[this.routingKeyPointer + 1]\n      : this.routingKeyHistory[this.routingKeyPointer];\n\n    const topLevelRoutingKey = findTopLevelRoutingKey(activeRoutingKey ?? '');\n\n    if (topLevelRoutingKey !== RoutingKeys.DEALER_SEARCH || topLevelRoutingKey === activeRoutingKey) {\n      return;\n    }\n\n    if (isNavigatingBackwards) {\n      dealerSearchResultsStore.state.savedDealerCookie = null;\n      return;\n    }\n\n    const dealerId = getLastRoutingSegment(activeRoutingKey);\n    const { ppnDealer: savedDealer } = dealerSearchResultsStore.state.ppnDealers[dealerId] || {};\n\n    if (savedDealer !== undefined) {\n      dealerSearchResultsStore.state.savedDealerCookie = {\n        id: savedDealer.id,\n        latitude: savedDealer.coordinates.latitude,\n        longitude: savedDealer.coordinates.longitude\n      };\n    }\n  }\n\n  @Listen('openDrawer')\n  async handleOpenDrawer(event: CustomEvent<RoutingKeyWithClick>): Promise<void> {\n    await this.openDrawer(event.detail);\n  }\n\n  private updateRouterStore(): void {\n    routerStore.set('routingKeyPointer', this.routingKeyPointer);\n    routerStore.set('routingKeyHistory', this.routingKeyHistory);\n  }\n\n  private handleDrawerClosed(): void {\n    if (this.usingKeyboard) {\n      focusOnElement(this.el.querySelector('phn-burger-button phn-p-button-pure'));\n    }\n  }\n\n  private updateRoutingKeyPointerOfMobileLevel1() {\n    if (this.routingKeyPointer === RoutingKeyPointers.LEVEL_ONE) {\n      this.routingKeyPointer = isDesktop(this.breakpoint) ? RoutingKeyPointers.LEVEL_TWO : RoutingKeyPointers.LEVEL_ONE;\n    }\n  }\n\n  private setNavigationLoaded(): void {\n    this.isNavigationLoaded = !this.loadingContent && this.logoLoaded;\n    this.navigationLoaded.emit(this.isNavigationLoaded);\n  }\n\n  private setInitialRoutingProperties(initialRoutingKey: RoutingKey | string) {\n    if (isString(initialRoutingKey)) {\n      this.setRoutingProperties([initialRoutingKey]);\n    } else if (routerStore.state.initialRoutingKeyHistory !== null) {\n      this.setRoutingProperties(routerStore.state.initialRoutingKeyHistory);\n    } else {\n      this.setRoutingProperties([RoutingKeys.MODELS]);\n    }\n  }\n\n  private async openDrawer(routingKeyWithClick: RoutingKeyWithClick): Promise<void> {\n    const { initialRoutingKey, isKeyboardClick } = routingKeyWithClick;\n\n    this.isLoading = true;\n    this.usingKeyboard = isKeyboardClick;\n    navStateStore.state.usingKeyboard = isKeyboardClick;\n\n    this.setInitialRoutingProperties(initialRoutingKey);\n\n    await componentsOnReady(this.el, this.drawerTimeout, '.drawer', 'phn-backdrop');\n    this.isLoading = false;\n\n    if (isDesktop(this.breakpoint)) {\n      this.operationPipeline.push(() => {\n        animationManager.play(AnimationSequences.OPEN_DOUBLE_DRAWER);\n      });\n    }\n  }\n\n  private isDefaultRouteOnMobile(): boolean {\n    return (\n      !isDesktop(this.breakpoint) &&\n      routerStore.state.initialRoutingKeyHistory === null &&\n      this.routingKeyHistory.length === 2 &&\n      this.routingKeyHistory[1] === RoutingKeys.MODELS\n    );\n  }\n\n  private setRoutingProperties(initialRoutingKeys: string[]) {\n    this.routingKeyHistory = [RoutingKeys.MAIN_MENU, ...initialRoutingKeys];\n    this.routingKeyPointer = isDesktop(this.breakpoint) ? RoutingKeyPointers.LEVEL_TWO : RoutingKeyPointers.LEVEL_ONE;\n\n    if (!this.isDefaultRouteOnMobile()) {\n      this.routingKeyPointer = this.routingKeyHistory.length - 1;\n    }\n\n    this.updateRouterStore();\n  }\n\n  disconnectedCallback(): void {\n    this.drawerTimeout.cancel();\n  }\n\n  async componentDidRender(): Promise<void> {\n    const promises = [];\n    for (const operation of this.operationPipeline) {\n      const maybePromise = operation();\n      if (isPromise<void>(maybePromise)) {\n        promises.push(maybePromise);\n      }\n    }\n    await Promise.all(promises);\n    this.operationPipeline.splice(0, this.operationPipeline.length);\n  }\n\n  private getLogoSize(): string {\n    return this.breakpoint >= breakpoint.m ? 'medium' : 'small';\n  }\n\n  render(): HTMLPhnLevel0Element {\n    return (\n      <Host class={`${constructThemeClass(this.mode, this.theme)}-theme themed-background`}>\n        <header class={this.limitedWidth ? 'limited-width' : ''}>\n          {routing.isOpened() || routing.isOpening() ? (\n            <phn-backdrop style={this.isLoading ? { display: 'none' } : {}} />\n          ) : null}\n\n          <div class=\"level-0-content\">\n            {!this.displayLogoOnly ? (\n              <div class=\"level-0-content-icons\">\n                <phn-level-0-icons\n                  locale={this.locale}\n                  theme={this.theme}\n                  mode={this.mode}\n                  app={this.app}\n                  breakpoint={this.breakpoint}\n                  isLoading={this.isLoading}\n                  isNavigationLoaded={this.isNavigationLoaded}\n                >\n                  <div class=\"level-0-content-logo\">\n                    <phn-logo\n                      app={this.app}\n                      locale={this.locale}\n                      theme={this.theme}\n                      mode={this.mode}\n                      size={this.getLogoSize()}\n                      breakpoint={this.breakpoint}\n                      style={this.isNavigationLoaded ? {} : { display: 'none' }}\n                    />\n                    {!this.isNavigationLoaded ? (\n                      <div class=\"crest-skeleton skeleton-container\">\n                        {this.breakpoint > breakpoint.xs ? <span class=\"label-bone\" /> : <span class=\"crest-bone\" />}\n                      </div>\n                    ) : null}\n                  </div>\n                </phn-level-0-icons>\n                {isShopAvailable(this.locale, this.app) ? (\n                  <contextual-drawer>\n                    <div slot=\"contextual_drawer_header\">\n                      <slot name=\"contextual_drawer_header\"></slot>\n                    </div>\n                  </contextual-drawer>\n                ) : null}\n              </div>\n            ) : (\n              <div class=\"level-0-content-logo\">\n                <phn-logo\n                  app={this.app}\n                  locale={this.locale}\n                  theme={this.theme}\n                  mode={this.mode}\n                  size={this.getLogoSize()}\n                  breakpoint={this.breakpoint}\n                  style={this.isNavigationLoaded ? {} : { display: 'none' }}\n                />\n                {!this.isNavigationLoaded ? (\n                  <div class=\"crest-skeleton skeleton-container\">\n                    {this.breakpoint > breakpoint.xs ? <span class=\"label-bone\" /> : <span class=\"crest-bone\" />}\n                  </div>\n                ) : null}\n              </div>\n            )}\n          </div>\n        </header>\n\n        {!routing.isClosed() ? (\n          isDesktop(this.breakpoint) ? (\n            <phn-double-drawer\n              class=\"drawer\"\n              style={this.isLoading ? { display: 'none' } : {}}\n              routingKeyHistory={this.routingKeyHistory}\n              routingKeyPointer={this.routingKeyPointer}\n              breakpoint={this.breakpoint}\n              initialUsingKeyboard={this.usingKeyboard}\n              locale={this.locale}\n              receivedContent={this.receivedContent}\n            />\n          ) : (\n            <phn-single-drawer\n              class=\"drawer\"\n              style={this.isLoading ? { display: 'none' } : {}}\n              breakpoint={this.breakpoint}\n              usingKeyboard={this.usingKeyboard}\n              locale={this.locale}\n              receivedContent={this.receivedContent}\n            />\n          )\n        ) : null}\n      </Host>\n    );\n  }\n}\n","@import '../../scss/index';\n\n:host {\n  display: block;\n\n  .limit-stretch {\n    @include limit-stretch();\n  }\n\n  .preview-badge {\n    display: block;\n    position: absolute;\n    top: 0;\n    right: 0;\n    background-color: $pds-theme-light-notification-error;\n    z-index: 9999;\n    padding: 0 p-px-to-rem(2px);\n  }\n\n  .main-content {\n    width: 20px;\n\n    &:focus {\n      outline-style: none;\n    }\n  }\n\n  .screenreader-only {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    white-space: nowrap;\n    overflow: hidden;\n    clip: rect(1px, 1px, 1px, 1px);\n    clip-path: inset(50%);\n  }\n}\n","import { Component, Element, h, Host, Prop, State } from '@stencil/core';\nimport { Environments } from '../../entities/environment';\nimport windowService from '../../services/window-service';\nimport { navContentStore } from '../../state/nav-content-store';\nimport { navStateStore } from '../../state/nav-state-store';\nimport {\n  NavigationMode,\n  NavigationModeType,\n  NavigationTheme,\n  NavigationThemeType,\n  VERSION\n} from '../../utility/constants';\nimport { getHTMLElement, loadRootElement } from '../../utility/helper';\nimport { isShopAvailable } from '../../utility/helpers/shop-helper';\nimport { Application, ApplicationType } from '../../utility/constants/app';\nimport animationManager from '../../services/animations/animation-manager';\n\n@Component({\n  tag: 'phn-wrapper',\n  styleUrl: 'wrapper.scss',\n  scoped: true\n})\nexport class Wrapper {\n  @Prop() locale!: string;\n  @Prop() breakpoint!: number;\n  @Prop() loadingContent = false;\n  @Prop() receivedContent = false;\n  @Prop() theme: NavigationThemeType = NavigationTheme.light;\n  @Prop() mode: NavigationModeType = NavigationMode.navbar;\n  @Prop() app: ApplicationType = Application.default;\n  @Prop() displayLogoOnly = false;\n  @Prop() limitedWidth = false;\n\n  @State() showCountryRecommender = windowService.redirected;\n  @State() countryRecommenderClosed = false;\n\n  @Element() el!: HTMLPhnWrapperElement;\n\n  componentWillLoad(): void {\n    this.el.style.setProperty('--scrollbar-width', windowService.getScrollbarWidth());\n\n    loadRootElement(this.el);\n    animationManager.initialize();\n  }\n\n  render(): HTMLPhnWrapperElement {\n    const countryRecommenderContent = navContentStore.state.countryRecommender;\n    const showCountryRecommender =\n      this.showCountryRecommender && !this.countryRecommenderClosed && !this.loadingContent && this.receivedContent;\n\n    const accessibilityStatement = navContentStore.state.accessibilityStatement;\n\n    return (\n      <Host>\n        {navStateStore.state.env === Environments.PREVIEW ? (\n          <phn-p-text theme=\"dark\" size=\"x-small\" class=\"preview-badge\">\n            Header v{VERSION} - PP content\n          </phn-p-text>\n        ) : null}\n\n        {showCountryRecommender ? (\n          <phn-country-recommender\n            locale={this.locale}\n            content={countryRecommenderContent}\n            role=\"region\"\n            aria-label=\"Change recommended Region or Language\"\n            onBannerClosed={() => {\n              this.countryRecommenderClosed = true;\n            }}\n          />\n        ) : null}\n\n        {this.locale === 'en-US' && accessibilityStatement !== null ? (\n          <a class=\"screenreader-only\" href={accessibilityStatement.link}>\n            {accessibilityStatement.text}\n          </a>\n        ) : null}\n\n        <phn-level-0\n          theme={this.theme}\n          mode={this.mode}\n          locale={this.locale}\n          loadingContent={this.loadingContent}\n          receivedContent={this.receivedContent}\n          breakpoint={this.breakpoint}\n          app={this.app}\n          displayLogoOnly={this.displayLogoOnly}\n          limitedWidth={this.limitedWidth}\n        >\n          {isShopAvailable(this.locale, this.app) ? (\n            <div slot=\"contextual_drawer_header\">\n              <slot name=\"contextual_drawer_header\"></slot>\n            </div>\n          ) : null}\n        </phn-level-0>\n\n        <div\n          id=\"main\"\n          class=\"main-content\"\n          onBlur={(e) => {\n            const el = getHTMLElement(e.currentTarget);\n            if (el !== null) {\n              el.removeAttribute('tabIndex');\n            }\n          }}\n        />\n      </Host>\n    );\n  }\n}\n"],"mappings":"63HAGA,IAAIA,gBACJ,IAAMC,MAAQ,IAAIC,WAAW,IACd,SAASC,MAEtB,IAAKH,gBAAiB,CAEpBA,uBAAyBI,SAAW,aAAeA,OAAOJ,iBAAmBI,OAAOJ,gBAAgBK,KAAKD,QAEzG,IAAKJ,gBAAiB,CACpB,MAAM,IAAIM,MAAM,2G,EAIpB,OAAON,gBAAgBC,MACzB,CCXA,IAAMM,UAAY,GAElB,IAAK,IAAIC,EAAI,EAAGA,EAAI,MAAOA,EAAG,CAC5BD,UAAUE,MAAMD,EAAI,KAAOE,SAAS,IAAIC,MAAM,G,CAGzC,SAASC,gBAAgBC,EAAKC,GAAA,GAAAA,SAAA,GAAAA,EAAA,CAAU,CAG7C,OAAOP,UAAUM,EAAIC,EAAS,IAAMP,UAAUM,EAAIC,EAAS,IAAMP,UAAUM,EAAIC,EAAS,IAAMP,UAAUM,EAAIC,EAAS,IAAM,IAAMP,UAAUM,EAAIC,EAAS,IAAMP,UAAUM,EAAIC,EAAS,IAAM,IAAMP,UAAUM,EAAIC,EAAS,IAAMP,UAAUM,EAAIC,EAAS,IAAM,IAAMP,UAAUM,EAAIC,EAAS,IAAMP,UAAUM,EAAIC,EAAS,IAAM,IAAMP,UAAUM,EAAIC,EAAS,KAAOP,UAAUM,EAAIC,EAAS,KAAOP,UAAUM,EAAIC,EAAS,KAAOP,UAAUM,EAAIC,EAAS,KAAOP,UAAUM,EAAIC,EAAS,KAAOP,UAAUM,EAAIC,EAAS,IAChf,CChBA,IAAMC,kBAAoBX,SAAW,aAAeA,OAAOW,YAAcX,OAAOW,WAAWV,KAAKD,QAChG,IAAAY,OAAe,CACbD,WAAUA,YCEZ,SAASE,GAAGC,EAASC,EAAKL,GACxB,GAAIE,OAAOD,aAAeI,IAAQD,EAAS,CACzC,OAAOF,OAAOD,Y,CAGhBG,EAAUA,GAAW,GACrB,IAAME,EAAOF,EAAQG,SAAWH,EAAQf,KAAOA,OAE/CiB,EAAK,GAAKA,EAAK,GAAK,GAAO,GAC3BA,EAAK,GAAKA,EAAK,GAAK,GAAO,IAE3B,GAAID,EAAK,CACPL,EAASA,GAAU,EAEnB,IAAK,IAAIN,EAAI,EAAGA,EAAI,KAAMA,EAAG,CAC3BW,EAAIL,EAASN,GAAKY,EAAKZ,E,CAGzB,OAAOW,C,CAGT,OAAOP,gBAAgBQ,EACzB,CCnBO,SAAeE,mBAAmBC,EAAqBC,G,4HACtDC,EAASC,UAAUC,cAAcC,MAAMC,KACvCC,EAAO,CACXC,OAAQ,MACRC,QAAS,CACP,aAAcC,KACdC,cAAe,GAAAC,OAAGZ,GAClBa,OAAQ,mBACRC,IAAKV,cAAcC,MAAMC,M,uCAOhB,SAAMS,MAAMC,UAAU,GAAAJ,OAAGV,IAAM,MAANA,SAAM,SAANA,EAAQe,aAAY,6BAAAL,OAA4BX,IAAWM,I,OAA/FW,EAAWC,EAAAC,O,8BAELC,EAAe,+DAAAT,OAA+DU,KAAKC,UACtFC,EAAcC,UAEjB,MAAM,IAAIC,UAAUL,EAAcM,eAAeC,S,OAEnD,GAAIV,EAASW,SAAW,IAAK,CAC3B,MAAM,IAAIH,UAAU,0BAA2BC,eAAeG,a,CAGhE,IAAKZ,EAASa,GAAI,CACVV,EAAe,+DAAAT,OAA+DM,EAASW,OAAM,KAAAjB,OAAIM,EAASc,YAChH,MAAM,IAAIN,UAAUL,EAAcM,eAAeC,Q,CAG5C,SAAMV,EAASe,Q,OAAtB,SAAOd,EAAAC,Q,gBCtBOc,wBAAwBC,GACtC,IAAIN,EAAS,GAEb,IAAMO,EAAYpB,UAAUmB,EAASC,WACrC,IAAMC,EAAWrB,UAAUmB,EAASE,UAEpC,GAAIC,SAASF,GAAY,CACvBP,EAASO,EAET,GAAIE,SAASD,GAAW,CACtBR,GAAU,IAAAjB,OAAIyB,E,MAEX,CACL,GAAIC,SAASD,GAAW,CACtBR,EAASQ,C,EAGb,OAAOR,CACT,CAEO,SAAeU,mBAAmBvC,EAAqBC,G,0HACxDuC,EAAgBC,uB,uCAIF,SAAM1C,mBAAmBC,EAAaC,I,OAAhDyC,EAAUvB,EAAAC,OAEhB,GAAIsB,IAAYC,WAAaD,IAAY,KAAM,CAC7C,MAAM,IAAIhB,UAAU,gEAAiEC,eAAeiB,W,CAGtGC,iBAAiBxC,MAAMyC,mBAAqBJ,EAAQK,cACpDF,iBAAiBxC,MAAM2C,mBAAqBN,EAAQO,cACpD7C,cAAcC,MAAM6C,oBAAsBR,EAAQS,eAC5ChB,EAAWO,EAAQP,SAEzBK,EAAgBN,wBAAwBC,IAAaiB,8BACrDC,EAASX,EAAQP,SAASkB,QAAU,G,8BAEpC,KAAMC,aAAe5B,YAAc4B,EAAIC,OAAS5B,eAAeG,aAAc,CAC3EU,EAAgBY,6B,CAGlBhD,cAAcC,MAAM6C,oBAAsBM,8BAC1CpD,cAAcC,MAAMmC,cAAgBA,EACpC,MAAMc,E,OAGRlD,cAAcC,MAAMmC,cAAgBA,EACpCiB,uBAAuBC,QAAQL,EAAQM,WAAWnB,I,0BAGpCoB,eAAe1D,GAC7B,IAAM2D,EAAcC,eAAe,CACjCC,OAAQ7D,EAAO8D,sBACfC,SAAU/D,EAAOgE,mBACjBC,aAAcjE,EAAOkE,mBACrBC,SAAUnE,EAAOoE,kBACjBC,MAAOrE,EAAOsE,uBAGhBC,cAAcC,cAAcC,WAC5BF,cAAcG,aAAaD,UAAW,GAAA/D,OAAGV,EAAOkE,mBAAkB,KAAAxD,OAAIiD,GACxE,CC/EA,IAAMgB,UAAY,gyI,ICiDLC,OAAM,W,kMAmBTC,KAAAC,sBAAwB,IAAIC,QAAQ,GACpCF,KAAAG,wBAA0B,MAC1BH,KAAAI,cAAgB,M,YApBPC,e,SACH,G,cACK,G,cACA,G,WACkBC,gBAAgBC,M,UAClBC,eAAeC,O,kBAC3B,O,SACQC,YAAYC,Q,wBACd,G,qBACH,M,2BACM,E,yBACF,E,qBACJ,4E,oBAEA,M,qBACC,M,gBACLjB,cAAckB,e,CAW9BC,EAAAC,UAAAC,mBAAN,W,4GACE1F,cAAcC,MAAMJ,OAAS8E,KAAK9E,OAClC,SAAM8E,KAAKgB,uB,OAAX5E,EAAAC,OACAqC,uBAAuBuC,UAAUjB,KAAK9E,QACtCgG,OAAO1F,KAAKwE,KAAKmB,WAAYnB,KAAK9E,Q,kBAIpC2F,EAAAC,UAAAM,qBAAA,WACE1C,uBAAuB2C,YAAYrB,KAAKsB,S,EAIpCT,EAAAC,UAAAS,eAAN,W,4GACE,SAAMvB,KAAKwB,mB,OAAXpF,EAAAC,OACA,SAAM2D,KAAKgB,uB,OAAX5E,EAAAC,OAEAwC,eAAezD,UAAUC,cAAcC,MAAMC,M,kBAIzCsF,EAAAC,UAAAW,WAAN,SAAiBC,G,qFACfrG,cAAcC,MAAMqG,IAAMC,YAAYF,G,iBAIxCb,EAAAC,UAAAe,kBAAA,WACEX,OAAO1F,KAAKwE,KAAKmB,WAAYnB,KAAK9E,O,EAIpC2F,EAAAC,UAAAgB,kBAAA,SAAkBC,EAAqBC,EAAWC,GAChD,IAAMC,EAAkB3F,KAAK4F,MAAMJ,GACnCK,eAAeC,IAAIJ,EAAUC,E,EAI/BrB,EAAAC,UAAAwB,0BAAA,WACEtC,KAAKuC,6B,EAIP1B,EAAAC,UAAA0B,cAAA,WACExC,KAAKmB,WAAazB,cAAckB,e,EAI5BC,EAAAC,UAAA2B,uBAAN,SAA6BC,G,oHACrBvH,EAASC,UAAUC,cAAcC,MAAMC,KAE7C,GAAI,IAAIoH,IAAIxH,EAAOkE,oBAAoBuD,SAAW,IAAID,IAAID,EAAME,QAAQA,OAAQ,CAC9E,S,KAGErF,SAASmF,EAAMG,KAAKC,OAApB,Y,uCAEApD,cAAcC,cAAcC,WAC5B,SAAMpC,mBAAmBkF,EAAMG,KAAKC,MAAO9C,KAAK9E,S,OAAhDkB,EAAAC,O,8BAEA6E,OAAO6B,MAAM,iBAAkBC,G,qCAM/BnC,EAAAC,UAAAmC,YAAN,W,sGACQC,EAAWlD,KAAKkD,SAASC,OAE/BnD,KAAKC,sBAAsBoC,KAAI,kBAAAe,UAAAC,OAAA,qB,6CAC7B,GAAIH,EAASI,iBAAkB,CAC7B,S,CAGIC,GAAYC,EAAAC,gBAAgBnI,MAAMoI,aAAS,MAAAF,SAAA,SAAAA,EAAEG,KACnD,GAAIpG,SAASgG,GAAY,CACvB7D,cAAckE,cAAcL,GAC5B,S,qCAMA1C,EAAAC,UAAA+C,aAAN,W,wGACQ1I,EAASC,UAAUC,cAAcC,MAAMC,KAEvCuI,EAAY9D,KAAK8D,UAAUX,OAEjCnD,KAAKC,sBAAsBoC,KAAI,kBAAAe,UAAAC,OAAA,qB,qCAC7B,GAAIS,EAAUR,iBAAkB,CAC9B,S,CAIF5D,cAAckE,cAAc,GAAA/H,OAAGV,EAAO8D,sBAAqB,eAC3D,S,2BAKJ4B,EAAAC,UAAAiD,wBAAA,WACE/D,KAAKgE,uB,EAIPnD,EAAAC,UAAAmD,gCAAA,WACEjE,KAAKgE,uB,EAIPnD,EAAAC,UAAAoD,wBAAA,SAAwB9H,G,IAAU+H,EAAgB/H,EAAAgI,OAChD1E,cAAcyE,iBAAmBA,EAEjC,GAAIA,EAAkB,CACpBnE,KAAKqE,kBAAkBlB,M,GAInBtC,EAAAC,UAAAkD,sBAAA,WACN,IAAKhE,KAAKG,wBAAyB,CACjC9E,cAAcC,MAAMgJ,YAAc,MAClCtE,KAAKG,wBAA0BT,cAAc6E,4BAA2B,WACtElJ,cAAcC,MAAMgJ,YAAc,I,MAK1BzD,EAAAC,UAAAU,gBAAN,W,oHACNnG,cAAcC,MAAMC,IAAMiJ,eAAexE,KAAKzE,KAC9CF,cAAcC,MAAMqG,IAAMC,YAAY5B,KAAK2B,KAC3CtG,cAAcC,MAAMJ,OAAS8E,KAAK9E,OAClCwD,uBAAuB+F,eAAepJ,cAAcC,MAAMC,KAEpDJ,EAASC,UAAUC,cAAcC,MAAMC,KAC7CsD,eAAe1D,GAEf6E,KAAKI,cAAgB,MACrB,SAAMsE,eAAeC,YAAYtJ,cAAcC,MAAMC,M,OAArDa,EAAAC,OACA2D,KAAKI,cAAgB,KAGrBc,OAAO1F,KAAKwE,KAAKmB,WAAYnB,KAAK9E,QAC5BgH,EAAkB3F,KAAK4F,MAAMnC,KAAKkC,iBAExC0C,sBAAsB,CACpB1C,gBAAiBA,IAGnB,SAAM2C,mBAAmBrJ,Q,OAAzBY,EAAAC,O,kBAGYwE,EAAAC,UAAAE,oBAAN,W,0HACA8D,EAA4B9E,KAAK+E,gBACvC/E,KAAK+E,gBAAkB,MACvB/E,KAAKgF,eAAiB,K,uCAEdC,EAAgBjF,KAAK9E,OACrBgK,EAAa7J,cAAcC,MAAMC,IAEd,SAAM4J,aAA4BF,EAAejF,KAAK2B,M,OAAzEyD,EAAmBhJ,EAAAC,OAIzB,GAAI2D,KAAK9E,SAAW+J,GAAiB5J,cAAcC,MAAMC,MAAQ2J,EAAY,CAC3EG,OAAOC,OAAO7B,gBAAgBnI,MAAO8J,GACrCpF,KAAK+E,gBAAkB,I,+BAGzB7D,OAAO6B,MAAM,gBAAiBwC,GAE9B,GAAIT,EAA2B,CAC7B9E,KAAK+E,gBAAkB,I,oBAI3B/E,KAAKgF,eAAiB,M,kBAGVnE,EAAAC,UAAA0E,4BAAN,W,oIACApJ,EAAoCqJ,yBAAyBnK,MAA3DoK,EAAiBtJ,EAAAsJ,kBAAEC,EAAUvJ,EAAAuJ,WAErC,GAAID,IAAsB,MAAQC,EAAWD,EAAkBE,MAAQhI,UAAW,CAChF,S,CAGIiI,EAAc,CAAEC,SAAUJ,EAAkBI,SAAUC,UAAWL,EAAkBK,WACjFxK,EAAQF,cAAcC,MAAKC,I,uCAGzByK,EAAYC,YAAYjG,KAAK9E,QAAO8K,QAChCE,EAAaR,EAAiBE,G,IAExBO,yBAAyBH,GAAzB,YACd,SAAMI,qBAAqBF,EAAUF,I,OAArCK,EAAAC,EAAAjK,O,mBACA,SAAMkK,aAAahL,EAAKH,UAAUG,GAAKiL,eAAgBN,EAAUL,EAAaG,I,OAA9EK,EAAAC,EAAAjK,O,iBAFEoK,EAASJ,EAIfZ,yBAAyBnK,MAAMqK,WAAWD,EAAkBE,IAAMa,E,8BAElEvF,OAAO6B,MAAM,aAAc2D,GAC3BjB,yBAAyBnK,MAAMoK,kBAAoB,K,qCAI/C7E,EAAAC,UAAAyB,4BAAA,WACA,IAAAnG,EAAoC4D,KAAK2G,mBAAmBC,MAAM,KAAjEC,EAAkBzK,EAAA,GAAK0K,EAAQ1K,EAAA/B,MAAA,GACtC,IAAM0M,EAAgCC,gBAAgBvD,gBAAgBnI,MAAOuL,GAE7E,GAAIE,IAAoB,KAAM,CAC5B,M,CAGF,IAAME,EAAgBC,4BAA4BH,EAAiBD,GACnE,IAAMK,EAAoBC,sCAAqCC,cAAA,CAAER,GAAuBI,EAAa,OAErGK,YAAYhM,MAAMiM,yBAA2BJ,EAC7CG,YAAYhM,MAAMkM,yBAA2BL,EAAkBM,OAAS,C,EAG1E5G,EAAAC,UAAA4G,kBAAA,eAAArE,EAAArD,KACEtB,uBAAuBiJ,qBAAqB3H,KAAK9E,OAAQ8E,KAAKsB,UAC7DsG,OAAeC,IAAMpE,gBAEtBzD,KAAKgE,wBAELhE,KAAKwB,kBACFsG,MAAK,WAAM,OAAAC,QAAQC,IAAI,CAAC3E,EAAKrC,sBAAuBqC,EAAKmC,+BAA9C,IACXsC,MAAK,WAAM,OAAAC,QAAQC,IAAI,CAACnD,mBAAmBoD,mCAAhC,IACXH,MAAK,WACJzE,EAAKd,6B,KAIL1B,EAAAC,UAAAoH,iBAAN,W,qFACExI,cAAcyI,QAAUC,QACxB1J,uBAAuB2J,mBAAmBC,aAAaC,cACvDrH,OAAOsH,KAAK,mB,iBAGd3H,EAAAC,UAAA2H,qBAAA,WACEzI,KAAKC,sBAAsByI,Q,EAGrB7H,EAAAC,UAAA6H,gBAAA,WACN,OAAO3I,KAAK4I,OAASpI,eAAeqI,MAAQ7I,KAAK8I,eAAiB,OAAS,KAAO,K,EAGpFjI,EAAAC,UAAAiI,OAAA,WACE,IAAK/I,KAAKI,cAAe,CACvB,OAAO4I,EAAA,W,CAGT,OAEEA,EAAA,OAAKC,MAAOjJ,KAAK2I,kBAAoB,uBAAyB,UAC5DK,EAAA,eACEE,MAAOlJ,KAAKkJ,MACZN,KAAM5I,KAAK4I,KACX1N,OAAQ8E,KAAK9E,OACb8J,eAAgBhF,KAAKgF,eACrBD,gBAAiB/E,KAAK+E,gBACtB5D,WAAYnB,KAAKmB,WACjBQ,IAAKC,YAAY5B,KAAK2B,KACtBwH,gBAAiBnJ,KAAKmJ,gBACtBL,aAAc9I,KAAK2I,mBAElBS,gBAAgBpJ,KAAK9E,OAAQ0G,YAAY5B,KAAK2B,MAC7CqH,EAAA,OAAKK,KAAK,4BACRL,EAAA,QAAMM,KAAK,8BAEX,M,wbAxSK,G,uBCjDnB,IAAMC,UAAY,w6xB,ICyCLC,OAAM,W,oGAwBTxJ,KAAAyJ,kBAA8D,GAE9DzJ,KAAA0J,WAAa,MACb1J,KAAA2J,cAAgB,IAAIzJ,QAAQ,K,oEAxBX,M,qBACC,M,WACWI,gBAAgBC,M,UAClBC,eAAeC,O,SACnBC,YAAYC,Q,qBACjB,M,kBACH,M,mBAEE,M,wBACK,M,kBACN,M,uBACe,G,uBACViJ,mBAAmBC,W,wBAClB,M,eACT,M,0BACW,K,CAYhCC,EAAAhJ,UAAAiJ,sBAAA,WACE/J,KAAKgK,qB,EAIPF,EAAAhJ,UAAAe,kBAAA,SAAkBoI,EAAuBC,GACvClK,KAAKmK,wCACLnK,KAAKgK,sBACLhK,KAAKoK,sBAAsBH,EAAeC,E,EAGpCJ,EAAAhJ,UAAAsJ,sBAAA,SAAsBH,EAAuBC,GACnD,IAAMG,EACHC,UAAUL,KAAmBK,UAAUJ,KACtCI,UAAUL,IAAkBK,UAAUJ,GAC1C,GAAIK,YAAsBF,EAAqB,CAC7C,GAAIC,UAAUtK,KAAKmB,YAAa,CAC9BnB,KAAKyJ,kBAAkBtP,MAAK,WAC1BqQ,iBAAiBC,KAAKC,mBAAmBC,mB,OAOjDb,EAAAhJ,UAAA8J,uBAAA,WACE5K,KAAKgK,qB,EAIPF,EAAAhJ,UAAA+J,kBAAA,WACE7K,KAAK0J,WAAa,KAClB1J,KAAKgK,qB,EAIPF,EAAAhJ,UAAAgK,cAAA,WACE9K,KAAK+K,mBAAqB/K,KAAKgL,GAAGC,wBAAwBC,QAAU,C,EAItEpB,EAAAhJ,UAAAqK,cAAA,SAAcC,GACZ,GAAIA,EAAEC,MAAQ,WAAaC,WAAoB,CAC7CtL,KAAKuL,cAAgB,KACrBlQ,cAAcC,MAAMiQ,cAAgB,KACpCvL,KAAKwL,+BACL,M,GAKJ1B,EAAAhJ,UAAA2K,YAAA,SAAYL,GACVpL,KAAKuL,cAAgBG,gBAAgBN,GACrC/P,cAAcC,MAAMiQ,cAAgBG,gBAAgBN,E,EAItDtB,EAAAhJ,UAAA6K,0BAAA,SAA0BvP,G,IAAUwP,EAAcxP,EAAAgI,OAChDpE,KAAKmH,kBAAiBE,4BAAA,GAAOrH,KAAKmH,kBAAkB9M,MAAM,EAAG2F,KAAK6L,kBAAoB,GAAE,MAAKD,EAAc,MAC3G5L,KAAK6L,kBAAoB7L,KAAK6L,kBAAoBD,EAAenE,M,EAInEqC,EAAAhJ,UAAAgL,0BAAA,SAA0B1P,G,IAAU2P,EAAW3P,EAAAgI,OAC7CpE,KAAKmH,kBAAiBE,4BAAA,GAAOrH,KAAKmH,kBAAkB9M,MAAM,EAAG2F,KAAK6L,mBAAkB,MAAKE,EAAW,MACpG,GAAIA,EAAYtE,OAAS,EAAG,CAC1BzH,KAAK6L,kBAAoB7L,KAAK6L,kBAAoBE,EAAYtE,OAAS,C,CAEzEzH,KAAKgM,mB,EAIPlC,EAAAhJ,UAAAmL,4BAAA,WACEjM,KAAK6L,kBAAoB7L,KAAK6L,kBAAoB,C,EAIpD/B,EAAAhJ,UAAA0K,6BAAA,eAAAnI,EAAArD,KACE,GAAIkM,iCAAkC,CACpC,M,CAGFlM,KAAK6L,mBAAqB,EAE1B,GAAIvB,UAAUtK,KAAKmB,YAAa,CAC9BqJ,iBAAiBC,KAAKC,mBAAmByB,qBAAqBrE,MAAK,WACjEzE,EAAK+I,qBACL/I,EAAK2I,mB,QAEF,CACLK,O,GAKJvC,EAAAhJ,UAAAwL,qBAAA,WACEtM,KAAKuM,aAAe,K,EAItBzC,EAAAhJ,UAAA0L,oBAAA,SAAoBpQ,G,IAAUqQ,EAAqBrQ,EAAAgI,OACjD,IAAMsI,EAAmBD,EACrBzM,KAAKmH,kBAAkBnH,KAAK6L,kBAAoB,GAChD7L,KAAKmH,kBAAkBnH,KAAK6L,mBAEhC,IAAMhF,EAAqB8F,uBAAuBD,IAAgB,MAAhBA,SAAgB,EAAhBA,EAAoB,IAEtE,GAAI7F,IAAuB+F,YAAYC,eAAiBhG,IAAuB6F,EAAkB,CAC/F,M,CAGF,GAAID,EAAuB,CACzBhH,yBAAyBnK,MAAMoK,kBAAoB,KACnD,M,CAGF,IAAMQ,EAAW4G,sBAAsBJ,GAC/B,IAAWK,GAAgBtH,yBAAyBnK,MAAMqK,WAAWO,IAAa,IAAEO,UAE5F,GAAIsG,IAAgBnP,UAAW,CAC7B6H,yBAAyBnK,MAAMoK,kBAAoB,CACjDE,GAAImH,EAAYnH,GAChBE,SAAUiH,EAAYlH,YAAYC,SAClCC,UAAWgH,EAAYlH,YAAYE,U,GAMnC+D,EAAAhJ,UAAAkM,iBAAN,SAAuBtK,G,4GACrB,SAAM1C,KAAKiN,WAAWvK,EAAM0B,S,OAA5BhI,EAAAC,O,kBAGMyN,EAAAhJ,UAAAkL,kBAAA,WACN1E,YAAYjF,IAAI,oBAAqBrC,KAAK6L,mBAC1CvE,YAAYjF,IAAI,oBAAqBrC,KAAKmH,kB,EAGpC2C,EAAAhJ,UAAAsL,mBAAA,WACN,GAAIpM,KAAKuL,cAAe,CACtB2B,eAAelN,KAAKgL,GAAGmC,cAAc,uC,GAIjCrD,EAAAhJ,UAAAqJ,sCAAA,WACN,GAAInK,KAAK6L,oBAAsBjC,mBAAmBwD,UAAW,CAC3DpN,KAAK6L,kBAAoBvB,UAAUtK,KAAKmB,YAAcyI,mBAAmByD,UAAYzD,mBAAmBwD,S,GAIpGtD,EAAAhJ,UAAAkJ,oBAAA,WACNhK,KAAKsN,oBAAsBtN,KAAKgF,gBAAkBhF,KAAK0J,WACvD1J,KAAKmE,iBAAiBhB,KAAKnD,KAAKsN,mB,EAG1BxD,EAAAhJ,UAAAyM,4BAAA,SAA4BC,GAClC,GAAIjQ,SAASiQ,GAAoB,CAC/BxN,KAAKyN,qBAAqB,CAACD,G,MACtB,GAAIlG,YAAYhM,MAAMiM,2BAA6B,KAAM,CAC9DvH,KAAKyN,qBAAqBnG,YAAYhM,MAAMiM,yB,KACvC,CACLvH,KAAKyN,qBAAqB,CAACb,YAAYc,Q,GAI7B5D,EAAAhJ,UAAAmM,WAAN,SAAiBU,G,oHACfH,EAAuCG,EAAmBH,kBAAvCI,EAAoBD,EAAmBC,gBAElE5N,KAAK6N,UAAY,KACjB7N,KAAKuL,cAAgBqC,EACrBvS,cAAcC,MAAMiQ,cAAgBqC,EAEpC5N,KAAKuN,4BAA4BC,GAEjC,SAAMM,kBAAkB9N,KAAKgL,GAAIhL,KAAK2J,cAAe,UAAW,iB,OAAhEvN,EAAAC,OACA2D,KAAK6N,UAAY,MAEjB,GAAIvD,UAAUtK,KAAKmB,YAAa,CAC9BnB,KAAKyJ,kBAAkBtP,MAAK,WAC1BqQ,iBAAiBC,KAAKC,mBAAmBC,mB,sBAKvCb,EAAAhJ,UAAAiN,uBAAA,WACN,OACGzD,UAAUtK,KAAKmB,aAChBmG,YAAYhM,MAAMiM,2BAA6B,MAC/CvH,KAAKmH,kBAAkBM,SAAW,GAClCzH,KAAKmH,kBAAkB,KAAOyF,YAAYc,M,EAItC5D,EAAAhJ,UAAA2M,qBAAA,SAAqBO,GAC3BhO,KAAKmH,kBAAiBE,cAAA,CAAIuF,YAAYqB,WAAcD,EAAkB,MACtEhO,KAAK6L,kBAAoBvB,UAAUtK,KAAKmB,YAAcyI,mBAAmByD,UAAYzD,mBAAmBwD,UAExG,IAAKpN,KAAK+N,yBAA0B,CAClC/N,KAAK6L,kBAAoB7L,KAAKmH,kBAAkBM,OAAS,C,CAG3DzH,KAAKgM,mB,EAGPlC,EAAAhJ,UAAA2H,qBAAA,WACEzI,KAAK2J,cAAcjB,Q,EAGfoB,EAAAhJ,UAAAoN,mBAAN,W,0HACQC,EAAW,GACjB,IAAAC,EAAA,EAAwBhS,EAAA4D,KAAKyJ,kBAAL2E,EAAAhS,EAAAqL,OAAA2G,IAAwB,CAArCC,EAASjS,EAAAgS,GACZE,EAAeD,IACrB,GAAIE,UAAgBD,GAAe,CACjCH,EAAShU,KAAKmU,E,EAGlB,SAAMvG,QAAQC,IAAImG,I,OAAlB9H,EAAAhK,OACA2D,KAAKyJ,kBAAkB+E,OAAO,EAAGxO,KAAKyJ,kBAAkBhC,Q,kBAGlDqC,EAAAhJ,UAAA2N,YAAA,WACN,OAAOzO,KAAKmB,YAAcA,WAAWuN,EAAI,SAAW,O,EAGtD5E,EAAAhJ,UAAAiI,OAAA,WACE,OACEC,EAAC2F,KAAI,CAAC1F,MAAO,GAAApN,OAAG+S,oBAAoB5O,KAAK4I,KAAM5I,KAAKkJ,OAAM,6BACxDF,EAAA,UAAQC,MAAOjJ,KAAK8I,aAAe,gBAAkB,IAClDyB,YAAsBsE,YACrB7F,EAAA,gBAAc8F,MAAO9O,KAAK6N,UAAY,CAAEkB,QAAS,QAAW,KAC1D,KAEJ/F,EAAA,OAAKC,MAAM,oBACPjJ,KAAKmJ,gBACLH,EAAA,OAAKC,MAAM,yBACTD,EAAA,qBACE9N,OAAQ8E,KAAK9E,OACbgO,MAAOlJ,KAAKkJ,MACZN,KAAM5I,KAAK4I,KACXjH,IAAK3B,KAAK2B,IACVR,WAAYnB,KAAKmB,WACjB0M,UAAW7N,KAAK6N,UAChBP,mBAAoBtN,KAAKsN,oBAEzBtE,EAAA,OAAKC,MAAM,wBACTD,EAAA,YACErH,IAAK3B,KAAK2B,IACVzG,OAAQ8E,KAAK9E,OACbgO,MAAOlJ,KAAKkJ,MACZN,KAAM5I,KAAK4I,KACXoG,KAAMhP,KAAKyO,cACXtN,WAAYnB,KAAKmB,WACjB2N,MAAO9O,KAAKsN,mBAAqB,GAAK,CAAEyB,QAAS,WAEjD/O,KAAKsN,mBACLtE,EAAA,OAAKC,MAAM,qCACRjJ,KAAKmB,WAAaA,WAAW8N,GAAKjG,EAAA,QAAMC,MAAM,eAAkBD,EAAA,QAAMC,MAAM,gBAE7E,OAGPG,gBAAgBpJ,KAAK9E,OAAQ8E,KAAK2B,KACjCqH,EAAA,yBACEA,EAAA,OAAKK,KAAK,4BACRL,EAAA,QAAMM,KAAK,+BAGb,MAGNN,EAAA,OAAKC,MAAM,wBACTD,EAAA,YACErH,IAAK3B,KAAK2B,IACVzG,OAAQ8E,KAAK9E,OACbgO,MAAOlJ,KAAKkJ,MACZN,KAAM5I,KAAK4I,KACXoG,KAAMhP,KAAKyO,cACXtN,WAAYnB,KAAKmB,WACjB2N,MAAO9O,KAAKsN,mBAAqB,GAAK,CAAEyB,QAAS,WAEjD/O,KAAKsN,mBACLtE,EAAA,OAAKC,MAAM,qCACRjJ,KAAKmB,WAAaA,WAAW8N,GAAKjG,EAAA,QAAMC,MAAM,eAAkBD,EAAA,QAAMC,MAAM,gBAE7E,SAMVqC,WACAhB,UAAUtK,KAAKmB,YACb6H,EAAA,qBACEC,MAAM,SACN6F,MAAO9O,KAAK6N,UAAY,CAAEkB,QAAS,QAAW,GAC9C5H,kBAAmBnH,KAAKmH,kBACxB0E,kBAAmB7L,KAAK6L,kBACxB1K,WAAYnB,KAAKmB,WACjB+N,qBAAsBlP,KAAKuL,cAC3BrQ,OAAQ8E,KAAK9E,OACb6J,gBAAiB/E,KAAK+E,kBAGxBiE,EAAA,qBACEC,MAAM,SACN6F,MAAO9O,KAAK6N,UAAY,CAAEkB,QAAS,QAAW,GAC9C5N,WAAYnB,KAAKmB,WACjBoK,cAAevL,KAAKuL,cACpBrQ,OAAQ8E,KAAK9E,OACb6J,gBAAiB/E,KAAK+E,kBAGxB,K,sVAtVO,G,uBCzCnB,IAAMoK,WAAa,gpJ,ICsBNC,QAAO,W,2GAGO,M,qBACC,M,WACW9O,gBAAgBC,M,UAClBC,eAAeC,O,SACnBC,YAAYC,Q,qBACjB,M,kBACH,M,4BAEWjB,cAAc2P,W,8BACZ,K,CAIpCD,EAAAtO,UAAA4G,kBAAA,WACE1H,KAAKgL,GAAG8D,MAAMQ,YAAY,oBAAqB5P,cAAc6P,qBAE7DC,gBAAgBxP,KAAKgL,IACrBR,iBAAiBiF,Y,EAGnBL,EAAAtO,UAAAiI,OAAA,eAAA1F,EAAArD,KACE,IAAM0P,EAA4BjM,gBAAgBnI,MAAMqU,mBACxD,IAAMC,EACJ5P,KAAK4P,yBAA2B5P,KAAK6P,2BAA6B7P,KAAKgF,gBAAkBhF,KAAK+E,gBAEhG,IAAM+K,EAAyBrM,gBAAgBnI,MAAMwU,uBAErD,OACE9G,EAAC2F,KAAI,KACFtT,cAAcC,MAAMC,MAAQwU,aAAaC,QACxChH,EAAA,cAAYE,MAAM,OAAO8F,KAAK,UAAU/F,MAAM,iBAAe,WAClDb,QAAO,iBAEhB,KAEHwH,EACC5G,EAAA,2BACE9N,OAAQ8E,KAAK9E,OACb+U,QAASP,EACTQ,KAAK,SAAQ,aACF,wCACXC,eAAgB,WACd9M,EAAKwM,yBAA2B,I,IAGlC,KAEH7P,KAAK9E,SAAW,SAAW4U,IAA2B,KACrD9G,EAAA,KAAGC,MAAM,oBAAoBmH,KAAMN,EAAuBnM,MACvDmM,EAAuBO,MAExB,KAEJrH,EAAA,eACEE,MAAOlJ,KAAKkJ,MACZN,KAAM5I,KAAK4I,KACX1N,OAAQ8E,KAAK9E,OACb8J,eAAgBhF,KAAKgF,eACrBD,gBAAiB/E,KAAK+E,gBACtB5D,WAAYnB,KAAKmB,WACjBQ,IAAK3B,KAAK2B,IACVwH,gBAAiBnJ,KAAKmJ,gBACtBL,aAAc9I,KAAK8I,cAElBM,gBAAgBpJ,KAAK9E,OAAQ8E,KAAK2B,KACjCqH,EAAA,OAAKK,KAAK,4BACRL,EAAA,QAAMM,KAAK,8BAEX,MAGNN,EAAA,OACEpD,GAAG,OACHqD,MAAM,eACNqH,OAAQ,SAAClF,GACP,IAAMJ,EAAKuF,eAAenF,EAAEoF,eAC5B,GAAIxF,IAAO,KAAM,CACfA,EAAGyF,gBAAgB,W,qIAhFb,G"}