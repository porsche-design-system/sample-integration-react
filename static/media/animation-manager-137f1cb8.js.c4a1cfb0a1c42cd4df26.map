{"version":3,"names":["shrinkElement","el","progress","_b","_c","to","style","width","concat","growElement","slideOutToRightRelative","from","_d","right","position","slideOutToLeftRelative","left","slideInFromLeftRelative","slideInFromRightRelative","slideInFromRight","slideInFromLeft","slideOutToRight","slideOutToLeft","slideInFromRightFixed","slideOutToRightFixed","slideInFromLeftFixed","slideOutToLeftFixed","fadeOut","opacity","fadeIn","fadeOutBackdrop","backgroundColor","fadeInBackdrop","AnimationsAction","resetStyle","removeAttribute","getAnimationEffect","effectName","timingFunctions","easeInOutSin","timeFraction","Math","cos","PI","easeInOutQuad","linear","round","cubicBezierStart","cubicBezier","cubicBezierEnd","animationPromiseGenerator","animation","duration","cleanUpAfterAnimation","effect","__rest","Promise","resolve","animationFrame","timeout","setTimeout","cancelAnimationFrame","finishAnimation","playEffect","clearTimeout","maybePromise","isPromise","then","start","performance","now","name","animate","time","timingFunction","Number","EPSILON","ANIMATION_HAS_FINISHED","ANIMATION_ON_PROGRESS","windowService","requestAnimationFrame","t","initial","p1","p2","final","sequences","rootElement","initialize","element","register","sequenceIdentifier","animationSequence","reset","Object","keys","forEach","key","play","sequence","undefined","_","reject","Error","running","promise","value","applyCurrentAnimationSequenceStep","finishAnimationSequence","currentStepIndex","_a","call","steps","length","sequenceStep","promises","_i","sequenceStep_1","push","executeAnimation","all","sent","error_1","onStart","onEnd","elementSelector","animatedElements","Array","querySelectorAll","animationExecutors","animatedElements_1","animationPromiseEffect","isPlaying","makeSequence","sequenceSteps","animationDefaults","map","step","assign","animationManager"],"sources":["src/services/animations/animation-actions.ts","src/services/animations/animation-effects.ts","src/services/animations/animation-manager.ts"],"sourcesContent":["/* istanbul ignore file */\n\nimport { EffectType } from './animation-effects';\n\nconst shrinkElement = (el: HTMLElement, progress: number, { to = 100 }: EffectType): void => {\n  el.style.width = `${(1 - progress) * to}%`;\n};\n\nconst growElement = (el: HTMLElement, progress: number, { to = 100 }: EffectType): void => {\n  el.style.width = `${progress * to}%`;\n};\n\nconst slideOutToRightRelative = (el: HTMLElement, progress: number, { from = 0, to = -100 }: EffectType): void => {\n  el.style.right = `calc(${progress * to + from}%)`;\n  el.style.position = 'relative';\n};\n\nconst slideOutToLeftRelative = (el: HTMLElement, progress: number, { from = 0, to = -100 }: EffectType): void => {\n  el.style.left = `calc(${progress * to + from}%)`;\n  el.style.position = 'relative';\n};\n\nconst slideInFromLeftRelative = (el: HTMLElement, progress: number, { from = -100, to = 0 }: EffectType): void => {\n  el.style.left = `calc(${(1 - progress) * from + to}%)`;\n  el.style.position = 'relative';\n};\n\nconst slideInFromRightRelative = (el: HTMLElement, progress: number, { from = -100, to = 0 }: EffectType): void => {\n  el.style.right = `calc(${(1 - progress) * from + to}%)`;\n  el.style.position = 'relative';\n};\n\nconst slideInFromRight = (el: HTMLElement, progress: number, { from = -100, to = 0 }: EffectType): void => {\n  el.style.right = `${(1 - progress) * from + to}px`;\n};\n\nconst slideInFromLeft = (el: HTMLElement, progress: number, { from = -100, to = 0 }: EffectType): void => {\n  el.style.left = `${(1 - progress) * from + to}px`;\n};\n\nconst slideOutToRight = (el: HTMLElement, progress: number, { from = 0, to = -100 }: EffectType): void => {\n  el.style.right = `${progress * to + from}px`;\n};\n\nconst slideOutToLeft = (el: HTMLElement, progress: number, { from = 0, to = -100 }: EffectType): void => {\n  el.style.left = `${progress * to + from}px`;\n};\n\nconst slideInFromRightFixed = (el: HTMLElement, progress: number, { from = -100, to = 0 }: EffectType) => {\n  el.style.right = `calc(${(1 - progress) * from + to}%)`;\n  el.style.position = 'fixed';\n};\n\nconst slideOutToRightFixed = (el: HTMLElement, progress: number, { from = 0, to = -100 }: EffectType): void => {\n  el.style.right = `calc(${progress * to + from}%)`;\n  el.style.position = 'fixed';\n};\n\nconst slideInFromLeftFixed = (el: HTMLElement, progress: number, { from = -100, to = 0 }: EffectType) => {\n  el.style.left = `calc(${(1 - progress) * from + to}%)`;\n  el.style.position = 'fixed';\n};\n\nconst slideOutToLeftFixed = (el: HTMLElement, progress: number, { from = 0, to = -100 }: EffectType): void => {\n  el.style.left = `calc(${progress * to + from}%)`;\n  el.style.position = 'fixed';\n};\n\nconst fadeOut = (el: HTMLElement, progress: number, { from = 1, to = 0 }: EffectType): void => {\n  el.style.opacity = `${(1 - progress) * from + progress * to}`;\n};\n\nconst fadeIn = (el: HTMLElement, progress: number, { from = 0, to = 1 }: EffectType): void => {\n  el.style.opacity = `${progress * to + (progress - 1) * from}`;\n};\n\nconst fadeOutBackdrop = (el: HTMLElement, progress: number, { from = 1, to = 0 }: EffectType): void => {\n  el.style.backgroundColor = `rgba(0, 0, 0, ${(1 - progress) * from + progress * to})`;\n  el.style.opacity = `${1 - progress + progress * to}`;\n};\n\nconst fadeInBackdrop = (el: HTMLElement, progress: number, { from = 0, to = 1 }: EffectType): void => {\n  el.style.backgroundColor = `rgba(0, 0, 0, ${progress * to + (progress - 1) * from})`;\n  el.style.opacity = `${progress + (progress - 1) * from}`;\n};\n\nconst AnimationsAction = {\n  slideOutToLeftRelative,\n  slideInFromRightRelative,\n  slideInFromLeftRelative,\n  slideOutToRightRelative,\n  shrinkElement,\n  growElement,\n  slideInFromRight,\n  slideInFromLeft,\n  slideOutToRight,\n  slideOutToLeft,\n  fadeOut,\n  fadeIn,\n  fadeInBackdrop,\n  fadeOutBackdrop,\n  slideInFromRightFixed,\n  slideOutToRightFixed,\n  slideInFromLeftFixed,\n  slideOutToLeftFixed\n} as const;\n\nexport default AnimationsAction;\n","import { isPromise } from '../../utility/helper';\nimport windowService from '../window-service';\nimport AnimationsAction from './animation-actions';\n\nexport type AvailableAnimations = keyof typeof AnimationsAction;\ntype TimingFunction = keyof typeof timingFunctions;\nexport type AnimationGeneratorType = {\n  cleanUpAfterAnimation?: ((el: HTMLElement) => Promise<void>) | ((el: HTMLElement) => void) | boolean;\n  duration?: number;\n};\nexport type EffectType = {\n  name: AvailableAnimations;\n  to?: number;\n  from?: number;\n  timingFunction?: TimingFunction;\n};\n\nconst resetStyle = (el: HTMLElement): void => {\n  el.removeAttribute('style');\n};\n\nexport const getAnimationEffect = (\n  effectName: AvailableAnimations\n): ((el: HTMLElement, progress: number, effect: EffectType) => void) => {\n  return AnimationsAction[effectName];\n};\n\n/* istanbul ignore next */\nconst timingFunctions = {\n  easeInOutSin: (timeFraction: number): number => {\n    return -(Math.cos(Math.PI * timeFraction) - 1) / 2;\n  },\n  easeInOutQuad: (timeFraction: number): number => {\n    if (timeFraction < 0.5) {\n      return (2 * timeFraction) / 2;\n    } else {\n      return (2 - 2 * (1 - timeFraction)) / 2;\n    }\n  },\n  linear: (timeFraction: number): number => {\n    return timeFraction < 0 || timeFraction > 1 ? Math.round(timeFraction) : timeFraction;\n  },\n  cubicBezierStart: (timeFraction: number) => {\n    return cubicBezier(timeFraction, 0.1, 0.0, 0.0, 100);\n  },\n  cubicBezierEnd: (timeFraction: number) => {\n    return cubicBezier(timeFraction, 0.3, 0.0, 1.0, 0.8);\n  }\n} as const;\n\nexport function animationPromiseGenerator(\n  el: HTMLElement,\n  animation: AnimationGeneratorType & EffectType\n): Promise<void> {\n  const { duration = 300, cleanUpAfterAnimation = false, ...effect } = animation;\n\n  return new Promise<void>((resolve) => {\n    let animationFrame: number;\n\n    const timeout = setTimeout(() => {\n      cancelAnimationFrame(animationFrame);\n      finishAnimation();\n    }, duration + 50);\n\n    function finishAnimation() {\n      playEffect(el, 1, effect);\n\n      clearTimeout(timeout);\n      if (typeof cleanUpAfterAnimation === 'function') {\n        const maybePromise: void | Promise<void> = cleanUpAfterAnimation(el);\n        if (isPromise<void>(maybePromise)) {\n          maybePromise.then(() => resolve());\n          return;\n        }\n      } else if (cleanUpAfterAnimation === true) {\n        resetStyle(el);\n      }\n\n      resolve();\n    }\n\n    const start = performance.now();\n    const playEffect = getAnimationEffect(effect.name);\n    function animate(time: DOMHighResTimeStamp) {\n      const timingFunction = timingFunctions[effect.timingFunction || 'linear'];\n      let progress = timingFunction((time - start) / duration);\n      progress = Math.round((progress + Number.EPSILON) * 1000) / 1000;\n\n      const ANIMATION_HAS_FINISHED = progress >= 1;\n      const ANIMATION_ON_PROGRESS = progress < 1;\n\n      if (ANIMATION_HAS_FINISHED) {\n        return finishAnimation();\n      }\n\n      playEffect(el, progress, effect);\n\n      if (ANIMATION_ON_PROGRESS) {\n        animationFrame = windowService.requestAnimationFrame(animate);\n      }\n    }\n\n    animationFrame = windowService.requestAnimationFrame(animate);\n  });\n}\n\nfunction cubicBezier(t: number, initial: number, p1: number, p2: number, final: number) {\n  return (\n    (1 - t) * (1 - t) * (1 - t) * initial +\n    3 * (1 - t) * (1 - t) * t * p1 +\n    3 * (1 - t) * t * t * p2 +\n    t * t * t * final\n  );\n}\n","import { AnimationSequencesType } from '../../utility/constants';\nimport { isPromise } from '../../utility/helper';\nimport { animationPromiseGenerator, AnimationGeneratorType, EffectType } from './animation-effects';\n\nexport type WithRequired<T, K extends keyof T> = T & { [P in K]-?: T[P] };\nexport type AnimationStartsCallbacks = {\n  onAnimationStarts?: (() => Promise<unknown>) | (() => void);\n};\n\nexport type AnimationEndsCallbacks = {\n  onAnimationEnds?: (() => Promise<unknown>) | (() => void);\n};\n\nexport type AnimationStatusCallbacks = AnimationStartsCallbacks & AnimationEndsCallbacks;\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type SequenceIdentifier = AnimationSequencesType | (string & {});\n\nexport interface NaviAnimation {\n  animation: EffectType & AnimationGeneratorType;\n  elementSelector: string;\n  onStart?: (() => Promise<unknown>) | (() => unknown);\n  onEnd?: (() => Promise<unknown>) | (() => unknown);\n}\n\nexport type SequenceStep = Array<NaviAnimation>;\n\nexport type AnimationSequence = {\n  steps: Array<SequenceStep>;\n  currentStepIndex: number;\n  running: boolean;\n  resolve?: (value: unknown) => void;\n  reject?: (reason?: unknown) => void;\n  promise?: Promise<void>;\n};\n\nconst sequences: {\n  [key in SequenceIdentifier]?: AnimationSequence | undefined;\n} = {};\nlet rootElement: HTMLElement | null = null;\n\nfunction initialize(element: HTMLElement): void {\n  rootElement = element;\n}\n\nfunction register(sequenceIdentifier: SequenceIdentifier, animationSequence: AnimationSequence): void {\n  sequences[sequenceIdentifier] = animationSequence;\n}\n\nfunction reset(): void {\n  Object.keys(sequences).forEach((key) => delete sequences[key]);\n}\n\nasync function play(sequenceIdentifier: SequenceIdentifier): Promise<unknown> {\n  const sequence = sequences[sequenceIdentifier];\n\n  if (sequence === undefined) {\n    return new Promise((_, reject) => reject(new Error(`Sequence ${sequenceIdentifier} has not been registered`)));\n  }\n\n  if (!sequence.running) {\n    sequence.promise = new Promise<void>((resolve, reject) => {\n      sequence.resolve = () => {\n        sequence.running = false;\n        resolve();\n      };\n\n      sequence.reject = (value: unknown) => {\n        sequence.running = false;\n        reject(value);\n      };\n\n      sequence.running = true;\n\n      applyCurrentAnimationSequenceStep(sequence);\n    });\n  }\n\n  return sequence.promise;\n}\n\nfunction finishAnimationSequence(sequence: AnimationSequence) {\n  sequence.currentStepIndex = 0;\n  sequence.resolve?.(null);\n  sequence.promise = undefined;\n}\n\nasync function applyCurrentAnimationSequenceStep(sequence: AnimationSequence) {\n  if (sequence.currentStepIndex >= sequence.steps.length) {\n    finishAnimationSequence(sequence);\n    return;\n  }\n\n  const sequenceStep = sequence.steps[sequence.currentStepIndex];\n\n  const promises = [];\n  for (const animation of sequenceStep) {\n    promises.push(executeAnimation(animation));\n  }\n\n  try {\n    await Promise.all(promises);\n  } catch (error) {\n    sequence.reject?.(error);\n    return;\n  }\n\n  sequence.currentStepIndex += 1;\n\n  setTimeout(() => applyCurrentAnimationSequenceStep(sequence), 0);\n}\n\nasync function executeAnimation({ onStart, onEnd, animation, elementSelector }: NaviAnimation): Promise<void> {\n  if (rootElement === null) {\n    throw new Error('No root element present');\n  }\n\n  if (onStart) {\n    const maybePromise = onStart();\n    if (isPromise<void>(maybePromise)) {\n      await maybePromise;\n    }\n  }\n\n  const animatedElements: HTMLElement[] = Array.from(rootElement.querySelectorAll(elementSelector));\n  const animationExecutors = [];\n\n  for (const element of animatedElements) {\n    const animationPromiseEffect = animationPromiseGenerator(element, animation);\n    animationExecutors.push(animationPromiseEffect);\n  }\n\n  await Promise.all(animationExecutors);\n\n  if (onEnd) {\n    const maybePromise = onEnd();\n    if (isPromise<void>(maybePromise)) {\n      await maybePromise;\n    }\n  }\n}\n\nfunction isPlaying(sequenceIdentifier: SequenceIdentifier): boolean {\n  const sequence = sequences[sequenceIdentifier];\n\n  if (sequence === undefined) {\n    throw new Error(`Sequence ${sequenceIdentifier} has not been registered`);\n  }\n\n  return sequence.promise !== undefined;\n}\n\nfunction makeSequence(\n  sequenceSteps: SequenceStep[],\n  animationDefaults?: Partial<Omit<AnimationGeneratorType & EffectType, 'name'>>\n): AnimationSequence {\n  return {\n    steps: sequenceSteps.map((step) => step.map((animation) => ({ ...animationDefaults, ...animation }))),\n    currentStepIndex: 0,\n    running: false\n  };\n}\n\nexport default {\n  initialize,\n  play,\n  isPlaying,\n  register,\n  reset\n};\n\nexport { makeSequence };\n"],"mappings":"gkDAIA,IAAMA,cAAgB,SAACC,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAE,KAAED,SAAA,EAAG,IAAGA,EAClEH,EAAGK,MAAMC,MAAQ,GAAAC,QAAI,EAAIN,GAAYG,EAAE,IACzC,EAEA,IAAMI,YAAc,SAACR,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAE,KAAED,SAAA,EAAG,IAAGA,EAChEH,EAAGK,MAAMC,MAAQ,GAAAC,OAAGN,EAAWG,EAAE,IACnC,EAEA,IAAMK,wBAA0B,SAACT,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,EAAG,EAACA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,GAAI,IAAGA,EACvFX,EAAGK,MAAMO,MAAQ,QAAAL,OAAQN,EAAWG,EAAKM,EAAI,MAC7CV,EAAGK,MAAMQ,SAAW,UACtB,EAEA,IAAMC,uBAAyB,SAACd,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,EAAG,EAACA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,GAAI,IAAGA,EACtFX,EAAGK,MAAMU,KAAO,QAAAR,OAAQN,EAAWG,EAAKM,EAAI,MAC5CV,EAAGK,MAAMQ,SAAW,UACtB,EAEA,IAAMG,wBAA0B,SAAChB,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,GAAI,IAAGA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,EAAG,EAACA,EACvFX,EAAGK,MAAMU,KAAO,QAAAR,QAAS,EAAIN,GAAYS,EAAON,EAAE,MAClDJ,EAAGK,MAAMQ,SAAW,UACtB,EAEA,IAAMI,yBAA2B,SAACjB,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,GAAI,IAAGA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,EAAG,EAACA,EACxFX,EAAGK,MAAMO,MAAQ,QAAAL,QAAS,EAAIN,GAAYS,EAAON,EAAE,MACnDJ,EAAGK,MAAMQ,SAAW,UACtB,EAEA,IAAMK,iBAAmB,SAAClB,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,GAAI,IAAGA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,EAAG,EAACA,EAChFX,EAAGK,MAAMO,MAAQ,GAAAL,QAAI,EAAIN,GAAYS,EAAON,EAAE,KAChD,EAEA,IAAMe,gBAAkB,SAACnB,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,GAAI,IAAGA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,EAAG,EAACA,EAC/EX,EAAGK,MAAMU,KAAO,GAAAR,QAAI,EAAIN,GAAYS,EAAON,EAAE,KAC/C,EAEA,IAAMgB,gBAAkB,SAACpB,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,EAAG,EAACA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,GAAI,IAAGA,EAC/EX,EAAGK,MAAMO,MAAQ,GAAAL,OAAGN,EAAWG,EAAKM,EAAI,KAC1C,EAEA,IAAMW,eAAiB,SAACrB,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,EAAG,EAACA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,GAAI,IAAGA,EAC9EX,EAAGK,MAAMU,KAAO,GAAAR,OAAGN,EAAWG,EAAKM,EAAI,KACzC,EAEA,IAAMY,sBAAwB,SAACtB,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,GAAI,IAAGA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,EAAG,EAACA,EACrFX,EAAGK,MAAMO,MAAQ,QAAAL,QAAS,EAAIN,GAAYS,EAAON,EAAE,MACnDJ,EAAGK,MAAMQ,SAAW,OACtB,EAEA,IAAMU,qBAAuB,SAACvB,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,EAAG,EAACA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,GAAI,IAAGA,EACpFX,EAAGK,MAAMO,MAAQ,QAAAL,OAAQN,EAAWG,EAAKM,EAAI,MAC7CV,EAAGK,MAAMQ,SAAW,OACtB,EAEA,IAAMW,qBAAuB,SAACxB,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,GAAI,IAAGA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,EAAG,EAACA,EACpFX,EAAGK,MAAMU,KAAO,QAAAR,QAAS,EAAIN,GAAYS,EAAON,EAAE,MAClDJ,EAAGK,MAAMQ,SAAW,OACtB,EAEA,IAAMY,oBAAsB,SAACzB,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,EAAG,EAACA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,GAAI,IAAGA,EACnFX,EAAGK,MAAMU,KAAO,QAAAR,OAAQN,EAAWG,EAAKM,EAAI,MAC5CV,EAAGK,MAAMQ,SAAW,OACtB,EAEA,IAAMa,QAAU,SAAC1B,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,EAAG,EAACA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,EAAG,EAACA,EACpEX,EAAGK,MAAMsB,QAAU,GAAApB,QAAI,EAAIN,GAAYS,EAAOT,EAAWG,EAC3D,EAEA,IAAMwB,OAAS,SAAC5B,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,EAAG,EAACA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,EAAG,EAACA,EACnEX,EAAGK,MAAMsB,QAAU,GAAApB,OAAGN,EAAWG,GAAMH,EAAW,GAAKS,EACzD,EAEA,IAAMmB,gBAAkB,SAAC7B,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,EAAG,EAACA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,EAAG,EAACA,EAC5EX,EAAGK,MAAMyB,gBAAkB,iBAAAvB,QAAkB,EAAIN,GAAYS,EAAOT,EAAWG,EAAE,KACjFJ,EAAGK,MAAMsB,QAAU,GAAApB,OAAG,EAAIN,EAAWA,EAAWG,EAClD,EAEA,IAAM2B,eAAiB,SAAC/B,EAAiBC,EAAkBC,G,IAAEC,EAAAD,EAAAQ,OAAIP,SAAA,EAAG,EAACA,EAAEQ,EAAAT,EAAAE,KAAEO,SAAA,EAAG,EAACA,EAC3EX,EAAGK,MAAMyB,gBAAkB,iBAAAvB,OAAiBN,EAAWG,GAAMH,EAAW,GAAKS,EAAI,KACjFV,EAAGK,MAAMsB,QAAU,GAAApB,OAAGN,GAAYA,EAAW,GAAKS,EACpD,EAEA,IAAMsB,iBAAmB,CACvBlB,uBAAsBA,uBACtBG,yBAAwBA,yBACxBD,wBAAuBA,wBACvBP,wBAAuBA,wBACvBV,cAAaA,cACbS,YAAWA,YACXU,iBAAgBA,iBAChBC,gBAAeA,gBACfC,gBAAeA,gBACfC,eAAcA,eACdK,QAAOA,QACPE,OAAMA,OACNG,eAAcA,eACdF,gBAAeA,gBACfP,sBAAqBA,sBACrBC,qBAAoBA,qBACpBC,qBAAoBA,qBACpBC,oBAAmBA,qB,mXCvFrB,IAAMQ,WAAa,SAACjC,GAClBA,EAAGkC,gBAAgB,QACrB,EAEO,IAAMC,mBAAqB,SAChCC,GAEA,OAAOJ,iBAAiBI,EAC1B,EAGA,IAAMC,gBAAkB,CACtBC,aAAc,SAACC,GACb,QAASC,KAAKC,IAAID,KAAKE,GAAKH,GAAgB,GAAK,C,EAEnDI,cAAe,SAACJ,GACd,GAAIA,EAAe,GAAK,CACtB,OAAQ,EAAIA,EAAgB,C,KACvB,CACL,OAAQ,EAAI,GAAK,EAAIA,IAAiB,C,GAG1CK,OAAQ,SAACL,GACP,OAAOA,EAAe,GAAKA,EAAe,EAAIC,KAAKK,MAAMN,GAAgBA,C,EAE3EO,iBAAkB,SAACP,GACjB,OAAOQ,YAAYR,EAAc,GAAK,EAAK,EAAK,I,EAElDS,eAAgB,SAACT,GACf,OAAOQ,YAAYR,EAAc,GAAK,EAAK,EAAK,G,YAIpCU,0BACdjD,EACAkD,GAEQ,IAAAhD,EAA6DgD,EAASC,SAAtEA,EAAQjD,SAAA,EAAG,IAAGA,EAAEC,EAA6C+C,EAASE,sBAAtDA,EAAqBjD,SAAA,EAAG,MAAKA,EAAKkD,EAAMC,OAAKJ,EAA/D,sCAEN,OAAO,IAAIK,SAAc,SAACC,GACxB,IAAIC,EAEJ,IAAMC,EAAUC,YAAW,WACzBC,qBAAqBH,GACrBI,G,GACCV,EAAW,IAEd,SAASU,IACPC,EAAW9D,EAAI,EAAGqD,GAElBU,aAAaL,GACb,UAAWN,IAA0B,WAAY,CAC/C,IAAMY,EAAqCZ,EAAsBpD,GACjE,GAAIiE,UAAgBD,GAAe,CACjCA,EAAaE,MAAK,WAAM,OAAAV,GAAA,IACxB,M,OAEG,GAAIJ,IAA0B,KAAM,CACzCnB,WAAWjC,E,CAGbwD,G,CAGF,IAAMW,EAAQC,YAAYC,MAC1B,IAAMP,EAAa3B,mBAAmBkB,EAAOiB,MAC7C,SAASC,EAAQC,GACf,IAAMC,EAAiBpC,gBAAgBgB,EAAOoB,gBAAkB,UAChE,IAAIxE,EAAWwE,GAAgBD,EAAOL,GAAShB,GAC/ClD,EAAWuC,KAAKK,OAAO5C,EAAWyE,OAAOC,SAAW,KAAQ,IAE5D,IAAMC,EAAyB3E,GAAY,EAC3C,IAAM4E,EAAwB5E,EAAW,EAEzC,GAAI2E,EAAwB,CAC1B,OAAOf,G,CAGTC,EAAW9D,EAAIC,EAAUoD,GAEzB,GAAIwB,EAAuB,CACzBpB,EAAiBqB,cAAcC,sBAAsBR,E,EAIzDd,EAAiBqB,cAAcC,sBAAsBR,E,GAEzD,CAEA,SAASxB,YAAYiC,EAAWC,EAAiBC,EAAYC,EAAYC,GACvE,OACG,EAAIJ,IAAM,EAAIA,IAAM,EAAIA,GAAKC,EAC9B,GAAK,EAAID,IAAM,EAAIA,GAAKA,EAAIE,EAC5B,GAAK,EAAIF,GAAKA,EAAIA,EAAIG,EACtBH,EAAIA,EAAIA,EAAII,CAEhB,CC7EA,IAAMC,UAEF,GACJ,IAAIC,YAAkC,KAEtC,SAASC,WAAWC,GAClBF,YAAcE,CAChB,CAEA,SAASC,SAASC,EAAwCC,GACxDN,UAAUK,GAAsBC,CAClC,CAEA,SAASC,QACPC,OAAOC,KAAKT,WAAWU,SAAQ,SAACC,GAAQ,cAAOX,UAAUW,EAAjB,GAC1C,CAEA,SAAeC,KAAKP,G,2FACZQ,EAAWb,UAAUK,GAE3B,GAAIQ,IAAaC,UAAW,CAC1B,SAAO,IAAI5C,SAAQ,SAAC6C,EAAGC,GAAW,OAAAA,EAAO,IAAIC,MAAM,YAAA/F,OAAYmF,EAAkB,6BAA/C,I,CAGpC,IAAKQ,EAASK,QAAS,CACrBL,EAASM,QAAU,IAAIjD,SAAc,SAACC,EAAS6C,GAC7CH,EAAS1C,QAAU,WACjB0C,EAASK,QAAU,MACnB/C,G,EAGF0C,EAASG,OAAS,SAACI,GACjBP,EAASK,QAAU,MACnBF,EAAOI,E,EAGTP,EAASK,QAAU,KAEnBG,kCAAkCR,E,IAItC,SAAOA,EAASM,Q,OAGlB,SAASG,wBAAwBT,G,MAC/BA,EAASU,iBAAmB,GAC5BC,EAAAX,EAAS1C,WAAO,MAAAqD,SAAA,SAAAA,EAAAC,KAAAZ,EAAG,MACnBA,EAASM,QAAUL,SACrB,CAEA,SAAeO,kCAAkCR,G,8HAC/C,GAAIA,EAASU,kBAAoBV,EAASa,MAAMC,OAAQ,CACtDL,wBAAwBT,GACxB,S,CAGIe,EAAef,EAASa,MAAMb,EAASU,kBAEvCM,EAAW,GACjB,IAAAC,EAAA,EAAwBC,EAAAH,EAAAE,EAAAC,EAAAJ,OAAAG,IAAc,CAA3BjE,EAASkE,EAAAD,GAClBD,EAASG,KAAKC,iBAAiBpE,G,wCAI/B,SAAMK,QAAQgE,IAAIL,I,OAAlBhH,EAAAsH,O,+BAEAX,EAAAX,EAASG,UAAM,MAAAQ,SAAA,SAAAA,EAAAC,KAAAZ,EAAGuB,GAClB,U,OAGFvB,EAASU,kBAAoB,EAE7BjD,YAAW,WAAM,OAAA+C,kCAAkCR,EAAlC,GAA6C,G,iBAGhE,SAAeoB,iBAAiBpH,G,IAAEwH,EAAOxH,EAAAwH,QAAEC,EAAKzH,EAAAyH,MAAEzE,EAAShD,EAAAgD,UAAE0E,EAAe1H,EAAA0H,gB,gIAC1E,GAAItC,cAAgB,KAAM,CACxB,MAAM,IAAIgB,MAAM,0B,KAGdoB,EAAA,YACI1D,EAAe0D,I,IACjBzD,UAAgBD,GAAhB,YACF,SAAMA,G,OAAN7D,EAAAqH,O,iBAIEK,EAAkCC,MAAMpH,KAAK4E,YAAYyC,iBAAiBH,IAC1EI,EAAqB,GAE3B,IAAAb,EAAA,EAAsBc,EAAAJ,EAAAV,EAAAc,EAAAjB,OAAAG,IAAkB,CAA7B3B,EAAOyC,EAAAd,GACVe,EAAyBjF,0BAA0BuC,EAAStC,GAClE8E,EAAmBX,KAAKa,E,CAG1B,SAAM3E,QAAQgE,IAAIS,I,OAAlB7H,EAAAqH,O,IAEIG,EAAA,YACI3D,EAAe2D,I,IACjB1D,UAAgBD,GAAhB,YACF,SAAMA,G,OAAN7D,EAAAqH,O,kCAKN,SAASW,UAAUzC,GACjB,IAAMQ,EAAWb,UAAUK,GAE3B,GAAIQ,IAAaC,UAAW,CAC1B,MAAM,IAAIG,MAAM,YAAA/F,OAAYmF,EAAkB,4B,CAGhD,OAAOQ,EAASM,UAAYL,SAC9B,CAEA,SAASiC,aACPC,EACAC,GAEA,MAAO,CACLvB,MAAOsB,EAAcE,KAAI,SAACC,GAAS,OAAAA,EAAKD,KAAI,SAACrF,GAAS,OAAA2C,OAAA4C,OAAA5C,OAAA4C,OAAA,GAAWH,GAAsBpF,EAAjC,GAAnB,IACnC0D,iBAAkB,EAClBL,QAAS,MAEb,CAEA,IAAAmC,iBAAe,CACbnD,WAAUA,WACVU,KAAIA,KACJkC,UAASA,UACT1C,SAAQA,SACRG,MAAKA,c"}