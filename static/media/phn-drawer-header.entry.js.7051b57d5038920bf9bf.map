{"version":3,"names":["drawerHeaderCss","DrawerHeader","class_1","prototype","componentWillLoad","this","waitForComponentsToLoad","componentsOnReady","el","Timeout","_a","sent","showSkeleton","receivedContent","sendDataLayerEvent","globalDataLayerService","pushDataLayerEvent","EventActions","MENU_CLOSE_CLICK","componentClick","clickElementId","clickElementName","clickElementType","ClickElementTypes","Button","targetElement","componentDisplay","displayElementId","analyticsManager","calculateDisplayElementId","displayElementType","calculateDisplayElementType","activeRoutingKey","ElementTypes","closeButton","displayElementName","render","_this","topLevelRoutingKey","findTopLevelRoutingKey","isMobile","isDesktop","breakpoint","displayHeadlineContent","undefined","getHeadlineText","navContentStore","state","modelType","includes","split","subtext","getSubtext","locale","h","class","showBackButton","Fragment","onClick","clickDrawerHeaderBack","emit","analyticsId","backButtonAnalyticsId","text","backButtonText","style","display","isString","icon","hideLabel","aria","size","clickDrawerHeaderClose"],"sources":["src/components/drawer-header/drawer-header.scss?tag=phn-drawer-header&encapsulation=scoped","src/components/drawer-header/drawer-header.tsx"],"sourcesContent":["@import '../../scss';\n\n:host {\n  display: block;\n}\n\n.drawer-header {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.heading-items {\n  margin-bottom: p-px-to-rem(4px);\n  align-items: center;\n}\n\n.skeleton-headline {\n  width: p-px-to-rem(150px);\n  height: p-px-to-rem(24px);\n  background: $pds-theme-light-contrast-low;\n  border-radius: 4px;\n}\n\n.button-skeleton {\n  margin-left: p-px-to-rem(8px);\n  border-radius: p-px-to-rem(4px);\n  height: p-px-to-rem(24px);\n  width: p-px-to-rem(24px);\n  background: $pds-theme-light-contrast-low;\n}\n","import { Component, Element, Event, EventEmitter, Fragment, h, Prop, State } from '@stencil/core';\nimport globalDataLayerService from '../../services/analytics/global-data-layer-service';\nimport { ClickElementTypes, ElementTypes, EventActions } from '../../utility/constants';\nimport analyticsManager from '../../services/analytics/analytics-manager';\nimport { navContentStore } from '../../state/nav-content-store';\nimport { isDesktop, isString } from '../../utility/helper';\nimport { getHeadlineText, getSubtext } from '../../services/menu-items-service';\nimport { findTopLevelRoutingKey } from '../../entities/routing-key';\nimport { componentsOnReady } from '../../utility/ready';\nimport { Timeout } from '../../utility/timeout';\n\n@Component({\n  tag: 'phn-drawer-header',\n  styleUrl: 'drawer-header.scss',\n  scoped: true\n})\nexport class DrawerHeader {\n  @Prop() backButtonText = '';\n  @Prop() backButtonAnalyticsId!: string;\n  @Prop() showBackButton = false;\n  @Prop() activeRoutingKey!: string;\n  @Prop() breakpoint!: number;\n  @Prop() receivedContent = false;\n  @Prop() locale?: string;\n\n  @State() showSkeleton = true;\n\n  @Event() clickDrawerHeaderBack!: EventEmitter<void>;\n  @Event() clickDrawerHeaderClose!: EventEmitter<void>;\n\n  @Element() el!: HTMLPhnDrawerHeaderElement;\n\n  componentWillLoad(): void {\n    this.waitForComponentsToLoad();\n  }\n\n  private async waitForComponentsToLoad() {\n    await componentsOnReady(this.el, new Timeout(5000));\n    this.showSkeleton = !this.receivedContent;\n  }\n\n  private sendDataLayerEvent() {\n    globalDataLayerService.pushDataLayerEvent(EventActions.MENU_CLOSE_CLICK, {\n      componentClick: {\n        clickElementId: 'mainmenu.drawer.close',\n        clickElementName: 'X',\n        clickElementType: ClickElementTypes.Button,\n        targetElement: 'level-0'\n      },\n      componentDisplay: {\n        displayElementId: analyticsManager.calculateDisplayElementId(),\n        displayElementType: analyticsManager.calculateDisplayElementType(\n          this.activeRoutingKey,\n          ElementTypes.closeButton\n        ),\n        displayElementName: 'X'\n      }\n    });\n  }\n\n  render(): HTMLPhnDrawerHeaderElement {\n    const topLevelRoutingKey = findTopLevelRoutingKey(this.activeRoutingKey);\n    const isMobile = !isDesktop(this.breakpoint);\n    const displayHeadlineContent =\n      topLevelRoutingKey !== undefined\n        ? getHeadlineText(navContentStore.state, this.activeRoutingKey, topLevelRoutingKey)\n        : '';\n\n    const modelType = displayHeadlineContent.includes('mainmenu.') ? displayHeadlineContent.split('mainmenu.')[1] : '';\n    const subtext = getSubtext(topLevelRoutingKey, this.activeRoutingKey, this.locale);\n    return (\n      <div class=\"drawer-header\">\n        {this.showBackButton ? (\n          <Fragment>\n            <phn-back-button\n              class=\"back-button\"\n              onClick={() => {\n                this.clickDrawerHeaderBack.emit();\n              }}\n              analyticsId={this.backButtonAnalyticsId}\n              text={isMobile ? '' : this.backButtonText}\n              activeRoutingKey={this.activeRoutingKey}\n              style={!this.showSkeleton ? {} : { display: 'none' }}\n            />\n            {this.showSkeleton ? <div class=\"button-skeleton\" /> : null}\n          </Fragment>\n        ) : (\n          <div class=\"spacer\" />\n        )}\n\n        {isMobile ? (\n          modelType === '' ? (\n            <Fragment>\n              {this.showSkeleton && this.showBackButton ? <div class=\"skeleton-headline\"></div> : null}\n              <phn-heading\n                text={displayHeadlineContent}\n                style={this.showSkeleton || !isString(displayHeadlineContent) ? { display: 'none' } : {}}\n                class=\"heading-items\"\n                subtext={subtext}\n              />\n            </Fragment>\n          ) : (\n            <Fragment>\n              {this.showSkeleton ? <div class=\"skeleton-headline\"></div> : null}\n              <phn-signature-heading text={modelType} subtext={subtext} />\n            </Fragment>\n          )\n        ) : null}\n\n        <Fragment>\n          <phn-p-button-pure\n            class=\"close-button\"\n            icon=\"close\"\n            hideLabel=\"true\"\n            aria={{ 'aria-label': 'close dialog' }}\n            size=\"small\"\n            style={!this.showSkeleton ? {} : { display: 'none' }}\n            data-test-id=\"close-button\"\n            onClick={() => {\n              this.sendDataLayerEvent();\n              this.clickDrawerHeaderClose.emit();\n            }}\n          >\n            Close Dialog\n          </phn-p-button-pure>\n          {this.showSkeleton ? <div class=\"button-skeleton\" /> : null}\n        </Fragment>\n      </div>\n    );\n  }\n}\n"],"mappings":"2yEAAA,IAAMA,gBAAkB,8wF,ICgBXC,aAAY,W,2MACE,G,yDAEA,M,+EAGC,M,wCAGF,I,CAOxBC,EAAAC,UAAAC,kBAAA,WACEC,KAAKC,yB,EAGOJ,EAAAC,UAAAG,wBAAN,W,4GACN,SAAMC,kBAAkBF,KAAKG,GAAI,IAAIC,QAAQ,O,OAA7CC,EAAAC,OACAN,KAAKO,cAAgBP,KAAKQ,gB,kBAGpBX,EAAAC,UAAAW,mBAAA,WACNC,uBAAuBC,mBAAmBC,aAAaC,iBAAkB,CACvEC,eAAgB,CACdC,eAAgB,wBAChBC,iBAAkB,IAClBC,iBAAkBC,kBAAkBC,OACpCC,cAAe,WAEjBC,iBAAkB,CAChBC,iBAAkBC,iBAAiBC,4BACnCC,mBAAoBF,iBAAiBG,4BACnC1B,KAAK2B,iBACLC,aAAaC,aAEfC,mBAAoB,M,EAK1BjC,EAAAC,UAAAiC,OAAA,eAAAC,EAAAhC,KACE,IAAMiC,EAAqBC,uBAAuBlC,KAAK2B,kBACvD,IAAMQ,GAAYC,UAAUpC,KAAKqC,YACjC,IAAMC,EACJL,IAAuBM,UACnBC,gBAAgBC,gBAAgBC,MAAO1C,KAAK2B,iBAAkBM,GAC9D,GAEN,IAAMU,EAAYL,EAAuBM,SAAS,aAAeN,EAAuBO,MAAM,aAAa,GAAK,GAChH,IAAMC,EAAUC,WAAWd,EAAoBjC,KAAK2B,iBAAkB3B,KAAKgD,QAC3E,OACEC,EAAA,OAAKC,MAAM,iBACRlD,KAAKmD,eACJF,EAACG,SAAQ,KACPH,EAAA,mBACEC,MAAM,cACNG,QAAS,WACPrB,EAAKsB,sBAAsBC,M,EAE7BC,YAAaxD,KAAKyD,sBAClBC,KAAMvB,EAAW,GAAKnC,KAAK2D,eAC3BhC,iBAAkB3B,KAAK2B,iBACvBiC,OAAQ5D,KAAKO,aAAe,GAAK,CAAEsD,QAAS,UAE7C7D,KAAKO,aAAe0C,EAAA,OAAKC,MAAM,oBAAuB,MAGzDD,EAAA,OAAKC,MAAM,WAGZf,EACCQ,IAAc,GACZM,EAACG,SAAQ,KACNpD,KAAKO,cAAgBP,KAAKmD,eAAiBF,EAAA,OAAKC,MAAM,sBAA6B,KACpFD,EAAA,eACES,KAAMpB,EACNsB,MAAO5D,KAAKO,eAAiBuD,SAASxB,GAA0B,CAAEuB,QAAS,QAAW,GACtFX,MAAM,gBACNJ,QAASA,KAIbG,EAACG,SAAQ,KACNpD,KAAKO,aAAe0C,EAAA,OAAKC,MAAM,sBAA6B,KAC7DD,EAAA,yBAAuBS,KAAMf,EAAWG,QAASA,KAGnD,KAEJG,EAACG,SAAQ,KACPH,EAAA,qBACEC,MAAM,eACNa,KAAK,QACLC,UAAU,OACVC,KAAM,CAAE,aAAc,gBACtBC,KAAK,QACLN,OAAQ5D,KAAKO,aAAe,GAAK,CAAEsD,QAAS,QAAQ,eACvC,eACbR,QAAS,WACPrB,EAAKvB,qBACLuB,EAAKmC,uBAAuBZ,M,GAC7B,gBAIFvD,KAAKO,aAAe0C,EAAA,OAAKC,MAAM,oBAAuB,M,gIA7GxC,G"}