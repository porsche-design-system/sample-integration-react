{"version":3,"names":["componentsOnReady","parent","timeout","selectors","_i","arguments","length","waitForElement","selector","__awaiter","_this","windowService","el","_a","sent","componentOnReady","waitForElements","map","timer","Promise","resolve","set","__generator","this","race","all"],"sources":["src/utility/ready.ts"],"sourcesContent":["import { HTMLStencilElement } from '@stencil/core/internal';\nimport windowService from '../services/window-service';\nimport { Timeout } from './timeout';\n\nexport async function componentsOnReady(\n  parent: HTMLElement | null,\n  timeout: Timeout,\n  ...selectors: string[]\n): Promise<HTMLElement[] | null> {\n  if (parent === null) {\n    return null;\n  }\n  const waitForElement = async (selector?: string) => {\n    const el = await windowService.waitForElement(parent, selector);\n\n    if (typeof (el as HTMLStencilElement)?.componentOnReady === 'function') {\n      await (el as HTMLStencilElement).componentOnReady();\n    }\n\n    return el;\n  };\n\n  const waitForElements = selectors.length > 0 ? selectors.map(waitForElement) : [waitForElement()];\n\n  const timer = new Promise<null>((resolve) => timeout.set(async () => resolve(null)));\n  return Promise.race([Promise.all(waitForElements), timer]);\n}\n"],"mappings":"2gDAIO,SAAeA,kBACpBC,EACAC,GACA,IAAAC,EAAA,G,IAAA,IAAAC,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAsB,CAAtBD,EAAAC,EAAA,GAAAC,UAAAD,E,2GAEA,GAAIH,IAAW,KAAM,CACnB,SAAO,K,CAEHM,EAAiB,SAAOC,GAAiB,OAAAC,UAAAC,OAAA,qB,kEAClC,SAAMC,cAAcJ,eAAeN,EAAQO,I,OAAhDI,EAAKC,EAAAC,O,YAECF,IAAyB,MAAzBA,SAAE,SAAFA,EAA2BG,oBAAqB,YAAxD,YACF,SAAOH,EAA0BG,oB,OAAjCF,EAAAC,O,iBAGF,SAAOF,G,QAGHI,EAAkBb,EAAUG,OAAS,EAAIH,EAAUc,IAAIV,GAAkB,CAACA,KAE1EW,EAAQ,IAAIC,SAAc,SAACC,GAAY,OAAAlB,EAAQmB,KAAI,kBAAAZ,UAAAC,OAAA,4BAAAY,YAAAC,MAAA,SAAAV,GAAY,SAAAO,EAAQ,M,SAAhC,IAC7C,SAAOD,QAAQK,KAAK,CAACL,QAAQM,IAAIT,GAAkBE,I"}