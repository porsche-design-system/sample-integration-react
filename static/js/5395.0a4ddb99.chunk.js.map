{"version":3,"file":"static/js/5395.0a4ddb99.chunk.js","mappings":"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","sources":["../node_modules/@porschehn/navigation/dist/esm-es5/src/services/animations/animation-manager.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/utility/constants/animations.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/state/dealer-search-results-store.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/state/router-store.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/entities/routing-key.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/components/single-drawer/animations/animations-controller.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/services/routing-manager.ts"],"sourcesContent":["import { AnimationSequencesType } from '../../utility/constants';\nimport { getHTMLElement, getRootElement, isPromise } from '../../utility/helper';\n\nexport type AnimationStartsCallbacks = {\n  onAnimationStarts?: (() => Promise<unknown>) | (() => void);\n};\n\nexport type AnimationEndsCallbacks = {\n  onAnimationEnds?: (() => Promise<unknown>) | (() => void);\n};\n\nexport type AnimationStatusCallbacks = AnimationStartsCallbacks & AnimationEndsCallbacks;\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type SequenceIdentifier = AnimationSequencesType | (string & {});\n\nexport interface NaviAnimation {\n  animation: AnimationGeneratorType;\n  elementSelector: string;\n  onStart?: (() => Promise<unknown>) | (() => unknown);\n  onEnd?: (() => Promise<unknown>) | (() => unknown);\n}\n\nexport type SequenceStep = Array<NaviAnimation>;\n\nexport type AnimationSequence = {\n  steps: Array<SequenceStep>;\n  currentStepIndex: number;\n  running: boolean;\n  resolve?: (value: unknown) => void;\n  reject?: (reason?: unknown) => void;\n  promise?: Promise<void>;\n};\n\nexport type AnimationGeneratorType = {\n  className: string;\n  cleanUpBeforeAnimation?: ((el: HTMLElement) => Promise<void>) | ((el: HTMLElement) => void) | boolean;\n  cleanUpAfterAnimation?: ((el: HTMLElement) => Promise<void>) | ((el: HTMLElement) => void) | boolean;\n};\n\nconst animationRegistry: Record<\n  string,\n  {\n    promise: Promise<void>;\n    resolve: (value: void) => void;\n    reject: (reason?: unknown) => void;\n    animation: AnimationGeneratorType;\n    timeout: NodeJS.Timeout;\n  }\n> = {};\n\nconst sequences: {\n  [key in SequenceIdentifier]?: AnimationSequence | undefined;\n} = {};\n\nconst animationTimeoutDurationMs = 1000;\n\nfunction initialize(): void {\n  getRootElement().addEventListener('transitionend', animationEndListener);\n  getRootElement().addEventListener('animationend', animationEndListener);\n}\n\nfunction register(sequenceIdentifier: SequenceIdentifier, animationSequence: AnimationSequence): void {\n  sequences[sequenceIdentifier] = animationSequence;\n}\n\nfunction reset(): void {\n  Object.keys(sequences).forEach((key) => delete sequences[key]);\n}\n\nasync function play(sequenceIdentifier: SequenceIdentifier): Promise<unknown> {\n  const sequence = sequences[sequenceIdentifier];\n\n  if (sequence === undefined) {\n    return new Promise((_, reject) => reject(new Error(`Sequence ${sequenceIdentifier} has not been registered`)));\n  }\n\n  if (!sequence.running) {\n    sequence.promise = new Promise<void>((resolve, reject) => {\n      sequence.resolve = () => {\n        sequence.running = false;\n        resolve();\n      };\n\n      sequence.reject = (value: unknown) => {\n        sequence.running = false;\n        reject(value);\n      };\n\n      sequence.running = true;\n\n      applyCurrentAnimationSequenceStep(sequence);\n    });\n  }\n\n  return sequence.promise;\n}\n\nasync function applyCurrentAnimationSequenceStep(sequence: AnimationSequence) {\n  if (sequence.currentStepIndex >= sequence.steps.length) {\n    finishAnimationSequence(sequence);\n    return;\n  }\n\n  const sequenceStep = sequence.steps[sequence.currentStepIndex];\n\n  const promises = [];\n  for (const animation of sequenceStep) {\n    promises.push(executeAnimation(animation));\n  }\n\n  try {\n    await Promise.all(promises);\n  } catch (error) {\n    sequence.reject?.(error);\n    return;\n  }\n\n  sequence.currentStepIndex += 1;\n\n  setTimeout(() => applyCurrentAnimationSequenceStep(sequence), 0);\n}\n\nfunction finishAnimationSequence(sequence: AnimationSequence) {\n  sequence.currentStepIndex = 0;\n  sequence.resolve?.(null);\n  sequence.promise = undefined;\n}\n\nfunction animationEndListener(event: AnimationEvent | TransitionEvent): void {\n  const target = getHTMLElement(event.target);\n\n  if (target === null) {\n    throw new Error(`${event.type} event target is null`);\n  }\n\n  const id = target.dataset.phnAmId;\n\n  if (id !== undefined && id !== null) {\n    finishAnimationPromise(id, target);\n  }\n}\n\nasync function executeAnimation({ onStart, onEnd, animation, elementSelector }: NaviAnimation): Promise<void> {\n  if (onStart) {\n    const maybePromise = onStart();\n    if (isPromise<void>(maybePromise)) {\n      await maybePromise;\n    }\n  }\n\n  const animatedElements: HTMLElement[] = Array.from(getRootElement().querySelectorAll(elementSelector));\n  const animationExecutors = [];\n\n  for (const element of animatedElements) {\n    const animationPromiseEffect = generateAndCleanUpAnimationPromise(animationPromiseGenerator)(element, animation);\n    animationExecutors.push(animationPromiseEffect);\n  }\n\n  await Promise.all(animationExecutors);\n  if (onEnd) {\n    const maybePromise = onEnd();\n    if (isPromise<void>(maybePromise)) {\n      await maybePromise;\n    }\n  }\n}\n\nfunction generateAndCleanUpAnimationPromise(\n  animationPromiseGenerator: (element: HTMLElement, animation: AnimationGeneratorType) => Promise<void>\n): (element: HTMLElement, animation: AnimationGeneratorType) => Promise<void> {\n  return async function (element: HTMLElement, animation: AnimationGeneratorType): Promise<void> {\n    const { cleanUpBeforeAnimation, cleanUpAfterAnimation } = animation;\n\n    const animationPromise = animationPromiseGenerator(element, animation);\n\n    if (typeof cleanUpBeforeAnimation === 'function') {\n      const maybePromise: void | Promise<void> = cleanUpBeforeAnimation(element);\n      if (isPromise<void>(maybePromise)) {\n        await maybePromise;\n      }\n    }\n\n    await animationPromise;\n\n    if (typeof cleanUpAfterAnimation === 'function') {\n      const maybePromise: void | Promise<void> = cleanUpAfterAnimation(element);\n      if (isPromise<void>(maybePromise)) {\n        await maybePromise;\n      }\n    }\n\n    if (cleanUpAfterAnimation !== false) {\n      // only not remove class if cleanUpAfterAnimation is explicitely set to false\n      element.classList.remove(animation.className);\n    }\n  };\n}\n\nconst animationPromiseGenerator = (element: HTMLElement, animation: AnimationGeneratorType): Promise<void> => {\n  const id = Math.floor(Math.random() * 1e7);\n\n  element.classList.add(animation.className);\n  element.dataset.phnAmId = id.toString();\n\n  let resolve!: (value: void) => void;\n  let reject!: (reason?: unknown) => void;\n  let timeout!: NodeJS.Timeout;\n  const promise = new Promise<void>((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n\n    timeout = setTimeout(() => {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Animation with className ${animation.className} didn't finish after ${animationTimeoutDurationMs}ms. Forcefully finishing animation and continuing with the rest of the sequence.`\n      );\n      finishAnimationPromise(String(id), element);\n    }, animationTimeoutDurationMs);\n  });\n\n  animationRegistry[id] = { animation, resolve, reject, promise, timeout };\n\n  return promise;\n};\n\nfunction finishAnimationPromise(phnAmId: string, target: HTMLElement): void {\n  const { resolve, timeout } = animationRegistry[phnAmId];\n\n  clearTimeout(timeout);\n  delete animationRegistry[phnAmId];\n  delete target.dataset.phnAmId;\n\n  resolve();\n}\n\nfunction isPlaying(sequenceIdentifier: SequenceIdentifier): boolean {\n  const sequence = sequences[sequenceIdentifier];\n\n  if (sequence === undefined) {\n    throw new Error(`Sequence ${sequenceIdentifier} has not been registered`);\n  }\n\n  return sequence.promise !== undefined;\n}\n\nfunction makeSequence(\n  sequenceSteps: SequenceStep[],\n  animationDefaults?: Partial<Omit<AnimationGeneratorType, 'name'>>\n): AnimationSequence {\n  return {\n    steps: sequenceSteps.map((step) => step.map((animation) => ({ ...animationDefaults, ...animation }))),\n    currentStepIndex: 0,\n    running: false\n  };\n}\n\nexport default {\n  initialize,\n  play,\n  isPlaying,\n  register,\n  reset\n};\n\nexport { makeSequence };\n","export const AnimationSequences = {\n  OPEN_DOUBLE_DRAWER: 'openDoubleDrawer',\n  CLOSE_DOUBLE_DRAWER: 'closeDoubleDrawer',\n  TRANSITION_SAME_LEVEL_DOUBLE_DRAWER: 'transitionSameLevelDoubleDrawer',\n  TRANSITION_SAME_LEVEL_DOUBLE_DRAWER_REVERSE: 'transitionSameLevelDoubleDrawerReverse',\n  TRANSITION_NEXT_LEVEL_DOUBLE_DRAWER: 'transitionNextLevelDoubleDrawer',\n  TRANSITION_PREVIOUS_LEVEL_DOUBLE_DRAWER: 'transitionPreviousLevelDoubleDrawer',\n  OPEN_SINGLE_DRAWER: 'openSingleDrawer',\n  CLOSE_SINGLE_DRAWER: 'closeSingleDrawer',\n  TRANSITION_NEXT_LEVEL_SINGLE_DRAWER: 'transitionNextLevelSingleDrawer',\n  TRANSITION_PREVIOUS_LEVEL_SINGLE_DRAWER: 'transitionPreviousLevelSingleDrawer'\n} as const;\n\nexport type AnimationSequencesType = (typeof AnimationSequences)[keyof typeof AnimationSequences];\n\nexport const AnimationDurations = {\n  highlight: 200,\n  drawerContent: 250,\n  drawer: 400,\n  backdrop: 400,\n  drawerOpen: 600\n};\n","import { createStore } from '@stencil/store';\nimport { PPNDealerSearchResult } from '../entities/dealer-response';\nimport windowService from '../services/window-service';\nimport { SAVED_DEALER_COOKIE } from '../utility/constants';\n\nexport interface DealerSearchResults {\n  searchTerm: string;\n  results: string[] | null;\n  savedDealerCookie: SavedDealerCookie | null;\n  ppnDealers: { [dealerId: string]: PPNDealerSearchResult };\n  dealersOfRegion: any;\n}\n\nexport interface SavedDealerCookie {\n  id: string;\n  latitude: number;\n  longitude: number;\n}\n\nexport const dealerSearchResultsStore = createStore<DealerSearchResults>({\n  searchTerm: '',\n  results: null,\n  savedDealerCookie: readDealerCookie(),\n  ppnDealers: {},\n  dealersOfRegion: { regions: [] }\n});\n\ndealerSearchResultsStore.onChange('savedDealerCookie', (newValue) => {\n  windowService.setCookie(SAVED_DEALER_COOKIE, JSON.stringify(newValue));\n});\n\nfunction readDealerCookie(): SavedDealerCookie | null {\n  try {\n    return JSON.parse(windowService.getCookie(SAVED_DEALER_COOKIE));\n  } catch (err) {\n    return null;\n  }\n}\n","import { createStore } from '@stencil/store';\n\ninterface RouterStore {\n  routingKeyHistory: string[];\n  routingKeyPointer: number;\n  animatingPointer: number;\n  initialRoutingKeyHistory: string[] | null;\n  initialRoutingKeyPointer: number | null;\n  // status: 'CLOSED' | 'OPENED';\n}\n\nexport const routerStore = createStore<RouterStore>({\n  routingKeyHistory: [],\n  routingKeyPointer: -1,\n  animatingPointer: -1,\n  initialRoutingKeyHistory: null,\n  initialRoutingKeyPointer: null\n});\n","import { getString, isString } from '../utility/helper';\n\nexport const RoutingKeys = {\n  MAIN_MENU: 'mainmenu',\n  DEALER_SEARCH: 'find_a_dealer',\n  MORE: 'more',\n  SHOP: 'shop',\n  SERIES: 'series',\n  MY_PORSCHE: 'my_porsche',\n  VEHICLE_PURCHASE: 'vehicle_purchase',\n  EXPERIENCE: 'experience',\n  SERVICES: 'services',\n  MODELS: 'models'\n} as const;\n\nexport enum RoutingKeyPointers {\n  LEVEL_ZERO = -1,\n  LEVEL_ONE = 0,\n  LEVEL_TWO = 1\n}\n\nexport type RoutingKey = (typeof RoutingKeys)[keyof typeof RoutingKeys];\n\nexport interface RoutingKeyWithClick {\n  initialRoutingKey: RoutingKey | string;\n  isKeyboardClick: boolean;\n}\n\nexport function constructRoutingKey(...args: string[]): string {\n  return args\n    .reduce<string[]>((segments, arg) => [...segments, ...getString(arg).split('/')], [])\n    .filter(Boolean)\n    .join('/');\n}\n\nexport function findTopLevelRoutingKey(activeRoutingKey: string): RoutingKey | undefined {\n  if (isString(activeRoutingKey)) {\n    return Object.values(RoutingKeys).find((routingKey) => activeRoutingKey.startsWith(routingKey));\n  }\n}\n\nexport function getSeriesRoutingKey(...args: string[]): string {\n  return constructRoutingKey(RoutingKeys.SERIES, ...args);\n}\n\nexport function getModelsRoutingKey(...args: string[]): string {\n  return constructRoutingKey(RoutingKeys.MODELS, ...args);\n}\n\nexport function getDealerDetailsRoutingKey(...args: string[]): string {\n  return constructRoutingKey(RoutingKeys.DEALER_SEARCH, ...args);\n}\n\nexport function getMyPorscheRoutingKey(...args: string[]): string {\n  return constructRoutingKey(RoutingKeys.MY_PORSCHE, ...args);\n}\n\nexport function getVehiclePurchaseRoutingKey(...args: string[]): string {\n  return constructRoutingKey(RoutingKeys.VEHICLE_PURCHASE, ...args);\n}\n\nexport function getLastRoutingSegment(routingKey: string): string {\n  return routingKey.split('/').slice(-1)[0];\n}\n\nexport function removeLastRoutingSegment(routingKey: string): string {\n  return routingKey.split('/').slice(0, -1).join('/');\n}\n\nexport function determineMainDrawerLevel(activeRoutingKey: string): number {\n  const topLevelRoutingKey = findTopLevelRoutingKey(activeRoutingKey);\n  switch (topLevelRoutingKey) {\n    case RoutingKeys.MAIN_MENU: {\n      return 1;\n    }\n    case activeRoutingKey: {\n      return 2;\n    }\n    default: {\n      return activeRoutingKey.split('/').length + 1;\n    }\n  }\n}\n\nexport function getPreviousRoutingKey(routingKey: string): string {\n  const previousRoutingKey = removeLastRoutingSegment(routingKey);\n  if (!isString(previousRoutingKey)) {\n    return RoutingKeys.MAIN_MENU;\n  }\n\n  return previousRoutingKey;\n}\n","import animationManager from '../../../services/animations/animation-manager';\nimport { AnimationSequences, AnimationSequencesType } from '../../../utility/constants';\nimport {\n  getAnimatedRoute,\n  getCurrentRoute,\n  isAnimatingBackward,\n  isAnimatingForward,\n  isClosing,\n  isOpening\n} from '../../../services/routing-manager';\n\nexport const handleAnimationRouting = (): AnimationRouting => {\n  const actions: Record<Operations, () => AnimationRouting> = {\n    OPENING: openingAction,\n    CLOSING: closingAction,\n    FORWARD: forwardAction,\n    BACKWARDS: backwardAction,\n    UNCHANGED: unchangedAction\n  };\n\n  const conditionToExecute = getSingleDrawerAction();\n\n  return actions[conditionToExecute]();\n};\n\ntype Operations = 'OPENING' | 'CLOSING' | 'FORWARD' | 'BACKWARDS' | 'UNCHANGED';\nfunction getSingleDrawerAction(): Operations {\n  if (isOpening()) {\n    return 'OPENING';\n  }\n  if (isClosing()) {\n    return 'CLOSING';\n  }\n  if (isAnimatingForward()) {\n    return 'FORWARD';\n  }\n  if (isAnimatingBackward()) {\n    return 'BACKWARDS';\n  }\n  return 'UNCHANGED';\n}\n\ntype AnimationRouting = { nextRoute: string; currentRoute: string };\n\nconst openingAction = (): AnimationRouting => {\n  animationManager.play(AnimationSequences.OPEN_SINGLE_DRAWER);\n\n  return {\n    nextRoute: '',\n    currentRoute: getCurrentRoute()\n  };\n};\n\nconst closingAction = (): AnimationRouting => {\n  animationManager.play(AnimationSequences.CLOSE_SINGLE_DRAWER).then(() => {\n    // TODO: Focus on burger button if using the keyboard\n  });\n\n  return {\n    nextRoute: getCurrentRoute() || '',\n    currentRoute: getAnimatedRoute() || ''\n  };\n};\n\nconst forwardAction = (): AnimationRouting => {\n  setTimeout(() => {\n    animationManager.play(AnimationSequences.TRANSITION_NEXT_LEVEL_SINGLE_DRAWER);\n  });\n\n  return {\n    nextRoute: getCurrentRoute() ?? '',\n    currentRoute: getAnimatedRoute() ?? ''\n  };\n};\n\nconst backwardAction = (): AnimationRouting => {\n  if (getCurrentRoute() !== '') {\n    setTimeout(() => {\n      animationManager.play(AnimationSequences.TRANSITION_PREVIOUS_LEVEL_SINGLE_DRAWER);\n    });\n  }\n\n  return {\n    nextRoute: getAnimatedRoute() ?? '',\n    currentRoute: getCurrentRoute() ?? ''\n  };\n};\n\nconst unchangedAction = (): AnimationRouting => {\n  return {\n    nextRoute: '',\n    currentRoute: getCurrentRoute()\n  };\n};\n\nexport const isPlayingSingleDrawerAnimation = (): boolean => {\n  try {\n    const singleDrawerAnimationSequences: AnimationSequencesType[] = [\n      AnimationSequences.OPEN_SINGLE_DRAWER,\n      AnimationSequences.CLOSE_SINGLE_DRAWER,\n      AnimationSequences.TRANSITION_NEXT_LEVEL_SINGLE_DRAWER,\n      AnimationSequences.TRANSITION_PREVIOUS_LEVEL_SINGLE_DRAWER\n    ];\n\n    return singleDrawerAnimationSequences.some((sequence) => {\n      try {\n        return animationManager.isPlaying(sequence);\n      } catch {\n        return false;\n      }\n    });\n  } catch (e) {\n    return false;\n  }\n};\n","import { routerStore } from '../state/router-store';\nimport { constructRoutingKey, findTopLevelRoutingKey, RoutingKeyPointers, RoutingKeys } from '../entities/routing-key';\nimport { dispatchEvent, isDesktop } from '../utility/helper';\nimport windowService from './window-service';\nimport { dealerSearchResultsStore } from '../state/dealer-search-results-store';\nimport { isPlayingSingleDrawerAnimation } from '../components/single-drawer/animations/animations-controller';\n\nexport const getCurrentRoute = (): string => {\n  const { routingKeyHistory, routingKeyPointer } = routerStore.state;\n  return routingKeyHistory[routingKeyPointer] || '';\n};\n\nexport const getAnimatedRoute = (): string => {\n  const { routingKeyHistory, animatingPointer } = routerStore.state;\n  return routingKeyHistory[animatingPointer] || '';\n};\n\nexport const goTo = (...routes: string[]): void => {\n  const newHistory = [RoutingKeys.MAIN_MENU, ...routes];\n  routerStore.state.routingKeyPointer = routes.length;\n  routerStore.state.routingKeyHistory = newHistory;\n};\n\nexport const back = (): void => {\n  if (!isPlayingSingleDrawerAnimation()) {\n    if (findTopLevelRoutingKey(getCurrentRoute()) === RoutingKeys.DEALER_SEARCH) {\n      dealerSearchResultsStore.state.savedDealerCookie = null;\n    }\n    routerStore.state.routingKeyPointer = routerStore.state.routingKeyPointer - 1;\n  }\n};\n\nexport const pop = (): void => {\n  if (isNavigatingBackwards()) routerStore.state.routingKeyHistory.pop();\n};\n\nexport const addRoute = (newRoute: string[]): void => {\n  if (isDesktop(windowService.getBreakpoint())) {\n    dispatchEvent('phn-router', 'mobileMenuItemClick', {\n      bubbles: true,\n      cancelable: false,\n      detail: [constructRoutingKey(getCurrentRoute(), ...newRoute)]\n    });\n  } else {\n    const newHistory = [...routerStore.state.routingKeyHistory, constructRoutingKey(getCurrentRoute(), ...newRoute)];\n    routerStore.state.routingKeyPointer = newHistory.length - 1;\n    routerStore.state.routingKeyHistory = newHistory;\n  }\n};\n\nexport const reset = (): void => {\n  routerStore.state.routingKeyPointer = -1;\n};\n\nexport const isNavigatingBackwards = (): boolean => {\n  return routerStore.state.routingKeyPointer < routerStore.state.routingKeyHistory.length - 1;\n};\n\nexport const isAnimating = (): boolean => {\n  const { routingKeyPointer, animatingPointer } = routerStore.state;\n  return routingKeyPointer !== animatingPointer;\n};\n\n//____________ANIMATIONS______________//\n\nexport const isAnimatingForward = (): boolean => {\n  return routerStore.state.routingKeyPointer > routerStore.state.animatingPointer;\n};\n\nexport const isAnimatingBackward = (): boolean => {\n  return routerStore.state.routingKeyPointer < routerStore.state.animatingPointer;\n};\n\nexport const isOpening = (): boolean => {\n  return (\n    routerStore.state.animatingPointer === RoutingKeyPointers.LEVEL_ZERO && routerStore.state.routingKeyPointer >= 0\n  );\n};\n\nexport const isOpened = (): boolean => {\n  return !isClosed();\n};\n\nexport const isClosed = (): boolean => {\n  return (\n    routerStore.state.routingKeyPointer === RoutingKeyPointers.LEVEL_ZERO &&\n    routerStore.state.animatingPointer === RoutingKeyPointers.LEVEL_ZERO\n  );\n};\nexport const isClosing = (): boolean => {\n  return routerStore.state.routingKeyPointer === -1 && routerStore.state.animatingPointer >= 0;\n};\n\nexport const syncAnimation = () => {\n  routerStore.state.animatingPointer = routerStore.state.routingKeyPointer;\n};\n\nexport const showBackButton = (section: string): boolean => {\n  const sectionKey = routerStore.state.routingKeyHistory.indexOf(section);\n\n  return sectionKey >= RoutingKeyPointers.LEVEL_TWO;\n};\n"],"names":["animationRegistry","sequences","applyCurrentAnimationSequenceStep","e","currentStepIndex","steps","length","n","resolve","call","promise","undefined","finishAnimationSequence","t","r","i","a","o","push","executeAnimation","Promise","all","u","sent","reject","s","setTimeout","animationEndListener","getHTMLElement","target","Error","concat","type","dataset","phnAmId","finishAnimationPromise","onStart","onEnd","animation","elementSelector","isPromise","f","Array","from","getRootElement","querySelectorAll","c","l","generateAndCleanUpAnimationPromise","animationPromiseGenerator","cleanUpBeforeAnimation","cleanUpAfterAnimation","classList","remove","className","Math","floor","random","add","toString","console","warn","String","timeout","clearTimeout","makeSequence","map","Object","assign","running","animationManager","initialize","addEventListener","play","isPlaying","register","reset","keys","forEach","AnimationSequences","OPEN_DOUBLE_DRAWER","CLOSE_DOUBLE_DRAWER","TRANSITION_SAME_LEVEL_DOUBLE_DRAWER","TRANSITION_SAME_LEVEL_DOUBLE_DRAWER_REVERSE","TRANSITION_NEXT_LEVEL_DOUBLE_DRAWER","TRANSITION_PREVIOUS_LEVEL_DOUBLE_DRAWER","OPEN_SINGLE_DRAWER","CLOSE_SINGLE_DRAWER","TRANSITION_NEXT_LEVEL_SINGLE_DRAWER","TRANSITION_PREVIOUS_LEVEL_SINGLE_DRAWER","dealerSearchResultsStore","createStore","searchTerm","results","savedDealerCookie","JSON","parse","windowService","getCookie","SAVED_DEALER_COOKIE","readDealerCookie","ppnDealers","dealersOfRegion","regions","onChange","setCookie","stringify","routerStore","routingKeyHistory","routingKeyPointer","animatingPointer","initialRoutingKeyHistory","initialRoutingKeyPointer","RoutingKeyPointers","RoutingKeys","MAIN_MENU","DEALER_SEARCH","MORE","SHOP","SERIES","MY_PORSCHE","VEHICLE_PURCHASE","EXPERIENCE","SERVICES","MODELS","constructRoutingKey","arguments","reduce","__spreadArray","getString","split","filter","Boolean","join","findTopLevelRoutingKey","isString","values","find","startsWith","getModelsRoutingKey","apply","getDealerDetailsRoutingKey","getMyPorscheRoutingKey","getVehiclePurchaseRoutingKey","getLastRoutingSegment","slice","removeLastRoutingSegment","determineMainDrawerLevel","getPreviousRoutingKey","handleAnimationRouting","OPENING","openingAction","CLOSING","closingAction","FORWARD","forwardAction","BACKWARDS","backwardAction","UNCHANGED","unchangedAction","isOpening","isClosing","isAnimatingForward","isAnimatingBackward","getSingleDrawerAction","nextRoute","currentRoute","getCurrentRoute","then","getAnimatedRoute","state","goTo","back","some","isPlayingSingleDrawerAnimation","pop","isNavigatingBackwards","addRoute","isDesktop","getBreakpoint","dispatchEvent","bubbles","cancelable","detail","LEVEL_ZERO","isOpened","isClosed","syncAnimation","showBackButton","indexOf","LEVEL_TWO"],"sourceRoot":""}