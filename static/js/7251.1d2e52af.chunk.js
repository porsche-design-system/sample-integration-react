"use strict";(self.webpackChunksample_integration_react=self.webpackChunksample_integration_react||[]).push([[7251],{97251:function(e,t,n){n.r(t),n.d(t,{a:function(){return d},b:function(){return l},c:function(){return w},d:function(){return f},g:function(){return p}});var r=n(88410),a=n(69980),o=n(30144),c=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function c(e){try{u(r.next(e))}catch(e){o(e)}}function i(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?n(e.value):a(e.value).then(c,i)}u((r=r.apply(e,t||[])).next())}))},i=function(e,t){var n,r,a,o,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},u=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function l(e,t,n){return c(this,void 0,void 0,(function(){return i(this,(function(r){return[2,f(e,t,{latitude:0,longitude:0},n,{radius:1e7})]}))}))}function f(e,t,n,u,l){return void 0===l&&(l={}),c(this,void 0,void 0,(function(){var c,f,d,h,p;return i(this,(function(i){switch(i.label){case 0:c=l.radius,i.label=1;case 1:return i.trys.push([1,3,,4]),(h=new Headers).set("Accept","*/*"),e===r.c.LOCAL&&h.set("Authorization","Basic "+a.w.btoa("".concat("undefined",":").concat("undefined"))),p={coordinates:"".concat(n.latitude,",").concat(n.longitude),radius:c},[4,fetch("".concat(t,"/").concat(u,"/dealers?").concat((0,o.b)(p)),{method:"GET",headers:h})];case 2:return f=i.sent(),[3,4];case 3:throw i.sent(),new r.N("Unable to fetch dealers",r.a.GENERAL);case 4:if(400===f.status)throw new r.N("dealerService.getPPNDealers failed with invalid coordinates",r.a.GENERAL);if(404===f.status)throw new r.N("dealerService.getPPNDealers failed with invalid country code and therefore responded with no results",r.a.NO_RESULTS);if(200!==f.status)throw new r.N("dealerService.getPPNDealers failed with invalid response",r.a.GENERAL);i.label=5;case 5:return i.trys.push([5,7,,8]),[4,f.json()];case 6:return d=i.sent(),[3,8];case 7:throw i.sent(),new r.N("dealerService.getPPNDealers could not parse response into json format",r.a.GENERAL);case 8:return[2,d.map((function(e){var t=e.dealer,n=s(e,["dealer"]);return Object.assign({ppnDealer:t},n)}))]}}))}))}function d(e,t,n,a,o){return c(this,void 0,void 0,(function(){var c,u;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,f(e,t,a,o)];case 1:return u=i.sent(),c=u.find((function(e){return n===e.ppnDealer.id})),[3,3];case 2:throw i.sent(),new r.N("Unable to fetch a dealer",r.a.GENERAL);case 3:if(void 0===c)throw new r.N("Requested dealer ".concat(n," could not be found"),r.a.NO_RESULTS);return[2,c]}}))}))}var h=new Map;function p(e,t){return c(this,void 0,void 0,(function(){var n,a;return i(this,(function(o){switch(o.label){case 0:return[4,w(t)];case 1:if(n=o.sent(),a=n.regions.flatMap((function(e){return e.cities.flatMap((function(e){var t=e.dealers;return Object.values(t).reduce((function(e,t){return u(u([],e,!0),[t],!1)}),[])}))})).find((function(t){return t.ppnDealer.id===e})),void 0===a)throw new r.N("Requested dealer could not be found",r.a.NO_RESULTS);return[2,a]}}))}))}function w(e){return c(this,void 0,void 0,(function(){var t,n,a,c;return i(this,(function(i){switch(i.label){case 0:return t=r.n.state.env,n=new Headers,h.has(e)?(a=h.get(e),[3,4]):[3,1];case 1:return c=(0,o.a)(t).BFF_ENDPOINT,n.set("Accept","*/*"),[4,fetch("".concat(c,"/dealers/region/").concat(e,"?env=").concat(t),{method:"GET",headers:n})];case 2:return[4,i.sent().json()];case 3:a=i.sent(),h.set(e,a),i.label=4;case 4:if(void 0===a)throw new r.N("Requested dealer could not be found",r.a.NO_RESULTS);return[2,a]}}))}))}}}]);
//# sourceMappingURL=7251.1d2e52af.chunk.js.map