{"version":3,"file":"static/js/2749.bb9dab63.chunk.js","mappings":"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","sources":["../node_modules/@porschehn/navigation/dist/esm-es5/src/state/dealer-search-results-store.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/utility/constants/ab-testing.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/services/ab-testing/matomo-ab-testing-service.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/services/ab-testing/ab-testing-constructor-service.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/services/animations/animation-manager.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/utility/constants/animations.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/services/content-service.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/utility/helpers/dealer-search-helper.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/services/dealer-service.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/components/double-drawer/double-drawer-animation-sequences.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/state/finder-state-store.ts","../node_modules/@porschehn/navigation/dist/esm-es5/node_modules/@porsche/globaldatalayer/dist/GlobalDataLayer.es.js","../node_modules/@porschehn/navigation/dist/esm-es5/src/services/analytics/global-data-layer-service.ts","../node_modules/@porschehn/navigation/dist/esm-es5/node_modules/uuid/dist/esm-browser/rng.js","../node_modules/@porschehn/navigation/dist/esm-es5/node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/@porschehn/navigation/dist/esm-es5/node_modules/uuid/dist/esm-browser/native.js","../node_modules/@porschehn/navigation/dist/esm-es5/node_modules/uuid/dist/esm-browser/v4.js","../node_modules/@porschehn/navigation/dist/esm-es5/src/services/user-information-service.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/services/user-service.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/components/header/header.scss?tag=phn-header&encapsulation=shadow","../node_modules/@porschehn/navigation/dist/esm-es5/src/components/header/header.tsx","../node_modules/@porschehn/navigation/dist/esm-es5/src/components/level-0/level-0.scss?tag=phn-level-0&encapsulation=scoped","../node_modules/@porschehn/navigation/dist/esm-es5/src/components/level-0/level-0.tsx","../node_modules/@porschehn/navigation/dist/esm-es5/src/components/wrapper/wrapper.scss?tag=phn-wrapper&encapsulation=scoped","../node_modules/@porschehn/navigation/dist/esm-es5/src/components/wrapper/wrapper.tsx","../node_modules/@porschehn/navigation/dist/esm-es5/src/utility/ready.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/state/router-store.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/entities/routing-key.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/state/shop-state-store.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/utility/helpers/shop-helper.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/components/single-drawer/single-drawer-animation-sequences.ts","../node_modules/@porschehn/navigation/dist/esm-es5/src/utility/timeout.ts"],"sourcesContent":["import { createStore } from '@stencil/store';\nimport { PPNDealerSearchResult } from '../entities/dealer-response';\nimport windowService from '../services/window-service';\nimport { SAVED_DEALER_COOKIE } from '../utility/constants';\n\nexport interface DealerSearchResults {\n  searchTerm: string;\n  results: string[] | null;\n  savedDealerCookie: SavedDealerCookie | null;\n  ppnDealers: { [dealerId: string]: PPNDealerSearchResult };\n  dealersOfRegion: any;\n}\n\nexport interface SavedDealerCookie {\n  id: string;\n  latitude: number;\n  longitude: number;\n}\n\nexport const dealerSearchResultsStore = createStore<DealerSearchResults>({\n  searchTerm: '',\n  results: null,\n  savedDealerCookie: readDealerCookie(),\n  ppnDealers: {},\n  dealersOfRegion: { regions: [] }\n});\n\ndealerSearchResultsStore.onChange('savedDealerCookie', (newValue) => {\n  windowService.setCookie(SAVED_DEALER_COOKIE, JSON.stringify(newValue));\n});\n\nfunction readDealerCookie(): SavedDealerCookie | null {\n  try {\n    return JSON.parse(windowService.getCookie(SAVED_DEALER_COOKIE));\n  } catch (err) {\n    return null;\n  }\n}\n","export type ExperimentDefinition = Record<string, unknown>;\n\nexport type AvailableExperiment = (typeof experimentsDefinitions)[keyof typeof experimentsDefinitions];\n\nexport const experimentsDefinitions: ExperimentDefinition = {};\n\nexport interface MatomoClient {\n  track: () => void;\n  AbTesting: {\n    Experiment: { new (definition: unknown): Experiment };\n  };\n}\n\nexport interface Experiment {\n  name: string;\n  getActivatedVariationName: () => string;\n  variations: Variation[];\n}\n\nexport interface Variation {\n  name: string;\n  activate: () => unknown;\n}\n","import { navStateStore } from '../../state/nav-state-store';\nimport { NaviError, NaviErrorTypes } from '../../utility/navi-error';\nimport { IAbTestingService } from './ab-testing-service.interface';\nimport {\n  AvailableExperiment,\n  Experiment,\n  experimentsDefinitions,\n  MatomoClient,\n  Variation\n} from '../../utility/constants/ab-testing';\nimport Logger from '../logger';\nimport { getHTMLElement } from '../../utility/helper';\nimport featureToggles from '../feature-toggles';\nimport { TMenu, VariationDefinition } from '../../entities/content';\nimport { navContentStore } from '../../state/nav-content-store';\n\nexport class MatomoAbTestingService implements IAbTestingService {\n  client: MatomoClient | null = null;\n  experiments: Experiment[] = [];\n\n  async init(): Promise<void> {\n    if (featureToggles.isABTestingToggleActive()) {\n      try {\n        await this.setClient();\n        await this.loadExperiments();\n      } catch (e) {\n        Logger.error('Could not initialize AbTesting', e as Error);\n      }\n    }\n  }\n\n  execute(experimentName: AvailableExperiment): void {\n    if (featureToggles.isABTestingToggleActive()) {\n      try {\n        const experiment = this.getExperiment(experimentName);\n        const variation = this.getVariation(experiment);\n        variation.activate();\n      } catch (e) {\n        Logger.error(`Could not execute experiment ${experimentName}`, e as Error);\n      }\n    }\n  }\n\n  executeContentChange(menu: TMenu): TMenu[] {\n    if (featureToggles.isABTestingToggleActive()) {\n      try {\n        const experiment = this.getExperiment(menu.experienceName);\n        const variation = this.getVariation(experiment);\n        if (variation.name === 'original') {\n          return menu.children;\n        }\n        return variation.activate() as unknown as TMenu[];\n      } catch (e) {\n        Logger.error(`Could not execute experiment ${menu.experienceName}`, e as Error);\n      }\n    }\n    return menu.children;\n  }\n\n  private async setClient(): Promise<MatomoClient> {\n    if (this.client) return Promise.resolve(this.client);\n\n    await this.injectScript();\n    const w = window as any;\n    this.client = w.Matomo as MatomoClient;\n    return this.client;\n  }\n\n  private async loadExperiments(): Promise<void> {\n    const client = this.getClient();\n    const ExperimentCreator = client.AbTesting.Experiment;\n    const experimentsDefinitions = this.getAbTestingDefinitions();\n    for (const experimentKey in experimentsDefinitions) {\n      const experimentDefinition = experimentsDefinitions[experimentKey];\n      const experiment = new ExperimentCreator(experimentDefinition);\n      this.experiments.push(experiment);\n    }\n  }\n\n  async loadContentGeneratorExperiments(): Promise<void> {\n    if (featureToggles.isABTestingToggleActive()) {\n      const client = this.getClient();\n      const ExperimentCreator = client.AbTesting.Experiment;\n      const contentDefinitions = navContentStore.state.abExperiences;\n\n      if (contentDefinitions) {\n        for (const experimentDefinition of contentDefinitions) {\n          const variationDefinition: Variation[] = experimentDefinition.variations.map(\n            (variation: VariationDefinition) => ({\n              name: variation.name,\n              activate: () => variation.children\n            })\n          );\n          variationDefinition.push({\n            name: 'original',\n            activate: () => null\n          });\n          const experiment = new ExperimentCreator({ ...experimentDefinition, variations: variationDefinition });\n          this.experiments.push(experiment);\n        }\n      }\n    }\n  }\n\n  private getExperiment(name: AvailableExperiment): Experiment {\n    const experiment = this.experiments.find((experiment) => experiment.name === name);\n    if (!experiment) throw new NaviError(`No experiment with name: ${name} found`, NaviErrorTypes.GENERAL);\n    return experiment;\n  }\n\n  private getVariation(experiment: Experiment): Variation {\n    const variationName = experiment.getActivatedVariationName();\n    const variation = experiment.variations.find((variation) => variation.name === variationName);\n\n    if (!variation)\n      throw new NaviError(\n        `No variation in experiment: ${experiment.name} with name: ${variationName} found`,\n        NaviErrorTypes.GENERAL\n      );\n    return variation;\n  }\n\n  private getClient(): MatomoClient {\n    if (!this.client) throw new NaviError('No client is set, you must call init first', NaviErrorTypes.GENERAL);\n    return this.client;\n  }\n\n  private injectScript(): Promise<boolean> {\n    return new Promise((resolve, reject) => {\n      const s = document.createElement('script');\n      s.text = this.getMatomoScript();\n      document.head.appendChild(s);\n\n      const matomoScript = getHTMLElement(\n        document.querySelector('script[src=\"//cdn.matomo.cloud/porsche.matomo.cloud/matomo.js\"]')\n      );\n\n      if (matomoScript) {\n        matomoScript.onload = () => {\n          resolve(true);\n        };\n        matomoScript.onerror = () => reject(new NaviError('Could not inject Matomo script', NaviErrorTypes.GENERAL));\n      } else {\n        reject(new NaviError('There is no HTML Script element available', NaviErrorTypes.GENERAL));\n      }\n    });\n  }\n\n  private getAbTestingDefinitions() {\n    return experimentsDefinitions;\n  }\n\n  private getMatomoScript(): string {\n    const currentEnvironment = navStateStore.state.env;\n    return `var _paq = window._paq = window._paq || [];\n    _paq.push(['trackPageView']);\n    _paq.push(['enableLinkTracking']);\n    (function() {\n      var u=\"https://porsche.matomo.cloud/\";\n      _paq.push(['setTrackerUrl', u+'matomo.php']);\n      _paq.push(['setSiteId', ${currentEnvironment === 'production' ? '7' : '8'}]);\n      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];\n      g.async=true; g.src='//cdn.matomo.cloud/porsche.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);\n    })\n   ();`;\n  }\n}\n\nexport const MatomoAbTesting = new MatomoAbTestingService();\n","import { IAbTestingService } from './ab-testing-service.interface';\nimport { MatomoAbTesting } from './matomo-ab-testing-service';\n\nexport default function abTestingService(): IAbTestingService {\n  return MatomoAbTesting;\n}\n","import { AnimationSequencesType } from '../../utility/constants';\nimport { getHTMLElement, isPromise } from '../../utility/helper';\n\nexport type AnimationStartsCallbacks = {\n  onAnimationStarts?: (() => Promise<unknown>) | (() => void);\n};\n\nexport type AnimationEndsCallbacks = {\n  onAnimationEnds?: (() => Promise<unknown>) | (() => void);\n};\n\nexport type AnimationStatusCallbacks = AnimationStartsCallbacks & AnimationEndsCallbacks;\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type SequenceIdentifier = AnimationSequencesType | (string & {});\n\nexport interface NaviAnimation {\n  animation: AnimationGeneratorType;\n  elementSelector: string;\n  onStart?: (() => Promise<unknown>) | (() => unknown);\n  onEnd?: (() => Promise<unknown>) | (() => unknown);\n}\n\nexport type SequenceStep = Array<NaviAnimation>;\n\nexport type AnimationSequence = {\n  steps: Array<SequenceStep>;\n  currentStepIndex: number;\n  running: boolean;\n  resolve?: (value: unknown) => void;\n  reject?: (reason?: unknown) => void;\n  promise?: Promise<void>;\n};\n\nexport type AnimationGeneratorType = {\n  className: string;\n  cleanUpBeforeAnimation?: ((el: HTMLElement) => Promise<void>) | ((el: HTMLElement) => void) | boolean;\n  cleanUpAfterAnimation?: ((el: HTMLElement) => Promise<void>) | ((el: HTMLElement) => void) | boolean;\n};\n\nconst animationRegistry: Record<\n  string,\n  {\n    promise: Promise<void>;\n    resolve: (value: void) => void;\n    reject: (reason?: unknown) => void;\n    animation: AnimationGeneratorType;\n    timeout: NodeJS.Timeout;\n  }\n> = {};\n\nconst sequences: {\n  [key in SequenceIdentifier]?: AnimationSequence | undefined;\n} = {};\n\nlet rootElement: HTMLElement | null = null;\n\nconst animationTimeoutDurationMs = 1000;\n\nfunction initialize(element: HTMLElement): void {\n  rootElement = element;\n\n  rootElement.addEventListener('transitionend', animationEndListener);\n  rootElement.addEventListener('animationend', animationEndListener);\n}\n\nfunction register(sequenceIdentifier: SequenceIdentifier, animationSequence: AnimationSequence): void {\n  sequences[sequenceIdentifier] = animationSequence;\n}\n\nfunction reset(): void {\n  Object.keys(sequences).forEach((key) => delete sequences[key]);\n}\n\nasync function play(sequenceIdentifier: SequenceIdentifier): Promise<unknown> {\n  const sequence = sequences[sequenceIdentifier];\n\n  if (sequence === undefined) {\n    return new Promise((_, reject) => reject(new Error(`Sequence ${sequenceIdentifier} has not been registered`)));\n  }\n\n  if (!sequence.running) {\n    sequence.promise = new Promise<void>((resolve, reject) => {\n      sequence.resolve = () => {\n        sequence.running = false;\n        resolve();\n      };\n\n      sequence.reject = (value: unknown) => {\n        sequence.running = false;\n        reject(value);\n      };\n\n      sequence.running = true;\n\n      applyCurrentAnimationSequenceStep(sequence);\n    });\n  }\n\n  return sequence.promise;\n}\n\nasync function applyCurrentAnimationSequenceStep(sequence: AnimationSequence) {\n  if (sequence.currentStepIndex >= sequence.steps.length) {\n    finishAnimationSequence(sequence);\n    return;\n  }\n\n  const sequenceStep = sequence.steps[sequence.currentStepIndex];\n\n  const promises = [];\n  for (const animation of sequenceStep) {\n    promises.push(executeAnimation(animation));\n  }\n\n  try {\n    await Promise.all(promises);\n  } catch (error) {\n    sequence.reject?.(error);\n    return;\n  }\n\n  sequence.currentStepIndex += 1;\n\n  setTimeout(() => applyCurrentAnimationSequenceStep(sequence), 0);\n}\n\nfunction finishAnimationSequence(sequence: AnimationSequence) {\n  sequence.currentStepIndex = 0;\n  sequence.resolve?.(null);\n  sequence.promise = undefined;\n}\n\nfunction animationEndListener(event: AnimationEvent | TransitionEvent): void {\n  const target = getHTMLElement(event.target);\n\n  if (target === null) {\n    throw new Error(`${event.type} event target is null`);\n  }\n\n  const id = target.dataset.phnAmId;\n\n  if (id !== undefined && id !== null) {\n    finishAnimationPromise(id, target);\n  }\n}\n\nasync function executeAnimation({ onStart, onEnd, animation, elementSelector }: NaviAnimation): Promise<void> {\n  if (rootElement === null) {\n    throw new Error('No root element present');\n  }\n\n  if (onStart) {\n    const maybePromise = onStart();\n    if (isPromise<void>(maybePromise)) {\n      await maybePromise;\n    }\n  }\n\n  const animatedElements: HTMLElement[] = Array.from(rootElement.querySelectorAll(elementSelector));\n  const animationExecutors = [];\n\n  for (const element of animatedElements) {\n    const animationPromiseEffect = generateAndCleanUpAnimationPromise(animationPromiseGenerator)(element, animation);\n    animationExecutors.push(animationPromiseEffect);\n  }\n\n  await Promise.all(animationExecutors);\n\n  if (onEnd) {\n    const maybePromise = onEnd();\n    if (isPromise<void>(maybePromise)) {\n      await maybePromise;\n    }\n  }\n}\n\nfunction generateAndCleanUpAnimationPromise(\n  animationPromiseGenerator: (element: HTMLElement, animation: AnimationGeneratorType) => Promise<void>\n): (element: HTMLElement, animation: AnimationGeneratorType) => Promise<void> {\n  return async function (element: HTMLElement, animation: AnimationGeneratorType): Promise<void> {\n    const { cleanUpBeforeAnimation, cleanUpAfterAnimation } = animation;\n\n    const animationPromise = animationPromiseGenerator(element, animation);\n\n    if (typeof cleanUpBeforeAnimation === 'function') {\n      const maybePromise: void | Promise<void> = cleanUpBeforeAnimation(element);\n      if (isPromise<void>(maybePromise)) {\n        await maybePromise;\n      }\n    }\n\n    await animationPromise;\n\n    if (typeof cleanUpAfterAnimation === 'function') {\n      const maybePromise: void | Promise<void> = cleanUpAfterAnimation(element);\n      if (isPromise<void>(maybePromise)) {\n        await maybePromise;\n      }\n    }\n\n    if (cleanUpAfterAnimation !== false) {\n      // only not remove class if cleanUpAfterAnimation is explicitely set to false\n      element.classList.remove(animation.className);\n    }\n  };\n}\n\nconst animationPromiseGenerator = (element: HTMLElement, animation: AnimationGeneratorType): Promise<void> => {\n  const id = Math.floor(Math.random() * 1e7);\n\n  element.classList.add(animation.className);\n  element.dataset.phnAmId = id.toString();\n\n  let resolve!: (value: void) => void;\n  let reject!: (reason?: unknown) => void;\n  let timeout!: NodeJS.Timeout;\n  const promise = new Promise<void>((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n\n    timeout = setTimeout(() => {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Animation with className ${animation.className} didn't finish after ${animationTimeoutDurationMs}ms. Forcefully finishing animation and continuing with the rest of the sequence.`\n      );\n      finishAnimationPromise(String(id), element);\n    }, animationTimeoutDurationMs);\n  });\n\n  animationRegistry[id] = { animation, resolve, reject, promise, timeout };\n\n  return promise;\n};\n\nfunction finishAnimationPromise(phnAmId: string, target: HTMLElement): void {\n  const { resolve, timeout } = animationRegistry[phnAmId];\n\n  clearTimeout(timeout);\n  delete animationRegistry[phnAmId];\n  delete target.dataset.phnAmId;\n\n  resolve();\n}\n\nfunction isPlaying(sequenceIdentifier: SequenceIdentifier): boolean {\n  const sequence = sequences[sequenceIdentifier];\n\n  if (sequence === undefined) {\n    throw new Error(`Sequence ${sequenceIdentifier} has not been registered`);\n  }\n\n  return sequence.promise !== undefined;\n}\n\nfunction makeSequence(\n  sequenceSteps: SequenceStep[],\n  animationDefaults?: Partial<Omit<AnimationGeneratorType, 'name'>>\n): AnimationSequence {\n  return {\n    steps: sequenceSteps.map((step) => step.map((animation) => ({ ...animationDefaults, ...animation }))),\n    currentStepIndex: 0,\n    running: false\n  };\n}\n\nexport default {\n  initialize,\n  play,\n  isPlaying,\n  register,\n  reset\n};\n\nexport { makeSequence };\n","export const AnimationSequences = {\n  OPEN_DOUBLE_DRAWER: 'openDoubleDrawer',\n  CLOSE_DOUBLE_DRAWER: 'closeDoubleDrawer',\n  TRANSITION_SAME_LEVEL_DOUBLE_DRAWER: 'transitionSameLevelDoubleDrawer',\n  TRANSITION_SAME_LEVEL_DOUBLE_DRAWER_REVERSE: 'transitionSameLevelDoubleDrawerReverse',\n  TRANSITION_NEXT_LEVEL_DOUBLE_DRAWER: 'transitionNextLevelDoubleDrawer',\n  TRANSITION_PREVIOUS_LEVEL_DOUBLE_DRAWER: 'transitionPreviousLevelDoubleDrawer',\n  OPEN_SINGLE_DRAWER: 'openSingleDrawer',\n  CLOSE_SINGLE_DRAWER: 'closeSingleDrawer',\n  TRANSITION_NEXT_LEVEL_SINGLE_DRAWER: 'transitionNextLevelSingleDrawer',\n  TRANSITION_PREVIOUS_LEVEL_SINGLE_DRAWER: 'transitionPreviousLevelSingleDrawer'\n} as const;\n\nexport type AnimationSequencesType = (typeof AnimationSequences)[keyof typeof AnimationSequences];\n\nexport const AnimationDurations = {\n  highlight: 200,\n  drawerContent: 250,\n  drawer: 400,\n  backdrop: 400,\n  drawerOpen: 600\n};\n","import { Content, ShopContentResponse } from '../entities/content';\nimport { isCountryInOneOfRegions, splitLocale } from '../entities/locale';\nimport { Application, ApplicationType } from '../utility/constants/app';\nimport { constructCacheKey, getConfig } from '../utility/helper';\nimport { modifyShopItemDependingOnMarket } from '../utility/helpers/shop-helper';\nimport { NaviError, NaviErrorTypes } from '../utility/navi-error';\nimport featureToggles from './feature-toggles';\n\nexport const contentCache = new Map<string, Content>();\n\nexport async function fetchContent(locale: string, app?: ApplicationType): Promise<Content> {\n  const config = getConfig(featureToggles.env);\n\n  const isShopEnabled = featureToggles.isShopToggleActive() && app === Application.shop;\n\n  const naviContentPromise = fetchNaviContent(config.CONTENT_URL, locale);\n  const shopContentPromise = isShopEnabled ? fetchShopContent(config.SHOP_CONTENT_URL, locale) : Promise.resolve(null);\n\n  const [naviContentResult, shopContentResult] = await Promise.allSettled([naviContentPromise, shopContentPromise]);\n\n  if (naviContentResult.status === 'rejected') {\n    throw naviContentResult.reason;\n  }\n\n  const naviContent = modifyShopItemDependingOnMarket(locale, app, naviContentResult.value);\n\n  const shopContent = shopContentResult.status === 'fulfilled' ? shopContentResult.value : null;\n\n  if (shopContent === null || naviContent.shop === null) {\n    return naviContent;\n  }\n\n  return {\n    ...naviContent,\n    shop: {\n      ...naviContent.shop,\n      children: shopContent.menuItems || naviContent.shop?.children || [],\n      additionalContent: shopContent.additionalContent,\n      availableLocales: naviContent.shop.availableLocales,\n      availableLocalesOnlyForShop: naviContent.shop.availableLocalesOnlyForShop\n    }\n  };\n}\n\nasync function fetchNaviContent(contentUrl: string, locale: string): Promise<Content> {\n  const { country, language } = splitLocale(locale);\n\n  const cacheKey = constructCacheKey(contentUrl, locale);\n\n  const cachedContent = contentCache.get(cacheKey);\n  if (cachedContent !== undefined) {\n    return cachedContent;\n  }\n\n  const data = await fetch(`${contentUrl}/${`${language}-${country}`}.json`, {\n    headers: {\n      'Cache-Control': 'no-cache',\n      'Content-Type': 'application/json'\n    }\n  });\n\n  if (data.status === 404) {\n    throw new NaviError(`No content for locale ${locale} found`, NaviErrorTypes.NO_RESULTS);\n  }\n\n  if (!data.ok) {\n    throw new NaviError(`Could not get content for locale ${locale}`, NaviErrorTypes.GENERAL);\n  }\n\n  const content = await data.json();\n\n  contentCache.set(cacheKey, content);\n\n  return content;\n}\n\nasync function fetchShopContent(contentUrl: string, locale: string): Promise<ShopContentResponse> {\n  const { country, language } = splitLocale(locale);\n\n  const data = await fetch(`${contentUrl}/${country.toLowerCase()}/${`${language}-${country}`}/navigation`, {\n    headers: {\n      'Content-Type': 'application/json',\n      'x-vercel-protection-bypass': 'SHOP_CONTENT_KEY'\n    }\n  });\n\n  if (data.status === 404) {\n    throw new NaviError(`No shop content for locale ${locale} found`, NaviErrorTypes.NO_RESULTS);\n  }\n\n  if (!data.ok) {\n    throw new NaviError(`Could not get shop content for locale ${locale}`, NaviErrorTypes.GENERAL);\n  }\n\n  return data.json();\n}\n\nexport function constructFlagURL(footerAssetsUrl: string, locale: string): string {\n  const { country } = splitLocale(locale);\n\n  let flag = country;\n  if (flag.includes('-') && !isCountryInOneOfRegions(flag)) {\n    flag = country.split('-')[0];\n  }\n\n  return `${footerAssetsUrl}/flags/${flag}.svg`;\n}\n\nexport async function getFlagURL(footerAssetsUrl: string, locale: string): Promise<string> {\n  try {\n    const flagURL = constructFlagURL(footerAssetsUrl, locale);\n\n    const res = await fetch(flagURL);\n\n    // Only set flagURL if flag actually exists\n    if (res.ok) {\n      return flagURL;\n    }\n  } catch (err) {\n    // ignore error\n  }\n\n  return '';\n}\n","import { OpenHours } from '../../entities/dealer-response';\nimport { navContentStore } from '../../state/nav-content-store';\nimport { OpeningHours } from '../../entities/content';\nimport { isString } from '../helper';\n\nexport function showDealerSearchDropdown(country: string): boolean {\n  const countriesWithDropdown = ['CN'];\n\n  return countriesWithDropdown.includes(country);\n}\n\nexport function getRegionSpecificCountry(country: string): string {\n  return country.includes('-') ? country.split('-')[0] : country;\n}\n\nexport function sanitizeDealerHomepage(originalUrl: string): string {\n  if (!originalUrl.startsWith('https://')) {\n    return `http://${originalUrl}`;\n  }\n\n  return originalUrl;\n}\n\nexport function getOpeningHours(openingHoursData: OpenHours[]): string {\n  const { openingHours } = navContentStore.state.dealer;\n\n  if (!openingHours) {\n    return '';\n  }\n\n  const WEEK_DAYS = [\n    openingHours.monday,\n    openingHours.tuesday,\n    openingHours.wednesday,\n    openingHours.thursday,\n    openingHours.friday,\n    openingHours.saturday,\n    openingHours.sunday\n  ];\n\n  const openingHoursMap = getOpeningHoursMap(openingHours, openingHoursData);\n  const result: string[] = [];\n  let previousOpeningHours = '';\n  let previousDayIndex = -1;\n  let consecutiveDays: string[] = [];\n\n  for (const day of WEEK_DAYS) {\n    const currentDayIndex = WEEK_DAYS.indexOf(day);\n    const openHours = openingHoursMap.get(day);\n    const openingHoursString = getOpeningHoursString(openHours);\n\n    if (openingHoursString !== '') {\n      if (previousOpeningHours === '') {\n        previousOpeningHours = openingHoursString;\n        consecutiveDays.push(day);\n      } else if (previousOpeningHours !== openingHoursString || previousDayIndex !== currentDayIndex - 1) {\n        result.push(getDayRange(consecutiveDays, previousOpeningHours));\n        consecutiveDays = [day];\n        previousOpeningHours = openingHoursString;\n      } else {\n        consecutiveDays.push(day);\n      }\n      previousDayIndex = currentDayIndex;\n    }\n  }\n\n  if (previousOpeningHours !== '') {\n    result.push(getDayRange(consecutiveDays, previousOpeningHours));\n  }\n\n  return result.join('\\n');\n}\n\nfunction getDayRange(days: string[], openingHoursString: string) {\n  if (days.length === 1) {\n    return `${days[0]}: ${openingHoursString}`;\n  }\n  return `${days[0]} - ${days[days.length - 1]}: ${openingHoursString}`;\n}\n\nfunction getOpeningHoursMap(openingHours: OpeningHours, openingHoursData: OpenHours[]) {\n  const openingHoursMap: Map<string, { open: string; close: string }> = new Map();\n\n  for (const item of openingHoursData) {\n    const day = openingHours[item.day.toLowerCase() as keyof OpeningHours];\n\n    if (isString(day)) {\n      openingHoursMap.set(day, { open: item.open, close: item.close });\n    }\n  }\n\n  return openingHoursMap;\n}\n\nfunction getOpeningHoursString(openHours: { open: string; close: string } | undefined): string {\n  return openHours && openHours.open !== '' && openHours.close !== '' ? getTimeFormat(openHours) : '';\n}\n\nfunction getTimeFormat(openHours: { open: string; close: string }): string {\n  const { openingHours } = navContentStore.state.dealer;\n\n  const timeFormat = openingHours?.timeFormat === 12;\n\n  return `${convertToLocalTime(openHours.open, timeFormat)} - ${convertToLocalTime(openHours.close, timeFormat)}`;\n}\n\nfunction convertToLocalTime(time: string, timeFormat = false) {\n  const [hour, minute] = time.split(':').map(Number);\n  const date = new Date(0, 0, 0, hour, minute);\n\n  return date\n    .toLocaleString(undefined, {\n      hour: 'numeric',\n      minute: 'numeric',\n      hour12: timeFormat\n    })\n    .toUpperCase();\n}\n","import { DealersByRegion, PPNDealer, PPNDealerSearchResult, PPNDistance } from '../entities/dealer-response';\nimport { Environment, Environments } from '../entities/environment';\nimport { LatLong } from '../entities/places';\nimport { NaviError, NaviErrorTypes } from '../utility/navi-error';\nimport windowService from './window-service';\nimport { navStateStore } from '../state/nav-state-store';\nimport { getConfig, getQueryString } from '../utility/helper';\n\nexport async function getAllPPNDealersForMarket(\n  env: Environment,\n  dealerApiUrl: string,\n  country: string\n): Promise<PPNDealerSearchResult[]> {\n  return getPPNDealers(env, dealerApiUrl, { latitude: 0, longitude: 0 }, country, { radius: 10000000 });\n}\n\ntype GetPPNDealersOptions = {\n  /**\n   * The radius around the given coordinates to search for dealers\n   */\n  radius?: number;\n};\n\nexport async function getPPNDealers(\n  env: Environment,\n  dealerApiUrl: string,\n  coordinates: LatLong,\n  country: string,\n  options: GetPPNDealersOptions = {}\n): Promise<PPNDealerSearchResult[]> {\n  const { radius } = options;\n\n  let response: Response;\n  let ppnDealerSearchResults: { dealer: PPNDealer; distance: PPNDistance }[];\n\n  try {\n    const headers = new Headers();\n\n    headers.set('Accept', '*/*');\n\n    /* istanbul ignore next */\n    if (env === Environments.LOCAL) {\n      headers.set(\n        'Authorization',\n        'Basic ' + windowService.btoa(`${'DEALER_SEARCH_API_USER'}:${'DEALER_SEARCH_API_PASS'}`)\n      );\n    }\n\n    const requestParams = {\n      coordinates: `${coordinates.latitude},${coordinates.longitude}`,\n      radius\n    };\n\n    response = await fetch(`${dealerApiUrl}/${country}/dealers?${getQueryString(requestParams)}`, {\n      method: 'GET',\n      headers\n    });\n  } catch (err) {\n    throw new NaviError('Unable to fetch dealers', NaviErrorTypes.GENERAL);\n  }\n\n  if (response.status === 400) {\n    throw new NaviError('dealerService.getPPNDealers failed with invalid coordinates', NaviErrorTypes.GENERAL);\n  }\n\n  if (response.status === 404) {\n    throw new NaviError(\n      'dealerService.getPPNDealers failed with invalid country code and therefore responded with no results',\n      NaviErrorTypes.NO_RESULTS\n    );\n  }\n\n  if (response.status !== 200) {\n    throw new NaviError('dealerService.getPPNDealers failed with invalid response', NaviErrorTypes.GENERAL);\n  }\n\n  try {\n    ppnDealerSearchResults = await response.json();\n  } catch (err) {\n    throw new NaviError(\n      'dealerService.getPPNDealers could not parse response into json format',\n      NaviErrorTypes.GENERAL\n    );\n  }\n\n  return ppnDealerSearchResults.map(({ dealer, ...rest }) => ({ ppnDealer: dealer, ...rest }));\n}\n\nexport async function getPPNDealer(\n  env: Environment,\n  dealerApiUrl: string,\n  id: string,\n  coordinates: LatLong,\n  country: string\n): Promise<PPNDealerSearchResult> {\n  // (LR/MX) 13.09.2022: If we ever remove the workaround, remember to map the dealer type to ppnDealer\n  let ppnDealer: PPNDealerSearchResult | undefined;\n\n  try {\n    const ppnDealerSearchResults = await getPPNDealers(env, dealerApiUrl, coordinates, country);\n    ppnDealer = ppnDealerSearchResults.find((dealerSearchResult) => id === dealerSearchResult.ppnDealer.id);\n  } catch (err) {\n    throw new NaviError('Unable to fetch a dealer', NaviErrorTypes.GENERAL);\n  }\n\n  if (ppnDealer === undefined) {\n    throw new NaviError(`Requested dealer ${id} could not be found`, NaviErrorTypes.NO_RESULTS);\n  }\n\n  return ppnDealer;\n}\n\nconst dealersByRegionMap = new Map<string, DealersByRegion | undefined>();\n\nexport async function getPPNDealerByRegion(id: string, region: string): Promise<PPNDealerSearchResult> {\n  const dealersOfRegion = await getPPNDealersByRegion(region);\n\n  const dealerResult = dealersOfRegion.regions\n    .flatMap(({ cities }) =>\n      cities.flatMap(({ dealers }) =>\n        Object.values(dealers).reduce<{ ppnDealer: PPNDealer }[]>((dealerList, dealer) => [...dealerList, dealer], [])\n      )\n    )\n    .find(({ ppnDealer }) => ppnDealer.id === id);\n\n  if (dealerResult === undefined) {\n    throw new NaviError(`Requested dealer could not be found`, NaviErrorTypes.NO_RESULTS);\n  }\n\n  return dealerResult;\n}\n\nexport async function getPPNDealersByRegion(region: string): Promise<DealersByRegion> {\n  const { env } = navStateStore.state;\n  const headers = new Headers();\n  let dealersByRegion: DealersByRegion | undefined;\n  if (dealersByRegionMap.has(region)) {\n    dealersByRegion = dealersByRegionMap.get(region);\n  } else {\n    const { BFF_ENDPOINT } = getConfig(env);\n\n    headers.set('Accept', '*/*');\n\n    const response = await fetch(`${BFF_ENDPOINT}/dealers/region/${region}?env=${env}`, {\n      method: 'GET',\n      headers\n    });\n\n    dealersByRegion = await response.json();\n    dealersByRegionMap.set(region, dealersByRegion);\n  }\n  if (dealersByRegion === undefined) {\n    throw new NaviError(`Requested dealer could not be found`, NaviErrorTypes.NO_RESULTS);\n  }\n  return dealersByRegion;\n}\n","import animationManager, {\n  AnimationStatusCallbacks,\n  makeSequence,\n  SequenceStep\n} from '../../services/animations/animation-manager';\nimport { AnimationSequences, AnimationSequencesType } from '../../utility/constants';\n\nexport type RouteChangeCallbacks = {\n  onSlideMainDrawerOutEnd: () => Promise<unknown>;\n};\n\nconst resetToFarRight = (el: HTMLElement) => {\n  el.style.left = '150%';\n  el.style.position = 'relative';\n};\n\nconst mainDrawerHTMLSelector = '#main-drawer > div:first-child';\n\nexport const registerOpenDoubleDrawerSequence = ({\n  onAnimationStarts,\n  onAnimationEnds\n}: Required<AnimationStatusCallbacks>): void => {\n  const sequence: SequenceStep[] = [\n    [\n      {\n        onStart: onAnimationStarts,\n        elementSelector: 'phn-double-drawer',\n        animation: {\n          className: 'opening-animation',\n          cleanUpAfterAnimation: (element) => {\n            element.style.left = '0px';\n          }\n        }\n      },\n      {\n        elementSelector: 'phn-backdrop',\n        animation: {\n          className: 'fade-in-animation',\n          cleanUpAfterAnimation: (element) => {\n            element.style.opacity = '1';\n            element.style.backgroundColor = 'rgba(0, 0, 0, 0.6)';\n          }\n        },\n        onEnd: onAnimationEnds\n      }\n    ]\n  ];\n\n  animationManager.register(AnimationSequences.OPEN_DOUBLE_DRAWER, makeSequence(sequence));\n};\n\nexport const registerCloseDoubleDrawerSequence = ({\n  onBackdropFadeOutEnd,\n  onAnimationStarts,\n  onAnimationEnds\n}: Required<AnimationStatusCallbacks> & {\n  onBackdropFadeOutEnd: () => Promise<void>;\n}): void => {\n  const sequence: SequenceStep[] = [\n    [\n      {\n        elementSelector: 'phn-double-drawer',\n        onStart: onAnimationStarts,\n        animation: {\n          className: 'closing-animation',\n          cleanUpBeforeAnimation: (element) => {\n            element.style.left = '';\n          }\n        }\n      },\n      {\n        elementSelector: 'phn-backdrop',\n        animation: {\n          className: 'fade-out-animation',\n          cleanUpBeforeAnimation: (element) => {\n            element.style.opacity = '';\n            element.style.backgroundColor = '';\n          }\n        },\n        onEnd: () => {\n          onBackdropFadeOutEnd();\n          onAnimationEnds();\n        }\n      }\n    ]\n  ];\n\n  animationManager.register(AnimationSequences.CLOSE_DOUBLE_DRAWER, makeSequence(sequence));\n};\n\nexport const registerTransitionSequence = (\n  { onSlideMainDrawerOutEnd }: RouteChangeCallbacks,\n  direction: 'normal' | 'reverse' = 'normal'\n): void => {\n  animationManager.register(\n    `transitionSameLevelDoubleDrawer${direction === 'reverse' ? 'Reverse' : ''}`,\n    makeSequence([\n      [\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className:\n              direction === 'reverse' ? 'transition-backward-animation-out' : 'transition-forward-animation-out',\n            cleanUpAfterAnimation: resetToFarRight\n          },\n          onEnd: onSlideMainDrawerOutEnd\n        }\n      ],\n      [\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: direction === 'reverse' ? 'transition-forward-animation-in' : 'transition-forward-animation-in',\n            cleanUpBeforeAnimation: (element) => {\n              element.style.left = '';\n              element.style.position = '';\n            }\n          }\n        }\n      ]\n    ])\n  );\n};\n\nexport const registerForwardToNextMenuSequence = ({ onSlideMainDrawerOutEnd }: RouteChangeCallbacks): void => {\n  animationManager.register(\n    'transitionNextLevelDoubleDrawer',\n    makeSequence([\n      [\n        {\n          elementSelector: '#side-drawer > div',\n          animation: {\n            className: 'transition-forward-animation-out'\n          }\n        },\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: 'transition-forward-animation-out'\n          },\n          onEnd: onSlideMainDrawerOutEnd\n        }\n      ],\n      [\n        {\n          elementSelector: '#side-drawer > div',\n          animation: {\n            className: 'transition-forward-animation-in'\n          }\n        },\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: 'transition-forward-animation-in'\n          }\n        }\n      ]\n    ])\n  );\n};\nexport const registerBackToPreviousMenuSequence = ({ onSlideMainDrawerOutEnd }: RouteChangeCallbacks): void => {\n  animationManager.register(\n    'transitionPreviousLevelDoubleDrawer',\n    makeSequence([\n      [\n        {\n          elementSelector: '#side-drawer > div',\n          animation: {\n            className: 'transition-backward-animation-out'\n          }\n        },\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: 'transition-backward-animation-out'\n          },\n          onEnd: onSlideMainDrawerOutEnd\n        }\n      ],\n      [\n        {\n          elementSelector: '#side-drawer > div',\n          animation: {\n            className: 'transition-backward-animation-in'\n          }\n        },\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: 'transition-backward-animation-in'\n          }\n        }\n      ]\n    ])\n  );\n};\n\nexport const isPlayingDoubleDrawerAnimation = (): boolean => {\n  const doubleDrawerAnimationSequences: AnimationSequencesType[] = [\n    AnimationSequences.OPEN_DOUBLE_DRAWER,\n    AnimationSequences.CLOSE_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_NEXT_LEVEL_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_PREVIOUS_LEVEL_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_SAME_LEVEL_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_SAME_LEVEL_DOUBLE_DRAWER_REVERSE\n  ];\n\n  return doubleDrawerAnimationSequences.some((sequence) => {\n    try {\n      return animationManager.isPlaying(sequence);\n    } catch {\n      return false;\n    }\n  });\n};\n","import { createStore } from '@stencil/store';\n\nexport interface FinderStateStoreTypes {\n  savedSearchesCount: number;\n  savedVehiclesCount: number;\n}\n\nexport const finderStateStore = createStore<FinderStateStoreTypes>({\n  savedSearchesCount: 0,\n  savedVehiclesCount: 0\n});\n","var M = Object.defineProperty;\nvar W = (r, t, e) => t in r ? M(r, t, { enumerable: !0, configurable: !0, writable: !0, value: e }) : r[t] = e;\nvar o = (r, t, e) => (W(r, typeof t != \"symbol\" ? t + \"\" : t, e), e);\nconst y = {\n  BEFORE_MERGE: \"BEFORE_MERGE\",\n  AFTER_MERGE: \"AFTER_MERGE\"\n}, w = {\n  clean: {\n    enabled: !1,\n    executionPlace: y.AFTER_MERGE,\n    values: [\"\", void 0, null]\n  },\n  logging: {\n    enabled: !0,\n    level: \"warn\"\n  },\n  validation: {\n    enabled: !1,\n    allowUnknown: !1,\n    verbose: !0\n  },\n  webProperties: {\n    enabled: !0,\n    eventNamePattern: /.*/,\n    reactiveUrl: !0,\n    reactiveDimensions: !0\n  }\n};\nclass U {\n  /**\n   * Creates a PCOM (default) data layer schema specific object, that contains the given event name.\n   *\n   * @param data - Contains the event name in a standardized {@link IFactoryData} like way.\n   *\n   * @returns The event name in the PCOM (default) data layer schema specific object.\n   *\n   * @example\n   * myEventNameFactory.create({ event: 'MY_EVENT_NAME' });\n   * // returns:\n   * // {\n   * //   context: {\n   * //     eventAction: 'MY_EVENT_NAME'\n   * //   }\n   * // }\n   */\n  create(t) {\n    return typeof t.event != \"string\" || t.event.length === 0 ? {} : {\n      context: {\n        eventAction: t.event\n      }\n    };\n  }\n}\nconst S = (r, t) => {\n  let e;\n  for (e in r)\n    if (!(!r || !r[e]) && t(r[e], e) === !1)\n      return !1;\n  return !0;\n}, _ = (r, t) => S(r, (e, s) => {\n  for (const i in r[s])\n    if (t(e[i], i, e, s) === !1)\n      return !1;\n  return !0;\n}), ne = (r) => {\n  if (m(r))\n    return !0;\n  let t = 0, e = 0;\n  return S(r, (s) => {\n    t++, m(s) && e++;\n  }), t === e;\n}, m = (r) => {\n  for (const t in r)\n    return !1;\n  return !0;\n}, P = (r, t = ((e) => (e = w.clean) == null ? void 0 : e.values)() || []) => (_(\n  r,\n  (s, i, n, l) => {\n    t.includes(s) && (delete n[i], m(n) && delete r[l]);\n  }\n), r), G = (r, t) => r && (_(\n  r,\n  (e, s, i, n) => {\n    t.includes(`${n.toString()}.${s.toString()}`) && (delete i[s], m(i) && delete r[n]);\n  }\n), r), k = (r) => (_(\n  r,\n  (t, e, s) => (typeof t != \"function\" || (s[e] = t()), !0)\n), r);\nclass H {\n  /**\n   * Creates a new instance of {@link FrameTicker}.\n   *\n   * @param callback The functionality that should be called\n   * @param ticksPerSecond How many times should the functionality been called in one second\n   */\n  constructor(t, e = 10) {\n    o(this, \"tickInterval\");\n    o(this, \"callback\");\n    o(this, \"_tickTime\", Date.now());\n    o(this, \"_tickActive\", !1);\n    this.callback = t, this.tickInterval = 1e3 / e;\n  }\n  /**\n   * Start the {@link FrameTicker}.\n   */\n  start() {\n    this._tickActive || (this._tickActive = !0, this.run());\n  }\n  /**\n   * Stop the {@link FrameTicker}.\n   */\n  stop() {\n    this._tickActive = !1;\n  }\n  /**\n   * Internal function executed on each _tick_.\n   *\n   * @private\n   */\n  run() {\n    if (!this._tickActive)\n      return;\n    requestAnimationFrame(this.run.bind(this));\n    const t = Date.now(), e = t - this._tickTime;\n    e < this.tickInterval || (this._tickTime = t - e % this.tickInterval, this.callback());\n  }\n}\nconst B = (r, t) => {\n  const e = t.split(\".\");\n  if (e.length !== 2)\n    return;\n  const s = r[e[0]];\n  if (s)\n    return s[e[1]];\n}, C = (r) => {\n  if (!r)\n    return [];\n  const t = [];\n  return _(\n    r,\n    (e, s, i, n) => {\n      t.push(`${n.toString()}.${s.toString()}`);\n    }\n  ), t;\n}, j = w.logging;\nvar x = /* @__PURE__ */ ((r) => (r[r.error = 0] = \"error\", r[r.warn = 1] = \"warn\", r[r.log = 2] = \"log\", r))(x || {});\nconst v = class v {\n  /**\n   * Creates an instance of the {@link Logger} class.\n   *\n   * @param prefix A prefix that is used in all logs\n   *   (`[PREFIX] MESSAGE`, i.e. `[GlobalDataLayer] This is a serious message`).\n   * @param options Options to be merged as settings with the {@link DEFAULT_SETTINGS.logging}.\n   */\n  constructor(t, e) {\n    /**\n     * The prefix that is used in all logs.\n     * @private\n     */\n    o(this, \"prefix\");\n    /**\n     * The merged settings. Also see the options of the {@link constructor} and the {@link DEFAULT_SETTINGS.logging}.\n     *\n     * @see {@link TLoggerSettings}\n     *\n     * @private\n     */\n    o(this, \"settings\");\n    this.prefix = t, this.settings = {\n      ...j,\n      ...e\n    };\n  }\n  /**\n   * Helper function to merge the options of a log method call with the current {@link settings}.\n   *\n   * @param options  Options to be merged with the available {@link settings}\n   *\n   * @returns The merged temporary settings.\n   *\n   * @private\n   */\n  _getMergedSettings(t) {\n    return t ? {\n      ...this.settings,\n      ...t\n    } : this.settings;\n  }\n  /**\n   * Check, if this log message is allowed.\n   *\n   * @see {@link TLoggerSettings.enabled} and {@link TLoggerSettings.level} and {@link isAvailable}\n   *\n   * @param type Type of the current log message.\n   * @param settings The current (temporary) settings.\n   *\n   * @returns `true`if the log message is allowed.\n   *\n   * @private\n   */\n  _isAllowed(t, e) {\n    if (!v.isAvailable || !e.enabled)\n      return !1;\n    const s = x[e.level];\n    switch (t) {\n      case \"error\":\n      case \"warn\":\n        return s >= x[t];\n      case \"info\":\n      case \"log\":\n      case \"debug\":\n      case \"dir\":\n        return s >= 2;\n      default:\n        return !1;\n    }\n  }\n  /**\n   * A helper method to execute the log messages of all different types.\n   *\n   * @param msg The message text.\n   * @param type The type of the message.\n   * @param options Temporary options, that will be merged with the current {@link settings}.\n   *\n   * @private\n   */\n  _log(t, e = \"log\", s) {\n    const i = this._getMergedSettings(s);\n    if (this._isAllowed(e, i))\n      switch (e) {\n        case \"dir\":\n          console.log(`[${this.prefix}] ${e}:`), console[e](t);\n          break;\n        default:\n          console[e](`[${this.prefix}] ${t}`);\n      }\n  }\n  /**\n   * Write a normal log message.\n   *\n   * @param msg The message text.\n   * @param options Temporary options, that will be merged with the current {@link settings}.\n   */\n  log(t, e) {\n    this._log(t, \"log\", e);\n  }\n  /**\n   * Write a log message of type `dir`.\n   *\n   * This message will be split in two messages, the prefix with \" dir:\" and the\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/console/dir dir} output as interactive list.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/console/dir console.dir()}\n   *\n   * @param msg The message text.\n   * @param options Temporary options, that will be merged with the current {@link settings}.\n   */\n  dir(t, e) {\n    this._log(t, \"dir\", e);\n  }\n  /**\n   * Write a log message of type `debug`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/console/debug console.debug()}\n   *\n   * @param msg The message text.\n   * @param options Temporary options, that will be merged with the current {@link settings}.\n   */\n  debug(t, e) {\n    this._log(t, \"debug\", e);\n  }\n  /**\n   * Write a log message of type `error`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/console/error console.error()}\n   *\n   * @param msg The message text.\n   * @param options Temporary options, that will be merged with the current {@link settings}.\n   */\n  error(t, e) {\n    this._log(t, \"error\", e);\n  }\n  /**\n   * Write a log message of type `info`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/console/info console.info()}\n   *\n   * @param msg The message text.\n   * @param options Temporary options, that will be merged with the current {@link settings}.\n   */\n  info(t, e) {\n    this._log(t, \"info\", e);\n  }\n  /**\n   * Write a log message of type `warn`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/console/warn console.warn()}\n   *\n   * @param msg The message text.\n   * @param options Temporary options, that will be merged with the current {@link settings}.\n   */\n  warn(t, e) {\n    this._log(t, \"warn\", e);\n  }\n};\n/**\n * Check if there is a console available that makes logging possible.\n */\no(v, \"isAvailable\", (() => typeof console < \"u\")());\nlet b = v;\nconst u = (...r) => {\n  const t = {};\n  return r.forEach((e) => {\n    if (m(e))\n      return;\n    const s = {\n      ...t,\n      ...e\n    };\n    let i;\n    for (i in s)\n      typeof s[i] == \"object\" && !Array.isArray(s[i]) ? t[i] = {\n        ...t[i],\n        ...e[i]\n      } : t[i] = s[i];\n  }), t;\n};\nclass q {\n  /**\n   * Creates a PCOM (default) data layer schema specific object, that contains the given web properties.\n   *\n   * @param data - Contains the web properties in a standardized {@link IFactoryData} like way.\n   *\n   * @returns The given web properties in the PCOM (default) data layer schema specific object.\n   *\n   * @example\n   * myWebPropertiesFactory.create({ userAgent: 'MY_USE_AGENT' });\n   * // returns:\n   * // {\n   * //   visitor: {\n   * //     userAgent: 'MY_USE_AGENT'\n   * //   }\n   * // }\n   */\n  create(t) {\n    return P(\n      {\n        context: {\n          timestamp: t.timestamp,\n          server: t.hostname\n        },\n        pageExperience: {\n          pageId: t.url\n        },\n        visitor: {\n          deviceBrowserBreakpoint: t.breakpoint,\n          deviceBrowserHeight: t.height,\n          deviceBrowserOrientation: t.orientation,\n          deviceBrowserWidth: t.width,\n          deviceType: t.deviceType,\n          useragent: t.userAgent\n        }\n      },\n      [void 0]\n    );\n  }\n}\nconst K = w.webProperties, V = () => window.location.href.replace(/[?#].*/, \"\"), Y = () => (/* @__PURE__ */ new Date()).toISOString(), Q = () => window.location.hostname, R = () => window.innerHeight.toString(), D = () => window.innerHeight > window.innerWidth ? \"p\" : \"l\", T = () => window.innerWidth.toString(), X = () => window.matchMedia(\"(hover: none), (pointer: coarse)\").matches ? \"mobile\" : \"desktop\", z = () => window.navigator.userAgent, J = (r) => {\n  if (!r.breakpoints || r.breakpoints.length < 1)\n    return;\n  const { breakpoints: t } = r, e = () => {\n    const s = window.innerWidth;\n    let i = 0, n = 0;\n    for (; n < t.length && s >= t[n]; )\n      i = t[n], n++;\n    return i.toString();\n  };\n  return r.reactiveDimensions ? e : e();\n}, Z = (r, t) => {\n  const e = {\n    ...K,\n    ...r\n  }, i = {\n    breakpoint: J(e),\n    timestamp: Y(),\n    hostname: Q(),\n    url: e.reactiveUrl ? V : V(),\n    height: e.reactiveDimensions ? R : R(),\n    orientation: e.reactiveDimensions ? D : D(),\n    width: e.reactiveDimensions ? T : T(),\n    deviceType: X(),\n    userAgent: z()\n  };\n  return t ? t.create(i) : i;\n}, ee = (r, t) => {\n  switch (t) {\n    case \"string\":\n    case \"number\":\n    case \"boolean\":\n      return typeof r === t;\n    case \"any[]\":\n      return Array.isArray(r) && r.length > 0;\n    case \"Record<string, any>\":\n      return typeof r == \"object\" && !Array.isArray(r) && Object.keys(r).length > 0;\n    case \"any\":\n      return !0;\n    default:\n      if ((typeof r == \"boolean\" || typeof r == \"number\" || typeof r == \"string\") && t.indexOf(\"|\") > 0)\n        return t.split(\"|\").map((s) => {\n          const i = s.trim();\n          return /^'.*'$/.test(i) ? i.replace(/(^ ?'?|'? ?$)/g, \"\") : /^(true|false)$/.test(i) ? i === \"true\" : /^-?(\\d*\\.)?\\d+$/.test(i) ? Number.parseFloat(i) : i.replace(/(^ ?'?|'? ?$)/g, \"\");\n        }).includes(r);\n  }\n  return !0;\n}, te = (r, t, e) => {\n  const s = {\n    level: null,\n    issues: []\n  };\n  if (!e.enabled || !e.eventMatrix)\n    return s;\n  const { events: i, ...n } = e.eventMatrix, l = i.indexOf(r);\n  if (l === -1)\n    return s.level = \"error\", s.issues.push({\n      level: \"error\",\n      type: \"EVENT_NOT_FOUND\",\n      name: r,\n      message: `'${r}': Event does not exist.`\n    }), s;\n  const a = C(t), d = Object.keys(n), c = a.filter(\n    (g) => !d.includes(g)\n  );\n  c.length > 0 && (e.allowUnknown || G(t, c), c.forEach((g) => {\n    s.level = s.level ?? \"warn\", s.issues.push({\n      level: \"warn\",\n      type: \"PROPERTY_DOES_NOT_EXIST\",\n      name: g,\n      message: `'${g}': Property does not exist in the given Event Matrix.${e.allowUnknown ? \"\" : \" It was omitted from the DataLayer payload.\"}`\n    });\n  }));\n  let h;\n  for (h in n) {\n    const g = n[h], f = typeof g.e[l] < \"u\", p = g.r === 1, E = t ? B(t, h) : void 0, N = typeof E < \"u\";\n    if (f && // Does the event want this property?\n    p && // Is the property mandatory in general?\n    !N && (s.level = \"error\", s.issues.push({\n      level: \"error\",\n      type: \"REQUIRED_PROPERTY_MISSING\",\n      name: h,\n      message: `'${h}': The required property is missing.`\n    }), !e.verbose) || N && !ee(E, g.t) && (s.level = \"error\", s.issues.push({\n      level: \"error\",\n      type: \"WRONG_PROPERTY_TYPE\",\n      name: h,\n      message: `'${h}': Wrong type detected. Expected '${g.t}', got '${typeof E}'.`\n    }), !e.verbose))\n      return s;\n  }\n  return s;\n};\nclass L {\n  constructor(t = \"DataLayerExtension\", e) {\n    /**\n     * A\n     * @protected\n     */\n    o(this, \"_logger\");\n    o(this, \"_className\");\n    o(this, \"_dataLayerInstance\");\n    this._className = t, this._logger = new b(this.className, e);\n  }\n  get dataLayerInstance() {\n    return this._dataLayerInstance;\n  }\n  set dataLayerInstance(t) {\n    this._dataLayerInstance = t;\n  }\n  get className() {\n    return this._className;\n  }\n  set className(t) {\n    this._className = t;\n  }\n  get isRegistered() {\n    return typeof this._dataLayerInstance < \"u\";\n  }\n}\nconst A = {\n  eventName: \"UNKNOWN\",\n  thresholds: {\n    filled: 0.5,\n    visible: 0.3,\n    minValidityPeriod: 1\n  },\n  triggerUpdates: {\n    enabled: !1,\n    eventName: \"VIEWPORT_TRACKER_STATUS_CHANGE\"\n  },\n  tickerSettings: {\n    ticksPerSecond: 10\n  }\n};\nclass se extends Event {\n  constructor(e, s) {\n    super(e);\n    o(this, \"registeredElement\");\n    this.registeredElement = s;\n  }\n}\nclass $ extends L {\n  /**\n   * Creates a new instance of {@link ViewportTrackerExtension} with optional settings of type\n   * {@link TViewportTrackerSettings}.\n   *\n   * @param options The settings to initialize the instance. Will be merged with the defaults.\n   */\n  constructor(e) {\n    var s;\n    super(\"ViewportTrackerExtension\", e == null ? void 0 : e.logger);\n    o(this, \"settings\");\n    o(this, \"observer\", null);\n    o(this, \"frameTicker\");\n    o(this, \"registeredElements\", []);\n    o(this, \"visibleElements\", []);\n    this.settings = e ? u(A, e) : A, this.observer = this.createObserver(), this.frameTicker = new H(\n      this.checkVisibilityOfElements.bind(this),\n      (s = this.settings.tickerSettings) == null ? void 0 : s.ticksPerSecond\n    );\n  }\n  /**\n   * Will create and return the mandatory {@link IntersectionObserver}. The function will log an error if this is not\n   * possible.\n   *\n   * @returns The ready-to-use {@link IntersectionObserver} instance or null.\n   *\n   * @private\n   */\n  createObserver() {\n    return !window || !(\"IntersectionObserver\" in window) ? (this._logger.error(\"The ViewportTrackerExtension will need IntersectionObserver to work.\"), null) : new IntersectionObserver(this.observerHandler.bind(this), {\n      threshold: 0,\n      rootMargin: \"0px 0px\"\n    });\n  }\n  /**\n   * Register an {@link HTMLElement} to be observed.\n   *\n   * @param element The {@link HTMLElement} to register with optional _DataLayer_ properties.\n   */\n  registerElement(e) {\n    var s;\n    this.unregisterElement(e.el), this.registeredElements.push({\n      el: e.el,\n      properties: e.properties,\n      state: {\n        isFilled: !1,\n        isVisible: !1,\n        passedValidityPeriod: !1\n      }\n    }), (s = this.observer) == null || s.observe(e.el);\n  }\n  /**\n   * Register multiple {@link HTMLElement}s to be observed.\n   *\n   * @param elements The {@link HTMLElement}s to register with optional _DataLayer_ properties.\n   */\n  registerElements(e) {\n    for (const s of e)\n      this.registerElement(s);\n  }\n  /**\n   * Unregister an {@link HTMLElement} from observation.\n   *\n   * @param element The {@link HTMLElement} to unregister.\n   */\n  unregisterElement(e) {\n    var i;\n    (i = this.observer) == null || i.unobserve(e);\n    const s = this.getRegisteredElementIndex(e);\n    s < 0 || this.registeredElements.splice(s, 1);\n  }\n  /**\n   * Unregister multiple {@link HTMLElement}s from observation.\n   *\n   * @param elements The {@link HTMLElement}s to unregister.\n   */\n  unregisterElements(e) {\n    for (const s of e)\n      this.unregisterElement(s);\n  }\n  /**\n   * Helper function to retrieve the index of a registered {@link HTMLElement} from the `registeredElements` array.\n   *\n   * @param el The {@link HTMLElement} to find.\n   * @returns The index of the element if found, otherwise `-1`.\n   *\n   * @private\n   */\n  getRegisteredElementIndex(e) {\n    return this.registeredElements.findIndex((s) => s.el === e);\n  }\n  /**\n   * Helper function to retrieve a registered {@link HTMLElement} from the `registeredElements` array.\n   *\n   * @param el The {@link HTMLElement} to find.\n   *\n   * @returns The found element, otherwise `undefined`.\n   *\n   * @private\n   */\n  getRegisteredElement(e) {\n    const s = this.getRegisteredElementIndex(e);\n    if (!(s < 0))\n      return this.registeredElements[s];\n  }\n  /**\n   * The {@link IntersectionObserver} callback function to handle updates to the registered {@link TRegisteredElement}s\n   * {@link HTMLElement}s. Registers or unregisters items based on the given settings and changes their state.\n   *\n   * @param entries Intersection element entries.\n   *\n   * @private\n   */\n  observerHandler(e) {\n    for (const s of e) {\n      const i = s.target, n = this.getRegisteredElement(i);\n      if (n) {\n        if (s.isIntersecting) {\n          this.visibleElements.findIndex((l) => l === n.el) === -1 && this.visibleElements.push(n.el);\n          continue;\n        }\n        this.removeFromVisibleStore(n.el), (n.state.isFilled || n.state.isVisible) && requestAnimationFrame(() => {\n          this.processViewportIntersection(n, {\n            isVisible: !1,\n            isFilled: !1,\n            passedValidityPeriod: !1\n          });\n        });\n      }\n    }\n    this.visibleElements.length > 0 && this.frameTicker.start();\n  }\n  /**\n   * Callback for the {@link FrameTicker} to frequently check the state of all elements which are currently marked as\n   * _in the viewport_.\n   *\n   * @private\n   */\n  checkVisibilityOfElements() {\n    if (this.visibleElements.length === 0)\n      return;\n    const e = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0), s = window.scrollY;\n    for (let i = 0; i < this.visibleElements.length; i++) {\n      const n = this.visibleElements[i], l = this.getRegisteredElement(n);\n      if (!l || !this.settings.triggerUpdates.enabled && l.state.passedValidityPeriod)\n        continue;\n      const { isVisible: a, isFilled: d } = $.percentWithinViewport(n, s, e), c = {\n        isVisible: a >= this.settings.thresholds.visible,\n        isFilled: d >= this.settings.thresholds.filled,\n        passedValidityPeriod: l.state.passedValidityPeriod\n      };\n      this.processViewportIntersection(l, c);\n    }\n  }\n  /**\n   * Get to know how much of the {@link HTMLElement} is visible the viewport.\n   *\n   * @param el The element in the viewport.\n   * @param scrollY The scrollY of the current window.\n   * @param viewportHeight The height of the viewport.\n   *\n   * @returns The % visible of the HTMLElement in the viewport.\n   *\n   * @private\n   */\n  static percentWithinViewport(e, s, i) {\n    const n = { top: s, bottom: s + i }, l = e.getBoundingClientRect(), a = {\n      top: l.y + s,\n      bottom: l.y + l.height + s\n    }, d = l.height;\n    let c = d;\n    a.top < n.top && (c = d - (s - a.top)), a.bottom > n.bottom && (c = c - (a.bottom - n.bottom));\n    let h = c / d, g = c / i;\n    return (n.top > a.bottom || n.bottom < a.top) && (h = 0, g = 0), n.top < a.top && n.bottom > a.bottom && (h = 1), a.top < n.top && a.bottom > n.bottom && (g = 1), {\n      isVisible: h,\n      isFilled: g\n    };\n  }\n  /**\n   * Processes a {@link TRegisteredElement} items intersection. If the element matches the\n   * {@link TViewportTrackerSettings.thresholds `thresholds`}, the {@link IGlobalDataLayer.push} method is called.\n   *\n   * Also dispatches the update event of the {@link TViewportTrackerSettings.triggerUpdates `triggerUpdates`} feature.\n   *\n   * @param registeredElement The registered element to process.\n   * @param isVisible Indicates, if the element is {@link TViewportTrackerSettings.thresholds.visible visible}.\n   * @param isFilled Indicates, if the element is {@link TViewportTrackerSettings.thresholds.filled filled}.\n   *\n   * @private\n   */\n  processViewportIntersection(e, { isVisible: s, isFilled: i }) {\n    const n = e.state || {\n      isVisible: !1,\n      isFilled: !1\n    }, l = Date.now(), a = {\n      isVisible: s,\n      isFilled: i,\n      timeVisible: n.isVisible !== s ? l : n.timeVisible,\n      timeFilled: n.isFilled !== i ? l : n.timeFilled,\n      passedValidityPeriod: n.passedValidityPeriod\n    }, d = (c) => (l - c) / 1e3;\n    if (n.isVisible !== a.isVisible || n.isFilled !== a.isFilled)\n      a.passedValidityPeriod = !1, e.state = a, this.dispatchEvent(e);\n    else if (!a.passedValidityPeriod && (a.isVisible || a.isFilled)) {\n      const c = d(a.timeVisible), h = d(a.timeFilled);\n      (s && c >= this.settings.thresholds.minValidityPeriod || i && h >= this.settings.thresholds.minValidityPeriod) && (a.passedValidityPeriod = !0, e.state = a, this.pushEvent(e), this.dispatchEvent(e));\n    }\n  }\n  /**\n   * Helper function to remove an {@link HTMLElement} from the state of being in the viewport. This will stop the\n   * {@link FrameTicker} checks from being processed for this {@link TRegisteredElement}.\n   *\n   * @param element The HTMLElement to remove.\n   *\n   * @private\n   */\n  removeFromVisibleStore(e) {\n    let s = -1;\n    for (; (s = this.visibleElements.findIndex((i) => i === e)) >= 0; )\n      this.visibleElements.splice(s, 1);\n    this.visibleElements.length === 0 && this.frameTicker.stop();\n  }\n  /**\n   * Will call the {@link IGlobalDataLayer.push} with the given {@link TViewportTrackerSettings.eventName `eventName`},\n   * whenever a {@link TRegisteredElement} matches the given {@link TViewportTrackerSettings.thresholds `thresholds`}.\n   *\n   * @param item The registered {@link HTMLElement} with its {@link TRegisteredElement.properties `properties` payload}.\n   *\n   * @private\n   */\n  pushEvent(e) {\n    if (!this.dataLayerInstance) {\n      this._logger.warn(\"This extension is not registered to a GlobalDataLayer instance.\");\n      return;\n    }\n    const { properties: s } = e, i = typeof s == \"function\" ? s() : s || {};\n    this.dataLayerInstance.push(this.settings.eventName, i);\n  }\n  /**\n   * Dispatches a {@link ViewportTrackerStatusChangeEvent}.\n   *\n   * @param registeredElement The registered {@link HTMLElement} to use as target.\n   *\n   * @private\n   */\n  dispatchEvent(e) {\n    this.settings.triggerUpdates && this.settings.triggerUpdates.enabled && e.el.dispatchEvent(\n      new se(this.settings.triggerUpdates.eventName, e)\n    );\n  }\n}\nconst F = (r) => r.length > 0, O = \"PageNameExtender_unknown_pageName\", I = {\n  initialPageName: O,\n  separator: \"/\"\n};\nclass ae extends L {\n  /**\n   * Constructor of PageNameExtender\n   *\n   * @param options Settings object for this extension.\n   */\n  constructor(e) {\n    super(\"PageNameExtenderExtension\", e == null ? void 0 : e.logger);\n    o(this, \"settings\");\n    /**\n     * Internal page name store. To handle the different levels.\n     */\n    o(this, \"pageName\", []);\n    /**\n     * Internal basic page name length. This is defined in the {@link set} method and used to make sure there is\n     * an option to keep ({@link reduce}) or replace ({@link set}) the basic page name.\n     */\n    o(this, \"basePageNameLength\", 0);\n    this.settings = e ? u(I, e) : I, this.set(this.settings.initialPageName);\n  }\n  /**\n   * Update the complete stored {@link pageName} with a string or an array of strings.\n   *\n   * @param pageName If a simple string is given, it will be separated by the given {@link settings} separator.\n   * @param keepExtensions Keep the parts which were added by {@link extend} method.\n   *\n   * @returns The new {@link pageName} joined with the {@link settings} separator.\n   */\n  set(e, s = !1) {\n    const i = this.basePageNameLength;\n    return typeof e == \"string\" && (e = e.split(this.settings.separator).filter(F)), e.length === 0 ? (this._logger.warn(\"`pageName` must not be empty\"), \"\") : (e[0] === O && this._logger.info(\n      \"No `initialPageName` was provided. Make sure the `pageName` is provided later via the `set` method.\"\n    ), this.basePageNameLength = e.length, s && e.push(...this.pageName.slice(i - 1)), this.pageName = e, this.get());\n  }\n  /**\n   * Get the current {@link pageName}.\n   *\n   * @param basePageNameOnly If you want to ignore the parts which were added by {@link extend}.\n   *\n   * @returns The current {@link pageName} joined with the {@link settings} separator.\n   */\n  get(e = !1) {\n    return (e ? this.pageName.slice(0, this.basePageNameLength) : this.pageName).join(\n      this.settings.separator\n    );\n  }\n  /**\n   * Add (multiple) sub levels to the {@link pageName}.\n   *\n   * @param levels If a simple string is given it will be split by the given {@link settings} separator.\n   *\n   * @returns The new {@link pageName} joined with the given {@link settings} separator.\n   */\n  extend(e) {\n    return Array.isArray(e) && (e = e.join(this.settings.separator)), e = e.split(this.settings.separator).filter(F), e.length === 0 ? this._logger.warn(\"`levels` must not be empty\") : this.pageName.push(...e), this.get();\n  }\n  /**\n   * Remove (multiple) sub levels from the {@link pageName}.\n   *\n   * @param [levelCount='last'] Number of levels that should be removed. You can also use a\n   *   {@link TPageNameExtenderReduceType} to define the \"last\" or \"all\" (except the root).\n   * @param keepBasePageName If the basic page name given by {@link set} should also be reducible. This\n   *   cannot be restored.\n   *\n   * @returns The new {@link pageName} joined with the given {@link settings} separator.\n   */\n  reduce(e = \"last\", s = !0) {\n    let i;\n    return e === \"all\" ? i = this.pageName.length - (s ? this.basePageNameLength : 1) : e === \"last\" ? i = this.pageName.length > (s ? this.basePageNameLength : 1) ? 1 : 0 : (i = e, (this.pageName.length <= e || s && this.pageName.length - this.basePageNameLength < e) && (this._logger.info(\n      `${this.pageName.length - (s ? this.basePageNameLength : 1)} - ${e} must not delete first level or more`\n    ), i = this.pageName.length - (s ? this.basePageNameLength : 1))), this.pageName.splice(i * -1, i), this.basePageNameLength > this.pageName.length && (this.basePageNameLength = this.pageName.length), this.get();\n  }\n  /**\n   * Get a temporary pre-fixed version of the current {@link pageName}.\n   *\n   * @param [prefix=''] The value that should be prepended temporarily.\n   *\n   * @returns The current {@link pageName} joined with the given {@link settings} separator pre-fixed with the given\n   *   string value.\n   */\n  getWithPrefix(e = \"\") {\n    return e + this.get();\n  }\n  /**\n   * Get a temporary post-fixed version of the current {@link pageName}.\n   *\n   * @param [postfix=''] The value that should be appended temporarily.\n   *\n   * @returns The current {@link pageName} joined with the given {@link Settings} separator post-fixed with the given\n   *   string value.\n   */\n  getWithPostfix(e = \"\") {\n    return this.get() + e;\n  }\n}\nclass ie {\n  /**\n   * Create an instance of the GlobalDataLayer library. This constructor has to be overwritten to initialize the needed\n   * factories ({@link _eventNamePayloadFactory} and {@link _webPayloadFactory}).\n   *\n   * @param options All options are merged with the {@link DEFAULT_SETTINGS} of type {@link TSettings}.\n   * @param [dataStore] The array where all the pushes are added to. The default tries to get or generate the\n   *   `window.pagData` array. If this is not possible, it creates an empty array, that is exposed via\n   *   {@link DataLayerStore}.\n   * @param [className] The class name of the library is here, because code can be uglified and/or minified later.\n   *\n   * @protected\n   */\n  constructor(t, e, s = \"GlobalDataLayer\") {\n    /**\n     * The class name of the library. This is needed, because code can be uglified and/or minified later.\n     * @protected\n     */\n    o(this, \"_className\");\n    /**\n     * The merged settings. Also see the options of the {@link constructor} and the {@link DEFAULT_SETTINGS}.\n     * @protected\n     */\n    o(this, \"_settings\");\n    /**\n     * An internal store where all default properties are added to.\n     * @protected\n     */\n    o(this, \"_defaultProperties\");\n    /**\n     * An internal logger, which has to be used for all console logs.\n     * @protected\n     */\n    o(this, \"_logger\");\n    /**\n     * A flag that indicates if the _Web Properties_ feature was already handled.\n     *\n     * @see {@link getWebProperties}\n     *\n     * @protected\n     */\n    o(this, \"_webPropertiesHandled\", !1);\n    /**\n     * the _DataLayer_ store array, that is used to push all the data.\n     *\n     * This can be transferred to the library with the second parameter `dataStore` of the {@link constructor}.\n     *\n     * @protected\n     */\n    o(this, \"_dataLayerStore\");\n    /**\n     * An internal store where all registered extensions are added to.\n     * @protected\n     */\n    o(this, \"_extensions\", /* @__PURE__ */ new Map());\n    const i = u(\n      w,\n      t || {}\n    );\n    this._className = s, this._logger = new b(this._className, i.logging), this._settings = i, e ? this._dataLayerStore = e : typeof window < \"u\" ? (this._dataLayerStore = window.pagData = window.pagData || [], this._logger.info(\"`dataLayerStore` was set to default `window.pagData`\")) : (this._dataLayerStore = [], this._logger.info(\"`dataLayerStore` was set to default `[]`\")), this._defaultProperties = [];\n  }\n  /**\n   * An internal function to set everything up after initialization is done. This has to be called at the end of the\n   * overwritten constructors.\n   * @protected\n   */\n  setup() {\n    this._handleDefaultWebProperties();\n  }\n  /**\n   * The current settings object.\n   * @readonly\n   */\n  get Settings() {\n    return this._settings;\n  }\n  /**\n   * Get the _DataLayer_ store, that is used to push all the data.\n   * @readonly\n   */\n  get DataLayerStore() {\n    return this._dataLayerStore;\n  }\n  /**\n   * Get a registered {@link DataLayerExtension} class instance based of the input type.\n   *\n   * @param TConstructor The class to search for.\n   *\n   * @returns The registered instance of the extension class, `undefined` if not found.\n   */\n  getRegisteredExtension(t) {\n    const e = new t();\n    return this.getRegisteredExtensionByClassName(e.className);\n  }\n  /**\n   * Get a registered {@link DataLayerExtension} class instance based of a classname.\n   *\n   * @param className The name of class instance to compare.\n   *\n   * @returns The registered instance of the extension class, undefined if not found.\n   */\n  getRegisteredExtensionByClassName(t) {\n    return this._extensions.has(t) ? this._extensions.get(t) : void 0;\n  }\n  /**\n   * Get all registered {@link DataLayerExtension}.\n   *\n   * @returns All registered DataLayerExtensions as array.\n   */\n  getRegisteredExtensions() {\n    const t = [];\n    for (const e of this._extensions.values())\n      t.push(e);\n    return t;\n  }\n  /**\n   * Register a new {@link DataLayerExtension} class for this instance.\n   *\n   * @param extension The extension class instance to register.\n   * @param override If there is an existing instance already registered, we override it, otherwise we do nothing.\n   */\n  registerExtension(t, e = !1) {\n    if (!e && this._extensions.has(t.className)) {\n      this._logger.warn(`Tried to register extension class <${t.className}> which already exists.`);\n      return;\n    }\n    t.dataLayerInstance = this, this._extensions.set(t.className, t), e ? this._logger.info(`Overriden registration for extension class <${t.className}>.`) : this._logger.info(`Registered extension class <${t.className}>.`);\n  }\n  /**\n   * Remove a registered {@link DataLayerExtension} instance.\n   *\n   * @param TConstructor The class to search for.\n   */\n  removeExtension(t) {\n    const e = new t();\n    if (this._extensions.has(e.className)) {\n      this._extensions.delete(e.className);\n      return;\n    }\n    this._logger.warn(`Tried to remove not existing extension class <${e.className}>.`);\n  }\n  /**\n   * Remove a registered {@link DataLayerExtension} instance by class name.\n   *\n   * @param className the name of the class\n   */\n  removeExtensionByClassName(t) {\n    if (this._extensions.has(t)) {\n      this._extensions.delete(t);\n      return;\n    }\n    this._logger.warn(`Tried to remove not existing extension class <${t}>.`);\n  }\n  /**\n   * Push a GlobalDataLayer Event with payload to the given data layer store. The method can fail and return `false`\n   *   because ...\n   *\n   *   - the given `eventName` was invalid\n   *   - the validation failed\n   *\n   * A settings object can be added as the third parameter to every call. This will then temporary override the provided\n   * settings for the time of the push action.\n   *\n   * @param eventName The name of the event that should be pushed.\n   * @param [payload] The _DataLayer_ properties to be merged and added to the data layer.\n   * @param [options] Temporary override the settings.\n   *\n   * @returns A boolean to indicate, if the push was successful.\n   */\n  push(t, e = [{}], s) {\n    var d, c;\n    if (t.length === 0)\n      return !1;\n    const i = s && !m(s) ? u(this._settings, s) : this._settings;\n    Array.isArray(e) || (e = [e]), e.forEach(k);\n    const n = this._eventNamePayloadFactory.create({ event: t }), l = k(this.getDefaultProperties(t));\n    i.clean.enabled && i.clean.executionPlace === y.BEFORE_MERGE && [l || {}, ...e].forEach(\n      (h) => P(h, i.clean.values)\n    );\n    const a = u(\n      n,\n      l || {},\n      ...e\n    );\n    if (i.clean.enabled && i.clean.executionPlace === y.AFTER_MERGE && P(a, i.clean.values), (d = i == null ? void 0 : i.validation) != null && d.enabled && ((c = i == null ? void 0 : i.validation) != null && c.eventMatrix)) {\n      const h = te(t, a, i.validation), g = h.issues.sort((f, p) => f.level !== p.level && p.level === \"warn\" ? -1 : 0).map((f) => `- [${f.level}]: ${f.message}`).join(`\n`);\n      switch (h.level) {\n        case \"error\":\n          return this._logger.error(\n            `Validation failed for event '${t}' with errors/warnings: \n${g}`,\n            i.logging\n          ), !1;\n        case \"warn\":\n          this._logger.warn(\n            `Validation success for event '${t}' with warnings: \n${g}`,\n            i.logging\n          );\n          break;\n        default:\n          this._logger.info(`Validation success for event '${t}'.`, i.logging);\n          break;\n      }\n    }\n    return this._dataLayerStore.push(a), !0;\n  }\n  /**\n   * Return the default properties for the given identifier.\n   *\n   * @param identifier The identifier to get the default properties for.\n   *\n   * @returns The found default properties for the identifier, otherwise `undefined`.\n   */\n  getDefaultProperties(t) {\n    const e = {\n      byName: [],\n      byArray: [],\n      byRegex: []\n    };\n    this._defaultProperties.forEach((i) => {\n      if (i.identifier === t)\n        return e.byName.push(i.data);\n      if (Array.isArray(i.identifier) && i.identifier.includes(t))\n        return e.byArray.push(i.data);\n      if (i.identifier instanceof RegExp && i.identifier.test(t))\n        return e.byRegex.push(i.data);\n    });\n    const s = [...e.byRegex, ...e.byArray, ...e.byName];\n    if (s.length)\n      return u(...s);\n  }\n  /**\n   * Set default properties, which will later be merged with the payload of a {@link push}, when the provided identifier\n   * matches the `eventName`.\n   *\n   * @param identifier The identifier to use the default properties for.\n   * @param data The default properties which will be used with the provided identifier to merge those properties with the payload.\n   */\n  setDefaultProperties(t, e) {\n    const s = this._defaultProperties.find((i) => i.identifier === t);\n    if (s) {\n      s.data = u(s.data, e);\n      return;\n    }\n    this._defaultProperties.push({\n      identifier: t,\n      data: e\n    });\n  }\n  /**\n   * Checks if the web properties feature ({@link getWebProperties}) is already handled or does the setup with the\n   * current settings.\n   *\n   * @private\n   */\n  _handleDefaultWebProperties() {\n    if (this._webPropertiesHandled || !this._settings.webProperties.enabled)\n      return;\n    const t = Z(\n      this._settings.webProperties,\n      this._webPayloadFactory\n    );\n    this.setDefaultProperties(this._settings.webProperties.eventNamePattern, t), this._webPropertiesHandled = !0;\n  }\n}\nclass oe extends ie {\n  /**\n   * Create an instance of the GlobalDataLayer library.\n   *\n   * @param options All options are merged with the {@link DEFAULT_SETTINGS} of type {@link TSettings}.\n   * @param [dataStore] The array where all the pushes are added to. The default tries to get or generate the\n   *   `window.pagData` array. If this is not possible, it creates an empty array, that is exposed via\n   *   {@link DataLayerStore}.\n   * @param [className] The class name of the library is here, because code can be uglified and/or minified later.\n   *\n   * @protected\n   */\n  constructor(e, s, i = \"GlobalDataLayer\") {\n    super(e, s, i);\n    o(this, \"_eventNamePayloadFactory\");\n    o(this, \"_webPayloadFactory\");\n    this._eventNamePayloadFactory = new U(), this._webPayloadFactory = new q(), this.setup();\n  }\n  setup() {\n    super.setup();\n  }\n}\nexport {\n  y as CleanExecutionPlace,\n  w as DEFAULT_SETTINGS,\n  L as DataLayerExtension,\n  U as EventNameFactory,\n  H as FrameTicker,\n  oe as GlobalDataLayer,\n  ie as GlobalDataLayerBaseClass,\n  b as Logger,\n  ae as PageNameExtenderExtension,\n  $ as ViewportTrackerExtension,\n  se as ViewportTrackerStatusChangeEvent,\n  q as WebPropertiesFactory,\n  P as clean,\n  G as cleanByDataLayerPaths,\n  _ as each,\n  S as eachFirstLevel,\n  k as executeEachFunction,\n  B as get,\n  C as getDataLayerPaths,\n  Z as getWebProperties,\n  m as isEmpty,\n  ne as isEmptyDataLayer,\n  u as merge,\n  te as validate\n};\n","import { GlobalDataLayer } from '@porsche/globaldatalayer';\nimport { TContextEnvironment, TDataLayer } from '@porsche/globaldatalayer-events/projects/pcom/all/types';\nimport { Environment, Environments } from '../../entities/environment';\nimport { splitLocale } from '../../entities/locale';\nimport { DATA_LAYER_APPLICATION_NAME, DATA_LAYER_APP_ID, EventAction } from '../../utility/constants';\nimport { isString } from '../../utility/helper';\n\nfunction getEnvironmentAbbreviation(env: Environment): TContextEnvironment {\n  switch (env) {\n    case Environments.PRODUCTION:\n      return 'P';\n    case Environments.PREVIEW:\n      return 'PP';\n    default:\n      return 'K';\n  }\n}\n\nclass GlobalDataLayerService {\n  homeNavEventId = /^PAGHomeNav_/;\n  gdl!: GlobalDataLayer<TDataLayer>;\n\n  constructor() {\n    this.initialise();\n  }\n\n  initialise() {\n    this.gdl = new GlobalDataLayer();\n  }\n\n  pushDataLayerEvent(eventAction: EventAction, eventData?: TDataLayer): void {\n    if (eventData) {\n      this.gdl.push(eventAction, eventData);\n    } else {\n      this.gdl.push(eventAction);\n    }\n  }\n\n  setEnvironment(env: Environment) {\n    this.gdl.setDefaultProperties(this.homeNavEventId, {\n      context: { environment: getEnvironmentAbbreviation(env) }\n    });\n  }\n\n  setPageName(pageName?: string) {\n    this.gdl.setDefaultProperties(this.homeNavEventId, {\n      pageExperience: {\n        pageName: pageName\n      }\n    });\n  }\n\n  setUser(userId: string, loginStatus: boolean) {\n    this.gdl.setDefaultProperties(this.homeNavEventId, {\n      ids: { userId },\n      visitor: { loginStatus }\n    });\n  }\n\n  setLocale(locale: string) {\n    try {\n      const { country, language } = splitLocale(locale);\n\n      this.gdl.setDefaultProperties(this.homeNavEventId, {\n        context: { country: country, language: language }\n      });\n    } catch (err) {\n      // throw the error away\n    }\n  }\n\n  setDefaultProperties(locale: string, pageName?: string): void {\n    let defaultGDLProperties: TDataLayer = {\n      context: { applicationId: DATA_LAYER_APP_ID },\n      visitor: { loginStatus: false }\n    };\n\n    try {\n      const { country, language } = splitLocale(locale);\n\n      defaultGDLProperties = {\n        ...defaultGDLProperties,\n        context: { ...defaultGDLProperties.context, country, language, applicationName: DATA_LAYER_APPLICATION_NAME }\n      };\n    } catch (err) {\n      // throw the error away\n    }\n\n    if (isString(pageName)) {\n      defaultGDLProperties = { ...defaultGDLProperties, pageExperience: { pageName: pageName } };\n    }\n\n    this.gdl.setDefaultProperties(this.homeNavEventId, defaultGDLProperties);\n  }\n}\n\nexport default new GlobalDataLayerService();\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { UserInformation } from '../entities/user-information';\nimport { navStateStore } from '../state/nav-state-store';\nimport { getConfig, getString } from '../utility/helper';\nimport { NaviError, NaviErrorTypes } from '../utility/navi-error';\n\nimport { v4 as uuidv4 } from 'uuid';\n\nexport async function getUserInformation(accessToken: string, locale: string): Promise<UserInformation> {\n  const config = getConfig(navStateStore.state.env);\n  const init = {\n    method: 'GET',\n    headers: {\n      'X-Trace-Id': uuidv4(),\n      Authorization: `${accessToken}`,\n      Accept: 'application/json',\n      Env: navStateStore.state.env\n    }\n  };\n\n  try {\n    const response = await fetch(getString(`${config?.BFF_ENDPOINT}/user-information?locale=${locale}`), init);\n\n    if (!response.ok) {\n      const text = await response.text();\n      throw new Error(text);\n    }\n\n    return await response.json();\n  } catch (error) {\n    throw new NaviError(`Get User information request failed in Frontend with error: ${error}`, NaviErrorTypes.GENERAL);\n  }\n}\n","import { v4 as uuidv4 } from 'uuid';\nimport { Config } from '../entities/config';\nimport { RegionLocales, splitLocale } from '../entities/locale';\nimport { navStateStore } from '../state/nav-state-store';\nimport {\n  DEFAULT_UNREAD_MESSAGES_COUNT,\n  IFRAME_ID,\n  LOGGED_IN_USER_NO_NAME_STATUS,\n  LOGGED_OUT_USER_STATUS\n} from '../utility/constants';\nimport { constructCacheKey, IsLoggedIn, getQueryString, getString, isString } from '../utility/helper';\nimport { NaviError, NaviErrorTypes } from '../utility/navi-error';\nimport globalDataLayerService from './analytics/global-data-layer-service';\nimport windowService from './window-service';\nimport { getUserInformation } from './user-information-service';\nimport { finderStateStore } from '../state/finder-state-store';\n\ntype UserData = {\n  firstName?: string;\n  lastName?: string;\n  porscheId?: string;\n};\n\nexport function getUserNameFromUserData(userData: UserData): string {\n  let status = '';\n\n  const firstName = getString(userData.firstName);\n  const lastName = getString(userData.lastName);\n\n  if (isString(firstName)) {\n    status = firstName;\n\n    if (isString(lastName)) {\n      status += ` ${lastName}`;\n    }\n  } else {\n    if (isString(lastName)) {\n      status = lastName;\n    }\n  }\n  return status;\n}\n\nexport async function getUserIdFromUserData(userData: UserData): Promise<string> {\n  return await windowService.hashString(getString(userData.porscheId));\n}\n\nexport const userDataCache = new Map<string, UserData>();\n\nasync function getUserData(accessToken: string, locale: string, config: Config): Promise<UserData> {\n  const cacheKey = constructCacheKey(accessToken, locale, config.PROFILE_API_URL);\n\n  const cachedUserData = userDataCache.get(cacheKey);\n  if (cachedUserData !== undefined) {\n    return cachedUserData;\n  }\n\n  let userProfileResponse: Response;\n\n  const { language, country } = splitLocale(locale);\n\n  const init = {\n    method: 'GET',\n    headers: {\n      'Accept-Language': `${language}_${country}`,\n      'x-trace-id': uuidv4(),\n      apikey: getString(config.CLIENT_ID),\n      Authorization: `Bearer ${accessToken}`,\n      Accept: 'application/json'\n    }\n  };\n\n  const query = country !== RegionLocales.INTERNATIONAL ? `?country=${country}` : '';\n\n  try {\n    userProfileResponse = await fetch(`${getString(config.PROFILE_API_URL)}${query}`, init);\n  } catch (err) {\n    const errorMessage = `Exception occurred while fetching user info: ${JSON.stringify((err as Error).message)}`;\n    throw new NaviError(errorMessage, NaviErrorTypes.GENERAL);\n  }\n\n  if (userProfileResponse.status === 401) {\n    throw new NaviError('AccessToken has expired', NaviErrorTypes.UNAUTHORIZED);\n  }\n\n  if (!userProfileResponse.ok) {\n    const errorMessage = `Error occurred: ${userProfileResponse.status} ${userProfileResponse.statusText}`;\n    throw new NaviError(errorMessage, NaviErrorTypes.GENERAL);\n  }\n\n  let userData: UserData;\n\n  try {\n    userData = await userProfileResponse.json();\n  } catch (err) {\n    throw new NaviError(`Could not extract json from user profile response: ${err}`, NaviErrorTypes.GENERAL);\n  }\n\n  if (typeof userData !== 'object' || userData === null) {\n    throw new NaviError('Invalid user data object extracted from user profile response', NaviErrorTypes.NO_RESULTS);\n  }\n\n  userDataCache.set(cacheKey, userData);\n\n  return userData;\n}\n\nexport async function initializeUserData(accessToken: string, locale: string, config: Config): Promise<void> {\n  let loggedInState = LOGGED_OUT_USER_STATUS;\n  let userId: string;\n\n  try {\n    const userData = await getUserData(accessToken, locale, config);\n    loggedInState = getUserNameFromUserData(userData) || LOGGED_IN_USER_NO_NAME_STATUS;\n    userId = await getUserIdFromUserData(userData);\n  } catch (err) {\n    if (!(err instanceof NaviError) || err.type !== NaviErrorTypes.UNAUTHORIZED) {\n      loggedInState = LOGGED_IN_USER_NO_NAME_STATUS;\n    }\n\n    navStateStore.state.unreadMessagesCount = DEFAULT_UNREAD_MESSAGES_COUNT;\n    navStateStore.state.loggedInState = loggedInState;\n    throw err;\n  }\n\n  navStateStore.state.loggedInState = loggedInState;\n  globalDataLayerService.setUser(userId, IsLoggedIn(loggedInState));\n\n  const { savedSearches, savedVehicles, unreadMessages } = await getUserInformation(accessToken, locale);\n\n  finderStateStore.state.savedSearchesCount = savedSearches;\n  finderStateStore.state.savedVehiclesCount = savedVehicles;\n  navStateStore.state.unreadMessagesCount = unreadMessages;\n}\n\nexport function initAuthIframe(config: Config): void {\n  const queryString = getQueryString({\n    domain: config.IDENTITY_PROVIDER_URL,\n    clientId: config.IDENTITY_CLIENT_ID,\n    redirect_uri: config.LOGIN_REDIRECT_URL,\n    audience: config.IDENTITY_AUDIENCE\n  });\n\n  windowService.removeElement(IFRAME_ID);\n  windowService.createIframe(IFRAME_ID, `${config.LOGIN_REDIRECT_URL}?${queryString}`);\n}\n","@import '../../scss';\n\n:host {\n  display: block;\n  position: relative;\n  visibility: visible;\n  height: auto !important; // this is here to override the styles from app.scss\n  z-index: $phn-z-index-header;\n\n  .header {\n    min-height: $phn-header-height-base;\n\n    @include pds-media-query-min('xs') {\n      min-height: $phn-header-height-xs;\n    }\n\n    @include pds-media-query-min('s') {\n      min-height: $phn-header-height-s;\n    }\n\n    @include pds-media-query-min('m') {\n      min-height: $phn-header-height-m;\n    }\n\n    @include pds-media-query-min('l') {\n      min-height: $phn-header-height-l;\n    }\n  }\n\n  .limited-width {\n    @include pds-media-query-min('xxl') {\n      max-width: p-px-to-rem(2560px);\n      margin: 0 auto;\n    }\n  }\n\n}\n","import { Component, Event, EventEmitter, h, Listen, Prop, State, Watch } from '@stencil/core';\nimport { TMenu } from '../../components';\nimport { Message } from '../../entities/auth';\nimport { Content } from '../../entities/content';\nimport { getEnvironment } from '../../entities/environment';\nimport { splitLocale } from '../../entities/locale';\nimport globalDataLayerService from '../../services/analytics/global-data-layer-service';\nimport * as contentService from '../../services/content-service';\nimport { getPPNDealer, getPPNDealerByRegion } from '../../services/dealer-service';\nimport featureToggles from '../../services/feature-toggles';\nimport logger from '../../services/logger';\nimport { initAuthIframe, initializeUserData } from '../../services/user-service';\nimport windowService from '../../services/window-service';\nimport { dealerSearchResultsStore } from '../../state/dealer-search-results-store';\nimport { navContentStore } from '../../state/nav-content-store';\nimport { navStateStore } from '../../state/nav-state-store';\nimport { shopStateStore, ShopStateStoreTypes } from '../../state/shop-state-store';\nimport { routerStore } from '../../state/router-store';\nimport {\n  EventActions,\n  IFRAME_ID,\n  NavigationMode,\n  NavigationModeType,\n  NavigationTheme,\n  NavigationThemeType,\n  VERSION\n} from '../../utility/constants';\nimport {\n  buildRoutingKeyHistoryFromContentPath,\n  getConfig,\n  getRootMenuItem,\n  getValidContentPathSegments,\n  isString,\n  sanitizeApp\n} from '../../utility/helper';\nimport { isShopAvailable, loadsShopPropsOnStore } from '../../utility/helpers/shop-helper';\nimport { Timeout } from '../../utility/timeout';\nimport { ApplicationType, Application } from '../../utility/constants/app';\nimport { showDealerSearchDropdown } from '../../utility/helpers/dealer-search-helper';\nimport abTestingService from '../../services/ab-testing/ab-testing-constructor-service';\nimport { initMonitoringSystem } from '../../services/monitoring';\n\n@Component({\n  tag: 'phn-header',\n  styleUrl: 'header.scss',\n  shadow: true,\n  assetsDirs: ['auth']\n})\nexport class Header {\n  @Prop() locale = '';\n  @Prop() env = '';\n  @Prop() clientId = '';\n  @Prop() pageName = '';\n  @Prop() theme: NavigationThemeType = NavigationTheme.light;\n  @Prop() mode: NavigationModeType = NavigationMode.navbar;\n  @Prop() limitedWidth = 'true';\n  @Prop() app: ApplicationType = Application.default;\n  @Prop() initialRoutingPath = '';\n  @Prop() displayLogoOnly = false;\n  @Prop() numberOfShoppingItems = 0;\n  @Prop() wishlistItemsNumber = 0;\n  @Prop() shopInformation = '{ \"wishlistItemsNumber\": 0, \"numberOfShoppingItems\": 0, \"subTotal\": \"0\" }';\n\n  @State() loadingContent = false;\n  @State() receivedContent = false;\n  @State() breakpoint = windowService.getBreakpoint();\n\n  private eventPreventedTimeout = new Timeout(0);\n  private checkedMarketingConsent = false;\n  private loadedToggles = false;\n\n  @Event({ composed: true }) navigationDidLoad!: EventEmitter<void>;\n  @Event({ composed: true, bubbles: true, cancelable: true }) phnLogout!: EventEmitter<void>;\n  @Event({ composed: true, bubbles: true, cancelable: true }) phnLogin!: EventEmitter<void>;\n\n  @Watch('locale')\n  async localeWatchHandler(): Promise<void> {\n    await this.initNavContentStore();\n    globalDataLayerService.setLocale(this.locale);\n    logger.init(this.breakpoint, this.locale);\n  }\n\n  @Watch('pageName')\n  pageNameWatchHandler(): void {\n    globalDataLayerService.setPageName(this.pageName);\n  }\n\n  @Watch('env')\n  async newEnvReceived(): Promise<void> {\n    await this.initEnvironment();\n    await this.initNavContentStore();\n\n    initAuthIframe(getConfig(navStateStore.state.env));\n  }\n\n  @Watch('app')\n  async appWatcher(newValue: string): Promise<void> {\n    navStateStore.state.app = sanitizeApp(newValue);\n  }\n\n  @Watch('breakpoint')\n  breakpointWatcher(): void {\n    logger.init(this.breakpoint, this.locale);\n  }\n\n  @Watch('numberOfShoppingItems')\n  @Watch('wishlistItemsNumber')\n  watchShopVariables(newValue: number, _: string, propName: keyof ShopStateStoreTypes): void {\n    shopStateStore.set(propName, newValue);\n  }\n\n  @Watch('shopInformation')\n  watchShopVariable(information: string, _: string, propName: keyof ShopStateStoreTypes): void {\n    const shopInformation = JSON.parse(information);\n    shopStateStore.set(propName, shopInformation);\n  }\n\n  @Watch('initialRoutingPath')\n  initialRoutingPathWatcher(): void {\n    this.handleInitialRoutingKeyPath();\n  }\n\n  @Listen('resize', { target: 'window', passive: true })\n  resizeHandler(): void {\n    this.breakpoint = windowService.getBreakpoint();\n  }\n\n  @Listen('message', { target: 'window', passive: true })\n  async newAuthMessageReceived(event: Message): Promise<void> {\n    const config = getConfig(navStateStore.state.env);\n\n    if (new URL(config.LOGIN_REDIRECT_URL).origin !== new URL(event.origin).origin) {\n      return;\n    }\n\n    if (isString(event.data.token)) {\n      try {\n        windowService.removeElement(IFRAME_ID);\n        await initializeUserData(event.data.token, this.locale, config);\n      } catch (err) {\n        logger.error('INIT_USER_DATA', err as Error);\n      }\n    }\n  }\n\n  @Listen('loginEvent')\n  async handleLogin(): Promise<void> {\n    const phnLogin = this.phnLogin.emit();\n\n    this.eventPreventedTimeout.set(async () => {\n      if (phnLogin.defaultPrevented) {\n        return;\n      }\n\n      const loginLink = navContentStore.state.myPorsche?.link;\n      if (isString(loginLink)) {\n        windowService.redirectToUrl(loginLink);\n        return;\n      }\n    });\n  }\n\n  @Listen('logoutEvent')\n  async handleLogout(): Promise<void> {\n    const config = getConfig(navStateStore.state.env);\n\n    const phnLogout = this.phnLogout.emit();\n\n    this.eventPreventedTimeout.set(async () => {\n      if (phnLogout.defaultPrevented) {\n        return;\n      }\n\n      // TODO which logout url to use? myporsche? auth0?\n      windowService.redirectToUrl(`${config.IDENTITY_PROVIDER_URL}/v2/logout`);\n      return;\n    });\n  }\n\n  @Listen('ucReady', { target: 'window', passive: true })\n  handleUserCentricsReady(): void {\n    this.checkMarketingConsent();\n  }\n\n  @Listen('ucInit', { target: 'window', passive: true })\n  handleUserCentricsInitalization(): void {\n    this.checkMarketingConsent();\n  }\n\n  @Listen('navigationLoaded')\n  navigationLoadedHandler({ detail: navigationLoaded }: CustomEvent<boolean>): void {\n    windowService.navigationLoaded = navigationLoaded;\n\n    if (navigationLoaded) {\n      this.navigationDidLoad.emit();\n    }\n  }\n\n  private checkMarketingConsent() {\n    if (!this.checkedMarketingConsent) {\n      navStateStore.state.userConsent = false;\n      this.checkedMarketingConsent = windowService.maybeCheckMarketingConsent(() => {\n        navStateStore.state.userConsent = true;\n      });\n    }\n  }\n\n  private async initEnvironment() {\n    navStateStore.state.env = getEnvironment(this.env);\n    navStateStore.state.app = sanitizeApp(this.app);\n    globalDataLayerService.setEnvironment(navStateStore.state.env);\n\n    const config = getConfig(navStateStore.state.env);\n    initAuthIframe(config);\n\n    this.loadedToggles = false;\n    await featureToggles.setFeatures(navStateStore.state.env);\n    this.loadedToggles = true;\n    initMonitoringSystem();\n\n    logger.init(this.breakpoint, this.locale);\n    const shopInformation = JSON.parse(this.shopInformation);\n\n    loadsShopPropsOnStore({\n      wishlistItemsNumber: this.wishlistItemsNumber,\n      numberOfShoppingItems: this.numberOfShoppingItems,\n      shopInformation: shopInformation\n    });\n\n    await abTestingService().init();\n  }\n\n  private async initNavContentStore() {\n    const previouslyReceivedContent = this.receivedContent;\n    this.receivedContent = false;\n    this.loadingContent = true;\n    try {\n      const fetchedLocale = this.locale;\n      const fetchedEnv = navStateStore.state.env;\n\n      const contentForLocale = await contentService.fetchContent(fetchedLocale, this.app);\n\n      // This is to make sure that the response is valid for the current locale and environment\n      // and wasn't made with another locale or enironment\n      if (this.locale === fetchedLocale && navStateStore.state.env === fetchedEnv) {\n        Object.assign(navContentStore.state, contentForLocale);\n        this.receivedContent = true;\n      }\n    } catch (err) {\n      logger.error('FETCH_CONTENT', err as Error);\n\n      if (previouslyReceivedContent) {\n        this.receivedContent = true;\n      }\n    }\n\n    this.loadingContent = false;\n  }\n\n  private async setDealerSearchResultsStore(): Promise<void> {\n    const { savedDealerCookie, ppnDealers } = dealerSearchResultsStore.state;\n\n    if (savedDealerCookie === null || ppnDealers[savedDealerCookie.id] !== undefined) {\n      return;\n    }\n\n    const coordinates = { latitude: savedDealerCookie.latitude, longitude: savedDealerCookie.longitude };\n    const { env } = navStateStore.state;\n\n    try {\n      const { country } = splitLocale(this.locale);\n      const { id: dealerId } = savedDealerCookie;\n\n      const ppnDealer = showDealerSearchDropdown(country)\n        ? await getPPNDealerByRegion(dealerId, country)\n        : await getPPNDealer(env, getConfig(env).DEALER_API_URL, dealerId, coordinates, country);\n\n      dealerSearchResultsStore.state.ppnDealers[savedDealerCookie.id] = ppnDealer;\n    } catch (err) {\n      logger.error('GET_DEALER', err as Error);\n      dealerSearchResultsStore.state.savedDealerCookie = null;\n    }\n  }\n\n  private handleInitialRoutingKeyPath(): void {\n    const [topLevelRoutingKey, ...segments] = this.initialRoutingPath.split('>');\n    const rootContentItem: TMenu | null = getRootMenuItem(navContentStore.state, topLevelRoutingKey as keyof Content);\n\n    if (rootContentItem === null) {\n      return;\n    }\n\n    const validSegments = getValidContentPathSegments(rootContentItem, segments);\n    const routingKeyHistory = buildRoutingKeyHistoryFromContentPath([topLevelRoutingKey, ...validSegments]);\n\n    routerStore.state.initialRoutingKeyHistory = routingKeyHistory;\n    routerStore.state.initialRoutingKeyPointer = routingKeyHistory.length - 1;\n  }\n\n  componentWillLoad(): void {\n    globalDataLayerService.setDefaultProperties(this.locale, this.pageName);\n    (window as any).ncs = navContentStore;\n\n    this.checkMarketingConsent();\n\n    this.initEnvironment()\n      .then(() => Promise.all([this.initNavContentStore(), this.setDealerSearchResultsStore()]))\n      .then(() => Promise.all([abTestingService().loadContentGeneratorExperiments()]))\n      .then(() => {\n        this.handleInitialRoutingKeyPath();\n      });\n  }\n\n  async componentDidLoad(): Promise<void> {\n    windowService.version = VERSION;\n    globalDataLayerService.pushDataLayerEvent(EventActions.GENERAL_LOAD);\n    logger.info('NAVIGATION_LOAD');\n  }\n\n  disconnectedCallback(): void {\n    this.eventPreventedTimeout.cancel();\n  }\n\n  private hasLimitedWidth(): boolean {\n    return this.mode === NavigationMode.hero && this.limitedWidth === 'true' ? true : false;\n  }\n\n  render(): HTMLPhnHeaderElement {\n    if (!this.loadedToggles) {\n      return <div></div>;\n    }\n\n    return (\n      // div needed because conditional styling does not work on Host of shadow component for some unknown reason\n      <div class={this.hasLimitedWidth() ? 'header limited-width' : 'header'}>\n        <phn-wrapper\n          theme={this.theme}\n          mode={this.mode}\n          locale={this.locale}\n          loadingContent={this.loadingContent}\n          receivedContent={this.receivedContent}\n          breakpoint={this.breakpoint}\n          app={sanitizeApp(this.app)}\n          displayLogoOnly={this.displayLogoOnly}\n          limitedWidth={this.hasLimitedWidth()}\n        >\n          {isShopAvailable(this.locale, sanitizeApp(this.app)) ? (\n            <div slot=\"contextual_drawer_header\">\n              <slot name=\"contextual_drawer_header\"></slot>\n            </div>\n          ) : null}\n        </phn-wrapper>\n      </div>\n    );\n  }\n}\n","@import '../../scss';\n\n:host {\n  display: block;\n  @include apply-themes();\n\n  header.limited-width {\n    @include pds-media-query-min('xxl') {\n      padding: 0 calc(50vw - 5120px/2);\n    }\n  }\n\n  header {\n    @include pds-grid;\n\n    font-family: $pds-font-family;\n    font-weight: $pds-font-weight-regular;\n    color: $pds-theme-light-background-base;\n    height: $phn-header-height-base;\n\n    @include pds-media-query-min('xs') {\n      height: $phn-header-height-xs;\n    }\n\n    @include pds-media-query-min('s') {\n      height: $phn-header-height-s;\n    }\n\n    @include pds-media-query-min('m') {\n      height: $phn-header-height-m;\n    }\n\n    @include pds-media-query-min('l') {\n      height: $phn-header-height-l;\n      flex-direction: row;\n    }\n\n    .level-0-content {\n      height: 100%;\n      display: flex;\n      align-items: center;\n      position: relative;\n      grid-column: wide-start/wide-end;\n\n      .level-0-content-logo {\n        display: flex;\n        align-items: center;\n      }\n\n      .level-0-content-icons {\n        position: absolute;\n        width: 100%;\n      }\n\n      phn-burger-button,\n      phn-level-0-icons,\n      phn-logo,\n      .skeleton-container {\n        flex: 1;\n        display: flex;\n      }\n\n      .skeleton-container.crest-skeleton {\n        justify-content: center;\n      }\n\n      phn-logo {\n        justify-content: center;\n        z-index: $phn-z-index-logo-mobile;\n        @include bugfix__iOS-transition-zindex-using-transform();\n\n        @include pds-media-query-min('l') {\n          z-index: $phn-z-index-logo-mobile;\n        }\n      }\n\n      .burger-button-skeleton {\n        width: p-px-to-rem(24px);\n        height: p-px-to-rem(24px);\n        border-radius: p-px-to-rem(4px);\n        background: $pds-theme-light-contrast-low;\n\n        @include pds-media-query-min('xs') {\n          width: p-px-to-rem(76px);\n          height: p-px-to-rem(24px);\n        }\n      }\n\n      .label-bone {\n        width: p-px-to-rem(124px);\n        height: p-px-to-rem(24px);\n        border-radius: p-px-to-rem(4px);\n        background-color: $pds-theme-light-contrast-low;\n\n        @include pds-media-query-min('s') {\n          width: p-px-to-rem(288px);\n        }\n      }\n\n      .crest-bone {\n        width: p-px-to-rem(22.45px);\n        height: p-px-to-rem(29px);\n        background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='22.45px' height='29px' viewBox='0 0 29 37' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3Ecrest-path-pixel-perfect-3%3C/title%3E%3Cg id='Design-Focus' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='832-skeleton-hn-1366' transform='translate(-130.000000, -39.000000)' fill='%23E3E4E5' fill-rule='nonzero'%3E%3Cg id='Crest-bones' transform='translate(78.000000, 0.000000)'%3E%3Cpath d='M80.8612951,41.6891698 C79.3593022,41.0929534 77.8195513,40.5958533 76.2520235,40.2010916 C74.092052,39.6781633 71.8946453,39.3227949 69.6795438,39.1381787 C68.6125828,39.0425165 67.6096394,39.0106291 66.4786608,39 L66.4679912,39 C65.4010302,39 64.3340692,39 63.2671082,39.1381787 C61.0520067,39.3227949 58.8545999,39.6781633 56.6946284,40.2010916 C55.1285058,40.5930516 53.5918758,41.093847 52.0960265,41.6997989 L52,41.6997989 C52,41.6997989 52.1813834,52.8710141 52.3200883,58.3981614 C52.3624958,60.0288438 52.6613178,61.6428163 53.2056659,63.1812698 C53.83596,64.927843 54.6779771,66.5912102 55.7130243,68.1344441 C56.7974563,69.7321996 58.1093136,71.164397 59.6074319,72.3860959 C60.1877267,72.8817079 60.8047619,73.3329574 61.4532745,73.7359954 C62.4748439,74.3534515 63.5453697,74.8866836 64.6541575,75.3303648 C65.0062546,75.4791727 65.3263429,75.6279805 65.6144224,75.7236426 C65.9077386,75.8428333 66.2112826,75.9353298 66.5213392,76 C66.8313958,75.9353298 67.1349399,75.8428333 67.4282561,75.7236426 C67.7163355,75.6279805 68.0364238,75.4791727 68.3991906,75.3303648 C69.4899033,74.8845355 70.542531,74.3513317 71.5467255,73.7359954 C72.1928274,73.3294237 72.8096114,72.8783579 73.3925681,72.3860959 C74.8933275,71.167176 76.2055628,69.7345659 77.2869757,68.1344441 C78.3220229,66.5912102 79.16404,64.927843 79.7943341,63.1812698 C80.3386822,61.6428163 80.6375042,60.0288438 80.6799117,58.3981614 C80.8186166,52.8710141 81,41.6997989 81,41.6997989 L80.8612951,41.6891698 Z' id='crest-path-pixel-perfect-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n        background-repeat: no-repeat;\n        background-position: center;\n\n        @include pds-media-query-min('xs') {\n          width: p-px-to-rem(27px);\n          height: p-px-to-rem(36px);\n          background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='27px' height='36px' viewBox='0 0 29 37' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3Ecrest-path-pixel-perfect-3%3C/title%3E%3Cg id='Design-Focus' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='832-skeleton-hn-1366' transform='translate(-130.000000, -39.000000)' fill='%23E3E4E5' fill-rule='nonzero'%3E%3Cg id='Crest-bones' transform='translate(78.000000, 0.000000)'%3E%3Cpath d='M80.8612951,41.6891698 C79.3593022,41.0929534 77.8195513,40.5958533 76.2520235,40.2010916 C74.092052,39.6781633 71.8946453,39.3227949 69.6795438,39.1381787 C68.6125828,39.0425165 67.6096394,39.0106291 66.4786608,39 L66.4679912,39 C65.4010302,39 64.3340692,39 63.2671082,39.1381787 C61.0520067,39.3227949 58.8545999,39.6781633 56.6946284,40.2010916 C55.1285058,40.5930516 53.5918758,41.093847 52.0960265,41.6997989 L52,41.6997989 C52,41.6997989 52.1813834,52.8710141 52.3200883,58.3981614 C52.3624958,60.0288438 52.6613178,61.6428163 53.2056659,63.1812698 C53.83596,64.927843 54.6779771,66.5912102 55.7130243,68.1344441 C56.7974563,69.7321996 58.1093136,71.164397 59.6074319,72.3860959 C60.1877267,72.8817079 60.8047619,73.3329574 61.4532745,73.7359954 C62.4748439,74.3534515 63.5453697,74.8866836 64.6541575,75.3303648 C65.0062546,75.4791727 65.3263429,75.6279805 65.6144224,75.7236426 C65.9077386,75.8428333 66.2112826,75.9353298 66.5213392,76 C66.8313958,75.9353298 67.1349399,75.8428333 67.4282561,75.7236426 C67.7163355,75.6279805 68.0364238,75.4791727 68.3991906,75.3303648 C69.4899033,74.8845355 70.542531,74.3513317 71.5467255,73.7359954 C72.1928274,73.3294237 72.8096114,72.8783579 73.3925681,72.3860959 C74.8933275,71.167176 76.2055628,69.7345659 77.2869757,68.1344441 C78.3220229,66.5912102 79.16404,64.927843 79.7943341,63.1812698 C80.3386822,61.6428163 80.6375042,60.0288438 80.6799117,58.3981614 C80.8186166,52.8710141 81,41.6997989 81,41.6997989 L80.8612951,41.6891698 Z' id='crest-path-pixel-perfect-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n        }\n\n        @include pds-media-query-min('s') {\n          width: p-px-to-rem(28px);\n          height: p-px-to-rem(36px);\n          background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='28px' height='36px' viewBox='0 0 29 37' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3Ecrest-path-pixel-perfect-3%3C/title%3E%3Cg id='Design-Focus' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='832-skeleton-hn-1366' transform='translate(-130.000000, -39.000000)' fill='%23E3E4E5' fill-rule='nonzero'%3E%3Cg id='Crest-bones' transform='translate(78.000000, 0.000000)'%3E%3Cpath d='M80.8612951,41.6891698 C79.3593022,41.0929534 77.8195513,40.5958533 76.2520235,40.2010916 C74.092052,39.6781633 71.8946453,39.3227949 69.6795438,39.1381787 C68.6125828,39.0425165 67.6096394,39.0106291 66.4786608,39 L66.4679912,39 C65.4010302,39 64.3340692,39 63.2671082,39.1381787 C61.0520067,39.3227949 58.8545999,39.6781633 56.6946284,40.2010916 C55.1285058,40.5930516 53.5918758,41.093847 52.0960265,41.6997989 L52,41.6997989 C52,41.6997989 52.1813834,52.8710141 52.3200883,58.3981614 C52.3624958,60.0288438 52.6613178,61.6428163 53.2056659,63.1812698 C53.83596,64.927843 54.6779771,66.5912102 55.7130243,68.1344441 C56.7974563,69.7321996 58.1093136,71.164397 59.6074319,72.3860959 C60.1877267,72.8817079 60.8047619,73.3329574 61.4532745,73.7359954 C62.4748439,74.3534515 63.5453697,74.8866836 64.6541575,75.3303648 C65.0062546,75.4791727 65.3263429,75.6279805 65.6144224,75.7236426 C65.9077386,75.8428333 66.2112826,75.9353298 66.5213392,76 C66.8313958,75.9353298 67.1349399,75.8428333 67.4282561,75.7236426 C67.7163355,75.6279805 68.0364238,75.4791727 68.3991906,75.3303648 C69.4899033,74.8845355 70.542531,74.3513317 71.5467255,73.7359954 C72.1928274,73.3294237 72.8096114,72.8783579 73.3925681,72.3860959 C74.8933275,71.167176 76.2055628,69.7345659 77.2869757,68.1344441 C78.3220229,66.5912102 79.16404,64.927843 79.7943341,63.1812698 C80.3386822,61.6428163 80.6375042,60.0288438 80.6799117,58.3981614 C80.8186166,52.8710141 81,41.6997989 81,41.6997989 L80.8612951,41.6891698 Z' id='crest-path-pixel-perfect-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n        }\n\n        @include pds-media-query-min('m') {\n          width: p-px-to-rem(31px);\n          height: p-px-to-rem(41px);\n          background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='31px' height='41px' viewBox='0 0 29 37' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3Ecrest-path-pixel-perfect-3%3C/title%3E%3Cg id='Design-Focus' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='832-skeleton-hn-1366' transform='translate(-130.000000, -39.000000)' fill='%23E3E4E5' fill-rule='nonzero'%3E%3Cg id='Crest-bones' transform='translate(78.000000, 0.000000)'%3E%3Cpath d='M80.8612951,41.6891698 C79.3593022,41.0929534 77.8195513,40.5958533 76.2520235,40.2010916 C74.092052,39.6781633 71.8946453,39.3227949 69.6795438,39.1381787 C68.6125828,39.0425165 67.6096394,39.0106291 66.4786608,39 L66.4679912,39 C65.4010302,39 64.3340692,39 63.2671082,39.1381787 C61.0520067,39.3227949 58.8545999,39.6781633 56.6946284,40.2010916 C55.1285058,40.5930516 53.5918758,41.093847 52.0960265,41.6997989 L52,41.6997989 C52,41.6997989 52.1813834,52.8710141 52.3200883,58.3981614 C52.3624958,60.0288438 52.6613178,61.6428163 53.2056659,63.1812698 C53.83596,64.927843 54.6779771,66.5912102 55.7130243,68.1344441 C56.7974563,69.7321996 58.1093136,71.164397 59.6074319,72.3860959 C60.1877267,72.8817079 60.8047619,73.3329574 61.4532745,73.7359954 C62.4748439,74.3534515 63.5453697,74.8866836 64.6541575,75.3303648 C65.0062546,75.4791727 65.3263429,75.6279805 65.6144224,75.7236426 C65.9077386,75.8428333 66.2112826,75.9353298 66.5213392,76 C66.8313958,75.9353298 67.1349399,75.8428333 67.4282561,75.7236426 C67.7163355,75.6279805 68.0364238,75.4791727 68.3991906,75.3303648 C69.4899033,74.8845355 70.542531,74.3513317 71.5467255,73.7359954 C72.1928274,73.3294237 72.8096114,72.8783579 73.3925681,72.3860959 C74.8933275,71.167176 76.2055628,69.7345659 77.2869757,68.1344441 C78.3220229,66.5912102 79.16404,64.927843 79.7943341,63.1812698 C80.3386822,61.6428163 80.6375042,60.0288438 80.6799117,58.3981614 C80.8186166,52.8710141 81,41.6997989 81,41.6997989 L80.8612951,41.6891698 Z' id='crest-path-pixel-perfect-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n        }\n\n        @include pds-media-query-min('l') {\n          width: p-px-to-rem(32px);\n          height: p-px-to-rem(43px);\n          background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='32px' height='43px' viewBox='0 0 29 37' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3Ecrest-path-pixel-perfect-3%3C/title%3E%3Cg id='Design-Focus' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='832-skeleton-hn-1366' transform='translate(-130.000000, -39.000000)' fill='%23E3E4E5' fill-rule='nonzero'%3E%3Cg id='Crest-bones' transform='translate(78.000000, 0.000000)'%3E%3Cpath d='M80.8612951,41.6891698 C79.3593022,41.0929534 77.8195513,40.5958533 76.2520235,40.2010916 C74.092052,39.6781633 71.8946453,39.3227949 69.6795438,39.1381787 C68.6125828,39.0425165 67.6096394,39.0106291 66.4786608,39 L66.4679912,39 C65.4010302,39 64.3340692,39 63.2671082,39.1381787 C61.0520067,39.3227949 58.8545999,39.6781633 56.6946284,40.2010916 C55.1285058,40.5930516 53.5918758,41.093847 52.0960265,41.6997989 L52,41.6997989 C52,41.6997989 52.1813834,52.8710141 52.3200883,58.3981614 C52.3624958,60.0288438 52.6613178,61.6428163 53.2056659,63.1812698 C53.83596,64.927843 54.6779771,66.5912102 55.7130243,68.1344441 C56.7974563,69.7321996 58.1093136,71.164397 59.6074319,72.3860959 C60.1877267,72.8817079 60.8047619,73.3329574 61.4532745,73.7359954 C62.4748439,74.3534515 63.5453697,74.8866836 64.6541575,75.3303648 C65.0062546,75.4791727 65.3263429,75.6279805 65.6144224,75.7236426 C65.9077386,75.8428333 66.2112826,75.9353298 66.5213392,76 C66.8313958,75.9353298 67.1349399,75.8428333 67.4282561,75.7236426 C67.7163355,75.6279805 68.0364238,75.4791727 68.3991906,75.3303648 C69.4899033,74.8845355 70.542531,74.3513317 71.5467255,73.7359954 C72.1928274,73.3294237 72.8096114,72.8783579 73.3925681,72.3860959 C74.8933275,71.167176 76.2055628,69.7345659 77.2869757,68.1344441 C78.3220229,66.5912102 79.16404,64.927843 79.7943341,63.1812698 C80.3386822,61.6428163 80.6375042,60.0288438 80.6799117,58.3981614 C80.8186166,52.8710141 81,41.6997989 81,41.6997989 L80.8612951,41.6891698 Z' id='crest-path-pixel-perfect-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n        }\n      }\n    }\n\n    phn-crest {\n      z-index: $phn-z-index-logo-mobile;\n      @include bugfix__iOS-transition-zindex-using-transform();\n\n      @include pds-media-query-min('l') {\n        z-index: $phn-z-index-logo-mobile;\n      }\n    }\n\n    phn-burger-button {\n      padding: p-px-to-rem(20px) 0 p-px-to-rem(16px) p-px-to-rem(12px);\n\n      @include pds-media-query-min('xs') {\n        padding: p-px-to-rem(20px) 0 p-px-to-rem(16px) p-px-to-rem(12px);\n      }\n\n      @include pds-media-query-min('s') {\n        padding: p-px-to-rem(28px) 0 p-px-to-rem(24px) p-px-to-rem(20px);\n      }\n\n      @include pds-media-query-min('m') {\n        padding: p-px-to-rem(32px) 0 p-px-to-rem(28px) p-px-to-rem(24px);\n      }\n\n      @include pds-media-query-min('xl') {\n        padding: p-px-to-rem(36px) 0 p-px-to-rem(32px) p-px-to-rem(28px);\n      }\n    }\n\n    .burger-button:focus {\n      @include design-system__focus();\n    }\n  }\n\n  .main-content {\n    width: p-px-to-rem(20px);\n  }\n\n  .main-content:focus {\n    outline-style: none;\n  }\n\n  .sr-only {\n    position: absolute;\n    width: p-px-to-rem(1px);\n    height: p-px-to-rem(1px);\n    white-space: nowrap;\n    overflow: hidden;\n    clip: rect(1px, 1px, 1px, 1px);\n    clip-path: inset(50%);\n  }\n\n  phn-p-icon {\n    width: p-px-to-rem(24px);\n\n    @include pds-media-query-min('s') {\n      width: p-px-to-rem(24px);\n    }\n\n    @include pds-media-query-min('m') {\n      width: p-px-to-rem(24px);\n    }\n  }\n}\n","import { breakpoint } from '@porsche-design-system/components-js/styles';\nimport { Component, Element, Event, EventEmitter, h, Host, Listen, Prop, State, Watch } from '@stencil/core';\nimport {\n  findTopLevelRoutingKey,\n  getLastRoutingSegment,\n  RoutingKey,\n  RoutingKeyPointers,\n  RoutingKeys,\n  RoutingKeyWithClick\n} from '../../entities/routing-key';\nimport animationManager from '../../services/animations/animation-manager';\nimport featureToggles from '../../services/feature-toggles';\nimport windowService from '../../services/window-service';\nimport { dealerSearchResultsStore } from '../../state/dealer-search-results-store';\nimport { routerStore } from '../../state/router-store';\nimport {\n  AnimationSequences,\n  FEATURE_PORSCHE_75_YEARS_LOGO,\n  NavigationMode,\n  NavigationModeType,\n  NavigationTheme,\n  NavigationThemeType\n} from '../../utility/constants';\nimport { Application, ApplicationType } from '../../utility/constants/app';\nimport {\n  constructThemeClass,\n  focusOnElement,\n  isDesktop,\n  IsKeyboardClick,\n  isPromise,\n  isString\n} from '../../utility/helper';\nimport { isShopAvailable } from '../../utility/helpers/shop-helper';\nimport { componentsOnReady } from '../../utility/ready';\nimport { Timeout } from '../../utility/timeout';\nimport { isPlayingDoubleDrawerAnimation } from '../double-drawer/double-drawer-animation-sequences';\nimport { isPlayingSingleDrawerAnimation } from '../single-drawer/single-drawer-animation-sequences';\n\n@Component({\n  tag: 'phn-level-0',\n  styleUrl: 'level-0.scss',\n  scoped: true\n})\nexport class Level0 {\n  @Prop() locale!: string;\n  @Prop() breakpoint!: number;\n  @Prop() loadingContent = false;\n  @Prop() receivedContent = false;\n  @Prop() theme: NavigationThemeType = NavigationTheme.light;\n  @Prop() mode: NavigationModeType = NavigationMode.navbar;\n  @Prop() app: ApplicationType = Application.default;\n  @Prop() displayLogoOnly = false;\n  @Prop() limitedWidth = false;\n\n  @State() usingKeyboard = false;\n  @State() drawerClosed = true;\n  @State() scrolledPastHeader = false;\n  @State() showBackdrop = false;\n  @State() routingKeyHistory: string[] = [];\n  @State() routingKeyPointer = RoutingKeyPointers.LEVEL_ZERO;\n  @State() isNavigationLoaded = false;\n  @State() isLoading = false;\n  @State() isMyPorscheHoveredOn = false;\n\n  @Element() el!: HTMLPhnLevel0Element;\n\n  @Event() navigationLoaded!: EventEmitter<boolean>;\n\n  private operationPipeline: ((() => Promise<void>) | (() => void))[] = [];\n\n  private logoLoaded = false;\n  private drawerTimeout = new Timeout(20000);\n\n  @Watch('loadingContent')\n  loadingContentWatcher(): void {\n    this.setNavigationLoaded();\n  }\n\n  @Watch('breakpoint')\n  breakpointWatcher(newBreakpoint: number, oldBreakpoint: number): void {\n    this.updateRoutingKeyPointerOfMobileLevel1();\n    this.setNavigationLoaded();\n    this.handleResizeAnimation(newBreakpoint, oldBreakpoint);\n  }\n\n  private handleResizeAnimation(newBreakpoint: number, oldBreakpoint: number): void {\n    const didDrawerModeChange =\n      (isDesktop(newBreakpoint) && !isDesktop(oldBreakpoint)) ||\n      (!isDesktop(newBreakpoint) && isDesktop(oldBreakpoint));\n    if (!this.drawerClosed && didDrawerModeChange) {\n      if (!isDesktop(this.breakpoint)) {\n        this.operationPipeline.push(() => {\n          animationManager.play(AnimationSequences.OPEN_SINGLE_DRAWER);\n        });\n      } else {\n        this.operationPipeline.push(() => {\n          animationManager.play(AnimationSequences.OPEN_DOUBLE_DRAWER);\n        });\n      }\n    }\n  }\n\n  @Watch('receivedContent')\n  receivedContentWatcher(): void {\n    this.setNavigationLoaded();\n  }\n\n  @Listen('logoLoaded')\n  logoLoadedHandler(): void {\n    this.logoLoaded = true;\n    this.setNavigationLoaded();\n  }\n\n  @Listen('scroll', { target: 'window', passive: true })\n  scrollHandler(): void {\n    this.scrolledPastHeader = this.el.getBoundingClientRect().bottom <= 0;\n  }\n\n  @Listen('keydown', { target: 'window', passive: true })\n  handleKeyDown(e: KeyboardEvent): void {\n    if (e.key === 'Escape' && !this.drawerClosed) {\n      this.usingKeyboard = true;\n      this.handleClickDrawerHeaderClose();\n      return;\n    }\n  }\n\n  @Listen('click', { passive: true })\n  handleClick(e: MouseEvent): void {\n    this.usingKeyboard = IsKeyboardClick(e);\n  }\n\n  @Listen('mobileMenuItemClick')\n  handleMobileMenuItemClick({ detail: newRoutingKeys }: CustomEvent<string[]>): void {\n    this.routingKeyHistory = [...this.routingKeyHistory.slice(0, this.routingKeyPointer + 1), ...newRoutingKeys];\n    this.routingKeyPointer = this.routingKeyPointer + newRoutingKeys.length;\n    this.updateRouterStore();\n  }\n\n  @Listen('sideDrawerItemClick')\n  handleSideDrawerItemClick({ detail: routingKeys }: CustomEvent<string[]>): void {\n    this.routingKeyHistory = [...this.routingKeyHistory.slice(0, this.routingKeyPointer), ...routingKeys];\n    if (routingKeys.length > 0) {\n      this.routingKeyPointer = this.routingKeyPointer + routingKeys.length - 1;\n    }\n    this.updateRouterStore();\n  }\n\n  @Listen('clickDrawerHeaderBack')\n  handleClickDrawerHeaderBack(): void {\n    this.routingKeyPointer = this.routingKeyPointer - 1;\n    this.updateRouterStore();\n  }\n\n  @Listen('clickDrawerHeaderClose')\n  handleClickDrawerHeaderClose(): void {\n    if (isPlayingSingleDrawerAnimation() || isPlayingDoubleDrawerAnimation()) {\n      return;\n    }\n\n    this.routingKeyPointer = -1;\n    this.updateRouterStore();\n\n    if (isDesktop(this.breakpoint)) {\n      animationManager.play(AnimationSequences.CLOSE_DOUBLE_DRAWER).then(() => {\n        this.handleDrawerClosed();\n      });\n    } else {\n      this.operationPipeline.push(() => {\n        animationManager.play(AnimationSequences.CLOSE_SINGLE_DRAWER).then(() => {\n          this.handleDrawerClosed();\n        });\n      });\n    }\n  }\n\n  @Listen('backdropClosed')\n  handleBackdropClosed(): void {\n    this.showBackdrop = false;\n  }\n\n  @Listen('drawerChanged')\n  handleDrawerChanged({ detail: isNavigatingBackwards }: CustomEvent<boolean>): void {\n    const activeRoutingKey = isNavigatingBackwards\n      ? this.routingKeyHistory[this.routingKeyPointer + 1]\n      : this.routingKeyHistory[this.routingKeyPointer];\n\n    const topLevelRoutingKey = findTopLevelRoutingKey(activeRoutingKey ?? '');\n\n    if (topLevelRoutingKey !== RoutingKeys.DEALER_SEARCH || topLevelRoutingKey === activeRoutingKey) {\n      return;\n    }\n\n    if (isNavigatingBackwards) {\n      dealerSearchResultsStore.state.savedDealerCookie = null;\n      return;\n    }\n\n    const dealerId = getLastRoutingSegment(activeRoutingKey);\n    const { ppnDealer: savedDealer } = dealerSearchResultsStore.state.ppnDealers[dealerId] || {};\n\n    if (savedDealer !== undefined) {\n      dealerSearchResultsStore.state.savedDealerCookie = {\n        id: savedDealer.id,\n        latitude: savedDealer.coordinates.latitude,\n        longitude: savedDealer.coordinates.longitude\n      };\n    }\n  }\n\n  @Listen('openDrawer')\n  async handleOpenDrawer(event: CustomEvent<RoutingKeyWithClick>): Promise<void> {\n    await this.openDrawer(event.detail);\n  }\n\n  private updateRouterStore(): void {\n    routerStore.state.routingKeyHistory = this.routingKeyHistory;\n    routerStore.state.routingKeyPointer = this.routingKeyPointer;\n  }\n\n  private handleDrawerClosed(): void {\n    this.drawerClosed = true;\n\n    if (this.usingKeyboard) {\n      focusOnElement(this.el.querySelector('phn-burger-button phn-p-button-pure'));\n    }\n  }\n\n  private updateRoutingKeyPointerOfMobileLevel1() {\n    if (this.routingKeyPointer === RoutingKeyPointers.LEVEL_ONE) {\n      this.routingKeyPointer = isDesktop(this.breakpoint) ? RoutingKeyPointers.LEVEL_TWO : RoutingKeyPointers.LEVEL_ONE;\n    }\n  }\n\n  private setNavigationLoaded(): void {\n    this.isNavigationLoaded = !this.loadingContent && this.logoLoaded;\n    this.navigationLoaded.emit(this.isNavigationLoaded);\n  }\n\n  private setInitialRoutingProperties(initialRoutingKey: RoutingKey | string) {\n    if (isString(initialRoutingKey)) {\n      this.setRoutingProperties([initialRoutingKey]);\n    } else if (routerStore.state.initialRoutingKeyHistory !== null) {\n      this.setRoutingProperties(routerStore.state.initialRoutingKeyHistory);\n    } else {\n      this.setRoutingProperties([RoutingKeys.MODELS]);\n    }\n  }\n\n  private async openDrawer(routingKeyWithClick: RoutingKeyWithClick): Promise<void> {\n    const { initialRoutingKey, isKeyboardClick } = routingKeyWithClick;\n\n    if (!this.drawerClosed) {\n      return;\n    }\n\n    this.isLoading = true;\n    this.usingKeyboard = isKeyboardClick;\n    this.drawerClosed = false;\n    this.showBackdrop = true;\n\n    this.setInitialRoutingProperties(initialRoutingKey);\n\n    await componentsOnReady(this.el, this.drawerTimeout, '.drawer', 'phn-backdrop');\n    this.isLoading = false;\n\n    if (isDesktop(this.breakpoint)) {\n      this.operationPipeline.push(() => {\n        animationManager.play(AnimationSequences.OPEN_DOUBLE_DRAWER);\n      });\n    } else {\n      this.operationPipeline.push(() => {\n        animationManager.play(AnimationSequences.OPEN_SINGLE_DRAWER);\n      });\n    }\n  }\n\n  private isDefaultRouteOnMobile(): boolean {\n    return (\n      !isDesktop(this.breakpoint) &&\n      routerStore.state.initialRoutingKeyHistory === null &&\n      this.routingKeyHistory.length === 2 &&\n      this.routingKeyHistory[1] === RoutingKeys.MODELS\n    );\n  }\n\n  private setRoutingProperties(initialRoutingKeys: string[]) {\n    this.routingKeyHistory = [RoutingKeys.MAIN_MENU, ...initialRoutingKeys];\n    this.routingKeyPointer = isDesktop(this.breakpoint) ? RoutingKeyPointers.LEVEL_TWO : RoutingKeyPointers.LEVEL_ONE;\n\n    if (!this.isDefaultRouteOnMobile()) {\n      this.routingKeyPointer = this.routingKeyHistory.length - 1;\n    }\n\n    this.updateRouterStore();\n  }\n\n  disconnectedCallback(): void {\n    this.drawerTimeout.cancel();\n  }\n\n  async componentDidRender(): Promise<void> {\n    const promises = [];\n    for (const operation of this.operationPipeline) {\n      const maybePromise = operation();\n      if (isPromise<void>(maybePromise)) {\n        promises.push(maybePromise);\n      }\n    }\n    await Promise.all(promises);\n    this.operationPipeline.splice(0, this.operationPipeline.length);\n  }\n\n  private getLogoSize(): string {\n    if (featureToggles.isFeatureEnabled(FEATURE_PORSCHE_75_YEARS_LOGO, windowService.location.search)) {\n      return 'medium';\n    }\n    return this.breakpoint >= breakpoint.m ? 'medium' : 'small';\n  }\n\n  render(): HTMLPhnLevel0Element {\n    const renderBackdrop = this.showBackdrop;\n\n    return (\n      <Host class={`${constructThemeClass(this.mode, this.theme)}-theme themed-background`}>\n        <header class={this.limitedWidth ? 'limited-width' : ''}>\n          {renderBackdrop ? (\n            <phn-backdrop\n              activeRoutingKey={this.routingKeyHistory[this.routingKeyPointer]}\n              style={this.isLoading ? { display: 'none' } : {}}\n            />\n          ) : null}\n\n          <div class=\"level-0-content\">\n            {!this.displayLogoOnly ? (\n              <div class=\"level-0-content-icons\">\n                <phn-level-0-icons\n                  locale={this.locale}\n                  theme={this.theme}\n                  mode={this.mode}\n                  app={this.app}\n                  breakpoint={this.breakpoint}\n                  isLoading={this.isLoading}\n                  isNavigationLoaded={this.isNavigationLoaded}\n                >\n                  <div class=\"level-0-content-logo\">\n                    <phn-logo\n                      app={this.app}\n                      locale={this.locale}\n                      theme={this.theme}\n                      mode={this.mode}\n                      size={this.getLogoSize()}\n                      breakpoint={this.breakpoint}\n                      style={this.isNavigationLoaded ? {} : { display: 'none' }}\n                    />\n                    {!this.isNavigationLoaded ? (\n                      <div class=\"crest-skeleton skeleton-container\">\n                        {this.breakpoint > breakpoint.xs ? <span class=\"label-bone\" /> : <span class=\"crest-bone\" />}\n                      </div>\n                    ) : null}\n                  </div>\n                </phn-level-0-icons>\n                {isShopAvailable(this.locale, this.app) ? (\n                  <contextual-drawer>\n                    <div slot=\"contextual_drawer_header\">\n                      <slot name=\"contextual_drawer_header\"></slot>\n                    </div>\n                  </contextual-drawer>\n                ) : null}\n              </div>\n            ) : (\n              <div class=\"level-0-content-logo\">\n                <phn-logo\n                  app={this.app}\n                  locale={this.locale}\n                  theme={this.theme}\n                  mode={this.mode}\n                  size={this.getLogoSize()}\n                  breakpoint={this.breakpoint}\n                  style={this.isNavigationLoaded ? {} : { display: 'none' }}\n                />\n                {!this.isNavigationLoaded ? (\n                  <div class=\"crest-skeleton skeleton-container\">\n                    {this.breakpoint > breakpoint.xs ? <span class=\"label-bone\" /> : <span class=\"crest-bone\" />}\n                  </div>\n                ) : null}\n              </div>\n            )}\n          </div>\n\n          {!this.drawerClosed ? (\n            isDesktop(this.breakpoint) ? (\n              <phn-double-drawer\n                class=\"drawer\"\n                style={this.isLoading ? { display: 'none' } : {}}\n                routingKeyHistory={this.routingKeyHistory}\n                routingKeyPointer={this.routingKeyPointer}\n                breakpoint={this.breakpoint}\n                initialUsingKeyboard={this.usingKeyboard}\n                locale={this.locale}\n                receivedContent={this.receivedContent}\n              />\n            ) : (\n              <phn-single-drawer\n                class=\"drawer\"\n                style={this.isLoading ? { display: 'none' } : {}}\n                routingKeyHistory={this.routingKeyHistory}\n                routingKeyPointer={this.routingKeyPointer}\n                breakpoint={this.breakpoint}\n                usingKeyboard={this.usingKeyboard}\n                locale={this.locale}\n                receivedContent={this.receivedContent}\n              />\n            )\n          ) : null}\n        </header>\n      </Host>\n    );\n  }\n}\n","@import '../../scss/index';\n\n:host {\n  display: block;\n\n  .limit-stretch {\n    @include limit-stretch();\n  }\n\n  .preview-badge {\n    display: block;\n    position: absolute;\n    top: 0;\n    right: 0;\n    background-color: $pds-theme-light-notification-error;\n    z-index: 9999;\n    padding: 0 p-px-to-rem(2px);\n  }\n\n  .main-content {\n    width: 20px;\n\n    &:focus {\n      outline-style: none;\n    }\n  }\n\n  .screenreader-only {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    white-space: nowrap;\n    overflow: hidden;\n    clip: rect(1px, 1px, 1px, 1px);\n    clip-path: inset(50%);\n  }\n}\n","import { Component, Element, h, Host, Prop, State } from '@stencil/core';\nimport { Environments } from '../../entities/environment';\nimport windowService from '../../services/window-service';\nimport { navContentStore } from '../../state/nav-content-store';\nimport { navStateStore } from '../../state/nav-state-store';\nimport {\n  NavigationMode,\n  NavigationModeType,\n  NavigationTheme,\n  NavigationThemeType,\n  VERSION\n} from '../../utility/constants';\nimport { getHTMLElement } from '../../utility/helper';\nimport animationManager from '../../services/animations/animation-manager';\nimport { isShopAvailable } from '../../utility/helpers/shop-helper';\nimport { Application, ApplicationType } from '../../utility/constants/app';\n\n@Component({\n  tag: 'phn-wrapper',\n  styleUrl: 'wrapper.scss',\n  scoped: true\n})\nexport class Wrapper {\n  @Prop() locale!: string;\n  @Prop() breakpoint!: number;\n  @Prop() loadingContent = false;\n  @Prop() receivedContent = false;\n  @Prop() theme: NavigationThemeType = NavigationTheme.light;\n  @Prop() mode: NavigationModeType = NavigationMode.navbar;\n  @Prop() app: ApplicationType = Application.default;\n  @Prop() displayLogoOnly = false;\n  @Prop() limitedWidth = false;\n\n  @State() showCountryRecommender = windowService.redirected;\n  @State() countryRecommenderClosed = false;\n\n  @Element() el!: HTMLPhnWrapperElement;\n\n  componentWillLoad(): void {\n    this.el.style.setProperty('--scrollbar-width', windowService.getScrollbarWidth());\n\n    animationManager.initialize(this.el);\n  }\n\n  render(): HTMLPhnWrapperElement {\n    const countryRecommenderContent = navContentStore.state.countryRecommender;\n    const showCountryRecommender =\n      this.showCountryRecommender && !this.countryRecommenderClosed && !this.loadingContent && this.receivedContent;\n\n    const accessibilityStatement = navContentStore.state.accessibilityStatement;\n\n    return (\n      <Host>\n        {navStateStore.state.env === Environments.PREVIEW ? (\n          <phn-p-text theme=\"dark\" size=\"x-small\" class=\"preview-badge\">\n            Header v{VERSION} - PP content\n          </phn-p-text>\n        ) : null}\n\n        {showCountryRecommender ? (\n          <phn-country-recommender\n            locale={this.locale}\n            content={countryRecommenderContent}\n            role=\"region\"\n            aria-label=\"Change recommended Region or Language\"\n            onBannerClosed={() => {\n              this.countryRecommenderClosed = true;\n            }}\n          />\n        ) : null}\n\n        {this.locale === 'en-US' && accessibilityStatement !== null ? (\n          <a class=\"screenreader-only\" href={accessibilityStatement.link}>\n            {accessibilityStatement.text}\n          </a>\n        ) : null}\n\n        <phn-level-0\n          theme={this.theme}\n          mode={this.mode}\n          locale={this.locale}\n          loadingContent={this.loadingContent}\n          receivedContent={this.receivedContent}\n          breakpoint={this.breakpoint}\n          app={this.app}\n          displayLogoOnly={this.displayLogoOnly}\n          limitedWidth={this.limitedWidth}\n        >\n          {isShopAvailable(this.locale, this.app) ? (\n            <div slot=\"contextual_drawer_header\">\n              <slot name=\"contextual_drawer_header\"></slot>\n            </div>\n          ) : null}\n        </phn-level-0>\n\n        <div\n          id=\"main\"\n          class=\"main-content\"\n          onBlur={(e) => {\n            const el = getHTMLElement(e.currentTarget);\n            if (el !== null) {\n              el.removeAttribute('tabIndex');\n            }\n          }}\n        />\n      </Host>\n    );\n  }\n}\n","import { HTMLStencilElement } from '@stencil/core/internal';\nimport windowService from '../services/window-service';\nimport { Timeout } from './timeout';\n\nexport async function componentsOnReady(\n  parent: HTMLElement | null,\n  timeout: Timeout,\n  ...selectors: string[]\n): Promise<HTMLElement[] | null> {\n  if (parent === null) {\n    return null;\n  }\n  const waitForElement = async (selector?: string) => {\n    const el = await windowService.waitForElement(parent, selector);\n\n    if (typeof (el as HTMLStencilElement)?.componentOnReady === 'function') {\n      await (el as HTMLStencilElement).componentOnReady();\n    }\n\n    return el;\n  };\n\n  const waitForElements = selectors.length > 0 ? selectors.map(waitForElement) : [waitForElement()];\n\n  const timer = new Promise<null>((resolve) => timeout.set(async () => resolve(null)));\n  return Promise.race([Promise.all(waitForElements), timer]);\n}\n","import { createStore } from '@stencil/store';\n\ninterface RouterStore {\n  routingKeyHistory: string[];\n  routingKeyPointer: number;\n  initialRoutingKeyHistory: string[] | null;\n  initialRoutingKeyPointer: number | null;\n}\n\nexport const routerStore = createStore<RouterStore>({\n  routingKeyHistory: [],\n  routingKeyPointer: -1,\n  initialRoutingKeyHistory: null,\n  initialRoutingKeyPointer: null\n});\n","import { getString, isString } from '../utility/helper';\n\nexport const RoutingKeys = {\n  MAIN_MENU: 'mainmenu',\n  DEALER_SEARCH: 'find_a_dealer',\n  MORE: 'more',\n  SHOP: 'shop',\n  SERIES: 'series',\n  MY_PORSCHE: 'my_porsche',\n  VEHICLE_PURCHASE: 'vehicle_purchase',\n  EXPERIENCE: 'experience',\n  SERVICES: 'services',\n  MODELS: 'models'\n} as const;\n\nexport enum RoutingKeyPointers {\n  LEVEL_ZERO = -1,\n  LEVEL_ONE = 0,\n  LEVEL_TWO = 1\n}\n\nexport type RoutingKey = (typeof RoutingKeys)[keyof typeof RoutingKeys];\n\nexport interface RoutingKeyWithClick {\n  initialRoutingKey: RoutingKey | string;\n  isKeyboardClick: boolean;\n}\n\nexport function constructRoutingKey(...args: string[]): string {\n  return args\n    .reduce<string[]>((segments, arg) => [...segments, ...getString(arg).split('/')], [])\n    .filter(Boolean)\n    .join('/');\n}\n\nexport function findTopLevelRoutingKey(activeRoutingKey: string): RoutingKey | undefined {\n  if (isString(activeRoutingKey)) {\n    return Object.values(RoutingKeys).find((routingKey) => activeRoutingKey.startsWith(routingKey));\n  }\n}\n\nexport function getSeriesRoutingKey(...args: string[]): string {\n  return constructRoutingKey(RoutingKeys.SERIES, ...args);\n}\n\nexport function getModelsRoutingKey(...args: string[]): string {\n  return constructRoutingKey(RoutingKeys.MODELS, ...args);\n}\n\nexport function getDealerDetailsRoutingKey(...args: string[]): string {\n  return constructRoutingKey(RoutingKeys.DEALER_SEARCH, ...args);\n}\n\nexport function getMyPorscheRoutingKey(...args: string[]): string {\n  return constructRoutingKey(RoutingKeys.MY_PORSCHE, ...args);\n}\n\nexport function getVehiclePurchaseRoutingKey(...args: string[]): string {\n  return constructRoutingKey(RoutingKeys.VEHICLE_PURCHASE, ...args);\n}\n\nexport function getLastRoutingSegment(routingKey: string): string {\n  return routingKey.split('/').slice(-1)[0];\n}\n\nexport function removeLastRoutingSegment(routingKey: string): string {\n  return routingKey.split('/').slice(0, -1).join('/');\n}\n\nexport function determineMainDrawerLevel(activeRoutingKey: string): number {\n  const topLevelRoutingKey = findTopLevelRoutingKey(activeRoutingKey);\n  switch (topLevelRoutingKey) {\n    case RoutingKeys.MAIN_MENU: {\n      return 1;\n    }\n    case activeRoutingKey: {\n      return 2;\n    }\n    default: {\n      return activeRoutingKey.split('/').length + 1;\n    }\n  }\n}\n\nexport function getPreviousRoutingKey(routingKey: string): string {\n  const previousRoutingKey = removeLastRoutingSegment(routingKey);\n  if (!isString(previousRoutingKey)) {\n    return RoutingKeys.MAIN_MENU;\n  }\n\n  return previousRoutingKey;\n}\n","import { createStore } from '@stencil/store';\n\nexport interface ShopInformation {\n  numberOfShoppingItems: number;\n  wishlistItemsNumber: number;\n  subTotal: string;\n}\n\nexport interface ShopStateStoreTypes {\n  wishlistItemsNumber: number;\n  numberOfShoppingItems: number;\n  shopInformation: ShopInformation;\n}\n\nexport const shopStateStore = createStore<ShopStateStoreTypes>({\n  wishlistItemsNumber: 0,\n  numberOfShoppingItems: 0,\n  shopInformation: { numberOfShoppingItems: 0, wishlistItemsNumber: 0, subTotal: '0' }\n});\n","import { Application, ApplicationType } from '../constants/app';\nimport { Content, TLink, TShopAdditionalContentMenu, TShopAuthStatus, TShopMenu } from '../../entities/content';\nimport { getUsername } from '../helper';\nimport { navStateStore } from '../../state/nav-state-store';\nimport { navContentStore } from '../../state/nav-content-store';\nimport { shopStateStore, ShopStateStoreTypes } from '../../state/shop-state-store';\n\nexport function isShopAvailable(locale: string, app: ApplicationType): boolean {\n  const shopList = navContentStore.state.shop?.availableLocales;\n  return shopList !== undefined && shopList.includes(locale) && app === Application.shop;\n}\n\nfunction logoLinksToShop(locale: string): boolean {\n  return navContentStore.state.shop?.logoLinksToShopLocales?.includes(locale) || false;\n}\n\nexport function isShopAvailableAndLogoLinksToShop(\n  locale: string,\n  app: ApplicationType,\n  shop: TShopMenu | null\n): shop is TShopMenu {\n  return isShopAvailable(locale, app) && logoLinksToShop(locale) && shop !== null;\n}\n\nexport function modifyShopItemDependingOnMarket(\n  locale: string,\n  app: ApplicationType | undefined,\n  content: Content\n): Content {\n  const { shop, externalShop } = content;\n\n  if (shop === null) return content;\n\n  if (externalShop && app !== Application.shop) {\n    return replaceShopWithExternalShop(content, shop, externalShop);\n  }\n\n  if (shopNotAvailableOnGlobalPages(shop, locale, app)) {\n    return removeShopItemFromContent(content, shop);\n  }\n\n  return content;\n}\n\nfunction replaceShopWithExternalShop(content: Content, shop: TShopMenu, externalShop: TLink): Content {\n  return {\n    ...content,\n    shop: {\n      ...shop,\n      ...externalShop\n    }\n  };\n}\n\nfunction shopNotAvailableOnGlobalPages(shop: TShopMenu, locale: string, app: ApplicationType | undefined) {\n  return (\n    !shop?.availableLocales.includes(locale) ||\n    (shop?.availableLocalesOnlyForShop.includes(locale) && app !== Application.shop)\n  );\n}\n\nfunction removeShopItemFromContent(content: Content, shop: TShopMenu) {\n  return {\n    ...content,\n    shop: {\n      ...shop,\n      text: ''\n    }\n  };\n}\n\nexport function filterWishlistItemsByAuthStatus(\n  menuItems: TShopAdditionalContentMenu[],\n  authStatusList: TShopAuthStatus[]\n): TShopAdditionalContentMenu[] {\n  return menuItems?.filter((item) => {\n    if (item.authStatus === null || item.authStatus === undefined) {\n      return authStatusList.includes(null);\n    }\n\n    return authStatusList.includes(item.authStatus);\n  });\n}\n\nexport function getAvailableShopVariables(): { wishlistItemsNumber: number; username: string } {\n  const { myPorsche } = navContentStore.state;\n  const { loggedInState } = navStateStore.state;\n  let { wishlistItemsNumber } = shopStateStore.state.shopInformation;\n\n  if (wishlistItemsNumber === 0) {\n    wishlistItemsNumber = shopStateStore.state.wishlistItemsNumber;\n  }\n\n  const username = getUsername(loggedInState, myPorsche?.loggedInFallback || '');\n\n  return { wishlistItemsNumber, username };\n}\n\nexport function loadsShopPropsOnStore(props: ShopStateStoreTypes): void {\n  shopStateStore.set('wishlistItemsNumber', props.wishlistItemsNumber);\n  shopStateStore.set('numberOfShoppingItems', props.numberOfShoppingItems);\n  shopStateStore.set('shopInformation', props.shopInformation);\n}\n\nfunction getWishlistIconName(): string {\n  const { shopInformation } = shopStateStore.state;\n  const { wishlistItemsNumber } = shopStateStore.state;\n  const wishlistNumber =\n    shopInformation.wishlistItemsNumber > 0 ? shopInformation.wishlistItemsNumber : wishlistItemsNumber;\n\n  return wishlistNumber > 0 ? 'heart-filled' : 'heart';\n}\n\nexport function getIconNameByMenuItemId(id: string): string | null {\n  const iconsGetterFunctions: Record<string, () => string> = {\n    wishlist: getWishlistIconName\n  };\n\n  const getIconName = iconsGetterFunctions[id];\n\n  if (typeof getIconName !== 'function') return null;\n\n  return getIconName();\n}\n","import animationManager, {\n  AnimationEndsCallbacks,\n  AnimationStatusCallbacks,\n  makeSequence,\n  SequenceStep\n} from '../../services/animations/animation-manager';\nimport { AnimationSequences, AnimationSequencesType } from '../../utility/constants';\n\nexport const registerOpenSingleDrawerAnimation = ({\n  onAnimationStarts,\n  onAnimationEnds\n}: Required<AnimationStatusCallbacks>): void => {\n  const sequence: SequenceStep[] = [\n    [\n      {\n        onStart: onAnimationStarts,\n        elementSelector: 'phn-single-drawer',\n        animation: {\n          className: 'slide-in-from-left',\n          cleanUpAfterAnimation: (element) => {\n            element.style.left = '0px';\n          }\n        }\n      },\n      {\n        elementSelector: 'phn-backdrop',\n        animation: {\n          className: 'fade-in-animation',\n          cleanUpAfterAnimation: (element) => {\n            element.style.backgroundColor = 'rgba(0, 0, 0, 0.6)';\n            element.style.opacity = '1';\n          }\n        },\n        onEnd: onAnimationEnds\n      }\n    ]\n  ];\n\n  animationManager.register(AnimationSequences.OPEN_SINGLE_DRAWER, makeSequence(sequence));\n};\n\nexport const registerCloseSingleDrawerAnimation = ({\n  onAnimationStarts,\n  onAnimationEnds\n}: Required<AnimationStatusCallbacks>): void => {\n  const sequence: SequenceStep[] = [\n    [\n      {\n        onStart: onAnimationStarts,\n        elementSelector: 'phn-single-drawer',\n        animation: {\n          className: 'slide-out-to-left',\n          cleanUpBeforeAnimation: (element) => {\n            element.style.left = '';\n          },\n          cleanUpAfterAnimation: (element) => {\n            element.style.left = '-1000px';\n          }\n        }\n      },\n      {\n        elementSelector: 'phn-backdrop',\n        animation: {\n          className: 'fade-out-animation',\n          cleanUpBeforeAnimation: (element) => {\n            element.style.backgroundColor = '';\n            element.style.opacity = '';\n          }\n        },\n        onEnd: onAnimationEnds\n      }\n    ]\n  ];\n\n  animationManager.register(AnimationSequences.CLOSE_SINGLE_DRAWER, makeSequence(sequence));\n};\n\nexport const registerTransitionNextLevelSingleDrawerAnimation = ({ onAnimationEnds }: AnimationEndsCallbacks): void => {\n  animationManager.register(\n    AnimationSequences.TRANSITION_NEXT_LEVEL_SINGLE_DRAWER,\n    makeSequence([\n      [\n        {\n          elementSelector: 'phn-single-drawer .drawer.animating',\n          animation: {\n            className: 'slide-in-from-right-fixed'\n          },\n          onEnd: onAnimationEnds\n        }\n      ]\n    ])\n  );\n};\n\nexport const registerTransitionPreviousLevelSingleDrawerAnimation = ({\n  onAnimationEnds\n}: AnimationEndsCallbacks): void => {\n  animationManager.register(\n    AnimationSequences.TRANSITION_PREVIOUS_LEVEL_SINGLE_DRAWER,\n    makeSequence([\n      [\n        {\n          elementSelector: 'phn-single-drawer .drawer.animating',\n          animation: {\n            className: 'slide-out-to-right-fixed'\n          },\n          onEnd: onAnimationEnds\n        }\n      ]\n    ])\n  );\n};\n\nexport const isPlayingSingleDrawerAnimation = (): boolean => {\n  try {\n    const singleDrawerAnimationSequences: AnimationSequencesType[] = [\n      AnimationSequences.OPEN_SINGLE_DRAWER,\n      AnimationSequences.CLOSE_SINGLE_DRAWER,\n      AnimationSequences.TRANSITION_NEXT_LEVEL_SINGLE_DRAWER,\n      AnimationSequences.TRANSITION_PREVIOUS_LEVEL_SINGLE_DRAWER\n    ];\n\n    return singleDrawerAnimationSequences.some((sequence) => {\n      try {\n        return animationManager.isPlaying(sequence);\n      } catch {\n        return false;\n      }\n    });\n  } catch (e) {\n    return false;\n  }\n};\n","export class Timeout {\n  private timer: NodeJS.Timeout | null = null;\n\n  constructor(private delay: number) {}\n\n  set<T>(cb: () => Promise<T>): void {\n    this.cancel();\n\n    this.timer = setTimeout(async () => {\n      await cb();\n      this.cancel();\n    }, this.delay);\n  }\n\n  cancel(): void {\n    if (this.timer !== null) {\n      clearTimeout(this.timer);\n\n      if (typeof this.timer.unref === 'function') {\n        this.timer.unref();\n      }\n\n      this.timer = null;\n    }\n  }\n}\n"],"names":["dealerSearchResultsStore","createStore","searchTerm","results","savedDealerCookie","JSON","parse","windowService","getCookie","SAVED_DEALER_COOKIE","e","readDealerCookie","ppnDealers","dealersOfRegion","regions","onChange","setCookie","stringify","experimentsDefinitions","MatomoAbTesting","client","experiments","prototype","init","featureToggles","isABTestingToggleActive","this","setClient","t","sent","loadExperiments","logger","error","execute","getExperiment","getVariation","activate","concat","executeContentChange","experienceName","r","name","children","Promise","resolve","injectScript","window","Matomo","n","getClient","AbTesting","Experiment","getAbTestingDefinitions","i","o","push","loadContentGeneratorExperiments","navContentStore","state","abExperiences","length","a","variations","map","s","Object","assign","find","NaviError","NaviErrorTypes","GENERAL","getActivatedVariationName","document","createElement","text","getMatomoScript","head","appendChild","getHTMLElement","querySelector","onload","onerror","navStateStore","env","abTestingService","animationRegistry","sequences","rootElement","applyCurrentAnimationSequenceStep","currentStepIndex","steps","call","promise","undefined","finishAnimationSequence","executeAnimation","all","u","reject","setTimeout","animationEndListener","target","Error","type","dataset","phnAmId","finishAnimationPromise","onStart","onEnd","animation","elementSelector","isPromise","f","Array","from","querySelectorAll","c","l","generateAndCleanUpAnimationPromise","animationPromiseGenerator","cleanUpBeforeAnimation","cleanUpAfterAnimation","classList","remove","className","Math","floor","random","add","toString","console","warn","String","timeout","clearTimeout","makeSequence","running","animationManager","initialize","addEventListener","play","isPlaying","register","reset","keys","forEach","AnimationSequences","OPEN_DOUBLE_DRAWER","CLOSE_DOUBLE_DRAWER","TRANSITION_SAME_LEVEL_DOUBLE_DRAWER","TRANSITION_SAME_LEVEL_DOUBLE_DRAWER_REVERSE","TRANSITION_NEXT_LEVEL_DOUBLE_DRAWER","TRANSITION_PREVIOUS_LEVEL_DOUBLE_DRAWER","OPEN_SINGLE_DRAWER","CLOSE_SINGLE_DRAWER","TRANSITION_NEXT_LEVEL_SINGLE_DRAWER","TRANSITION_PREVIOUS_LEVEL_SINGLE_DRAWER","contentCache","Map","fetchContent","getConfig","isShopToggleActive","Application","shop","splitLocale","country","language","constructCacheKey","get","fetch","headers","status","NO_RESULTS","ok","json","set","fetchNaviContent","CONTENT_URL","toLowerCase","fetchShopContent","SHOP_CONTENT_URL","allSettled","h","reason","modifyShopItemDependingOnMarket","value","menuItems","additionalContent","availableLocales","availableLocalesOnlyForShop","getFlagURL","includes","isCountryInOneOfRegions","split","constructFlagURL","showDealerSearchDropdown","getRegionSpecificCountry","sanitizeDealerHomepage","startsWith","getOpeningHours","dealer","openingHours","monday","tuesday","wednesday","thursday","friday","saturday","sunday","day","isString","open","close","getOpeningHoursMap","g","p","indexOf","getOpeningHoursString","getDayRange","join","timeFormat","convertToLocalTime","getTimeFormat","Number","Date","toLocaleString","hour","minute","hour12","toUpperCase","getAllPPNDealersForMarket","getPPNDealers","latitude","longitude","radius","Headers","Environments","LOCAL","btoa","coordinates","getQueryString","method","d","__rest","ppnDealer","getPPNDealer","id","dealersByRegionMap","getPPNDealerByRegion","getPPNDealersByRegion","flatMap","cities","dealers","values","reduce","__spreadArray","has","BFF_ENDPOINT","resetToFarRight","style","left","position","mainDrawerHTMLSelector","registerOpenDoubleDrawerSequence","onAnimationStarts","opacity","backgroundColor","onAnimationEnds","registerCloseDoubleDrawerSequence","onBackdropFadeOutEnd","registerTransitionSequence","onSlideMainDrawerOutEnd","registerForwardToNextMenuSequence","registerBackToPreviousMenuSequence","isPlayingDoubleDrawerAnimation","some","finderStateStore","savedSearchesCount","savedVehiclesCount","M","defineProperty","enumerable","configurable","writable","W","y","w","clean","enabled","executionPlace","logging","level","validation","allowUnknown","verbose","webProperties","eventNamePattern","reactiveUrl","reactiveDimensions","U","create","event","context","eventAction","_","S","m","P","k","B","j","x","log","v","prefix","settings","__assign","_getMergedSettings","_isAllowed","isAvailable","_log","dir","debug","info","b","arguments","isArray","q","timestamp","server","hostname","pageExperience","pageId","url","visitor","deviceBrowserBreakpoint","breakpoint","deviceBrowserHeight","height","deviceBrowserOrientation","orientation","deviceBrowserWidth","width","deviceType","useragent","userAgent","K","V","location","href","replace","R","innerHeight","D","innerWidth","T","J","breakpoints","ee","trim","test","parseFloat","te","issues","eventMatrix","events","message","C","filter","G","ie","_className","_logger","_settings","_dataLayerStore","pagData","_defaultProperties","setup","_handleDefaultWebProperties","getRegisteredExtension","getRegisteredExtensionByClassName","_extensions","getRegisteredExtensions","registerExtension","dataLayerInstance","removeExtension","delete","removeExtensionByClassName","_eventNamePayloadFactory","getDefaultProperties","apply","sort","byName","byArray","byRegex","identifier","data","RegExp","setDefaultProperties","_webPropertiesHandled","toISOString","matchMedia","matches","navigator","Z","_webPayloadFactory","oe","__extends","getEnvironmentAbbreviation","PRODUCTION","PREVIEW","GlobalDataLayerService","homeNavEventId","initialise","gdl","pushDataLayerEvent","setEnvironment","environment","setPageName","pageName","setUser","ids","userId","loginStatus","setLocale","applicationId","DATA_LAYER_APP_ID","applicationName","DATA_LAYER_APPLICATION_NAME","globalDataLayerService","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","byteToHex","slice","native","randomUUID","v4","unsafeStringify","getUserInformation","Authorization","Accept","Env","getString","getUserIdFromUserData","hashString","porscheId","userDataCache","getUserData","PROFILE_API_URL","apikey","CLIENT_ID","RegionLocales","INTERNATIONAL","UNAUTHORIZED","statusText","initializeUserData","LOGGED_OUT_USER_STATUS","firstName","lastName","getUserNameFromUserData","LOGGED_IN_USER_NO_NAME_STATUS","unreadMessagesCount","DEFAULT_UNREAD_MESSAGES_COUNT","loggedInState","IsLoggedIn","savedSearches","savedVehicles","unreadMessages","initAuthIframe","domain","IDENTITY_PROVIDER_URL","clientId","IDENTITY_CLIENT_ID","redirect_uri","LOGIN_REDIRECT_URL","audience","IDENTITY_AUDIENCE","removeElement","IFRAME_ID","createIframe","Header","eventPreventedTimeout","Timeout","checkedMarketingConsent","loadedToggles","NavigationTheme","light","NavigationMode","navbar","default","getBreakpoint","localeWatchHandler","initNavContentStore","locale","pageNameWatchHandler","newEnvReceived","initEnvironment","appWatcher","app","sanitizeApp","breakpointWatcher","watchShopVariables","shopStateStore","watchShopVariable","initialRoutingPathWatcher","handleInitialRoutingKeyPath","resizeHandler","newAuthMessageReceived","URL","origin","token","handleLogin","phnLogin","emit","__awaiter","defaultPrevented","myPorsche","link","redirectToUrl","handleLogout","phnLogout","handleUserCentricsReady","checkMarketingConsent","handleUserCentricsInitalization","navigationLoadedHandler","detail","navigationLoaded","navigationDidLoad","userConsent","maybeCheckMarketingConsent","getEnvironment","setFeatures","shopInformation","loadsShopPropsOnStore","wishlistItemsNumber","numberOfShoppingItems","receivedContent","loadingContent","setDealerSearchResultsStore","DEALER_API_URL","initialRoutingPath","getRootMenuItem","getValidContentPathSegments","buildRoutingKeyHistoryFromContentPath","routerStore","initialRoutingKeyHistory","initialRoutingKeyPointer","componentWillLoad","ncs","then","componentDidLoad","version","VERSION","EventActions","GENERAL_LOAD","disconnectedCallback","cancel","hasLimitedWidth","mode","hero","limitedWidth","render","class","theme","displayLogoOnly","isShopAvailable","slot","Level0","operationPipeline","logoLoaded","drawerTimeout","RoutingKeyPointers","LEVEL_ZERO","loadingContentWatcher","setNavigationLoaded","updateRoutingKeyPointerOfMobileLevel1","handleResizeAnimation","isDesktop","drawerClosed","receivedContentWatcher","logoLoadedHandler","scrollHandler","scrolledPastHeader","el","getBoundingClientRect","bottom","handleKeyDown","key","usingKeyboard","handleClickDrawerHeaderClose","handleClick","IsKeyboardClick","handleMobileMenuItemClick","routingKeyHistory","routingKeyPointer","updateRouterStore","handleSideDrawerItemClick","handleClickDrawerHeaderBack","isPlayingSingleDrawerAnimation","handleDrawerClosed","handleBackdropClosed","showBackdrop","handleDrawerChanged","findTopLevelRoutingKey","RoutingKeys","DEALER_SEARCH","getLastRoutingSegment","handleOpenDrawer","openDrawer","focusOnElement","LEVEL_ONE","LEVEL_TWO","isNavigationLoaded","setInitialRoutingProperties","setRoutingProperties","MODELS","initialRoutingKey","isKeyboardClick","isLoading","componentsOnReady","isDefaultRouteOnMobile","MAIN_MENU","componentDidRender","splice","getLogoSize","isFeatureEnabled","FEATURE_PORSCHE_75_YEARS_LOGO","search","Host","constructThemeClass","activeRoutingKey","display","size","xs","initialUsingKeyboard","Wrapper","redirected","setProperty","getScrollbarWidth","countryRecommender","showCountryRecommender","countryRecommenderClosed","accessibilityStatement","content","role","onBannerClosed","onBlur","currentTarget","removeAttribute","waitForElement","componentOnReady","__generator","race","MORE","SHOP","SERIES","MY_PORSCHE","VEHICLE_PURCHASE","EXPERIENCE","SERVICES","constructRoutingKey","Boolean","getModelsRoutingKey","getDealerDetailsRoutingKey","getMyPorscheRoutingKey","getVehiclePurchaseRoutingKey","removeLastRoutingSegment","determineMainDrawerLevel","getPreviousRoutingKey","subTotal","isShopAvailableAndLogoLinksToShop","logoLinksToShopLocales","logoLinksToShop","externalShop","replaceShopWithExternalShop","shopNotAvailableOnGlobalPages","removeShopItemFromContent","filterWishlistItemsByAuthStatus","authStatus","getAvailableShopVariables","username","getUsername","loggedInFallback","getWishlistIconName","getIconNameByMenuItemId","wishlist","registerOpenSingleDrawerAnimation","registerCloseSingleDrawerAnimation","registerTransitionNextLevelSingleDrawerAnimation","registerTransitionPreviousLevelSingleDrawerAnimation","delay","timer","unref"],"sourceRoot":""}