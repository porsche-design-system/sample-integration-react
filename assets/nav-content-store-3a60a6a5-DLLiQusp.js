import{b as G,f as H}from"./index-DSXMXYxF.js";const d={PRODUCTION:"production",PREVIEW:"preview",DEV:"dev",TEST:"test",LOCAL:"local"};function re(t){switch(t){case d.DEV.toString():return d.DEV;case d.PREVIEW.toString():return d.PREVIEW;case d.TEST.toString():return d.TEST;case d.LOCAL.toString():return d.LOCAL;case d.PRODUCTION.toString():default:return d.PRODUCTION}}const ut={GENERAL_LOAD:"PAGHomeNav_General_Load",IDS_LOAD:"PAGHomeNav_Ids_Load",COUNTRY_RECOMMENDER_LOAD:"PAGHomeNav_CountryRecommender_Load",COUNTRY_RECOMMENDER_CHANGE:"PAGHomeNav_CountryRecommenderChange_Click",COUNTRY_RECOMMENDER_CLOSE:"PAGHomeNav_CountryRecommenderClose_Click",CREST_CLICK:"PAGHomeNav_Crest_Click",NAVIGATION_LOAD:"PAGHomeNav_Navigation_Load",MODEL_OVERLAY_LOAD:"PAGHomeNav_ModelRangeOverlay_Load",MENU_BACK_CLICK:"PAGHomeNav_MenuBack_Click",MENU_CLOSE_CLICK:"PAGHomeNav_MenuClose_Click",META_FUNCTION_CLICK:"PAGHomeNav_MetaFunction_Click",MODEL_CLICK:"PAGHomeNav_Model_Click",MODEL_META_FUNCTION_CLICK:"PAGHomeNav_ModelMetaFunction_Click",MODEL_CTA_CLICK:"PAGHomeNav_ModelCTA_Click",MODEL_RANGE_CLICK:"PAGHomeNav_ModelRange_Click",MORE_CLICK:"PAGHomeNav_More_Click",NAVIGATION_CLICK:"PAGHomeNav_Navigation_Click",NAVIGATION_LINK_CLICK:"PAGHomeNav_NavigationLink_Click",DEALER_SEARCH_SCREEN_LOAD:"PAGHomeNav_FindADealerSearchScreen_Load",DEALER_RESULTS_SCREEN_LOAD:"PAGHomeNav_FindADealerResultsScreen_Load",DEALER_SEARCH_CLICK:"PAGHomeNav_FindADealerSearch_Click",DEALER_DROPDOWN_CLICK:"PAGHomeNav_FindADealerDropdown_Click",DEALER_DROPDOWN_SELECT_CLICK:"PAGHomeNav_FindADealerDropdownSelect_Click",DEALER_GEOLOCATION_CLICK:"PAGHomeNav_FindADealerLocateMe_Click",DEALER_RESULT_CLICK:"PAGHomeNav_FindADealerDealer_Click",DEALER_DETAILS_SCREEN_LOAD:"PAGHomeNav_FindADealerDealerScreen_Load",DEALER_CONTACT_CLICK:"PAGHomeNav_FindADealerDealerContact_Click",DEALER_MAP_CLICK:"PAGHomeNav_FindADealerMap_Click",CONTEXTUAL_BUTTON_CLICK:"PAGHomeNav_IconContextLink_Click",DRAWER_LOAD:"PAGHomeNav_Drawer_Load",PCOM_SEARCH_CLICK:"PAGHomeNav_IconGlobalLink_Click"},ie="nav",ae="edgecast_CDN",gt={Link:"link",Button:"button",Image:"image"},U={hero:"hero",navbar:"navbar",transparent:"transparent"},X={light:"light",dark:"dark"},ce="dev",Nt="loggedIn",Q="loginOrRegister",le="loading",ft="3.6.12",pe=0,Rt="nav_saved_dealer",vt=1e3*60*60*24*90,Tt="porsche.com",_e="";class D extends Error{constructor(e,n){super(e),this.type=n,Object.setPrototypeOf(this,D.prototype)}}const k={NO_INPUT:"NO_INPUT",INVALID_INPUT:"INVALID_INPUT",NO_RESULTS:"NO_RESULTS",GENERAL:"GENERAL",RETRY:"RETRY",GEOLOCATION_DENIED:"GEOLOCATION_DENIED",UNAUTHORIZED:"UNAUTHORIZED"},he=0,Ee=480,de=760,ue=1e3,ge=1300,Ne=1760,fe=1920,z={base:he,xs:Ee,s:de,m:ue,l:ge,xl:Ne,xxl:fe},Re=(t,e,n)=>{const s=t.get(e);s?s.includes(n)||s.push(n):t.set(e,[n])},ve=(t,e)=>{let n;return(...s)=>{n&&clearTimeout(n),n=setTimeout(()=>{n=0,t(...s)},e)}},Te=t=>!("isConnected"in t)||t.isConnected,Y=ve(t=>{for(let e of t.keys())t.set(e,t.get(e).filter(Te))},2e3),Ce=()=>{if(typeof G!="function")return{};const t=new Map;return{dispose:()=>t.clear(),get:e=>{const n=G();n&&Re(t,e,n)},set:e=>{const n=t.get(e);n&&t.set(e,n.filter(H)),Y(t)},reset:()=>{t.forEach(e=>e.forEach(H)),Y(t)}}},w=t=>typeof t=="function"?t():t,Ae=(t,e=(n,s)=>n!==s)=>{const n=w(t);let s=new Map(Object.entries(n??{}));const o={dispose:[],get:[],set:[],reset:[]},i=()=>{var r;s=new Map(Object.entries((r=w(t))!==null&&r!==void 0?r:{})),o.reset.forEach(c=>c())},a=()=>{o.dispose.forEach(r=>r()),i()},R=r=>(o.get.forEach(c=>c(r)),s.get(r)),N=(r,c)=>{const p=s.get(r);e(c,p,r)&&(s.set(r,c),o.set.forEach(E=>E(r,c,p)))},g=typeof Proxy>"u"?{}:new Proxy(n,{get(r,c){return R(c)},ownKeys(r){return Array.from(s.keys())},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},has(r,c){return s.has(c)},set(r,c,p){return N(c,p),!0}}),l=(r,c)=>(o[r].push(c),()=>{Le(o[r],c)});return{state:g,get:R,set:N,on:l,onChange:(r,c)=>{const p=l("set",(se,oe)=>{se===r&&c(oe)}),E=l("reset",()=>c(w(t)[r]));return()=>{p(),E()}},use:(...r)=>{const c=r.reduce((p,E)=>(E.set&&p.push(l("set",E.set)),E.get&&p.push(l("get",E.get)),E.reset&&p.push(l("reset",E.reset)),E.dispose&&p.push(l("dispose",E.dispose)),p),[]);return()=>c.forEach(p=>p())},dispose:a,reset:i,forceUpdate:r=>{const c=s.get(r);o.set.forEach(p=>p(r,c,c))}}},Le=(t,e)=>{const n=t.indexOf(e);n>=0&&(t[n]=t[t.length-1],t.length--)},J=(t,e)=>{const n=Ae(t,e);return n.use(Ce()),n},q={shop:"shop",pcom:"pcom",finder:"finder",icc:"icc","connect-store":"connect-store",default:"default"};var B;(function(t){t.startOpening="startOpening",t.startClosing="startClosing",t.finishOpening="finishOpening",t.finishClosing="finishClosing"})(B||(B={}));const Ct={googleMaps:"Google Maps",newRelic:"New Relic"},At={googleMaps:!0,newRelic:!0},Ie={loggedInState:Q,unreadMessagesCount:pe,userConsent:{googleMaps:!1,newRelic:!1},env:re(ce),app:q.default,usingKeyboard:!1,locale:_e,theme:X.light,mode:U.navbar},me=J(Ie),Oe={CONTENT_URL:"http://v4/content/url",CONTENT_CN_URL:"http://v4/content/url",SHOP_CONTENT_URL:"http://shop-content/url",ASSETS_URL:"http://assets/url",PROFILE_API_URL:"http://profile-api/url",FINDER_URL:"http://finder/url",FOOTER_ASSETS_URL:"http://footer/assets",COUNTRY_SELECTOR_URL:"http://select/countries",UNREAD_MESSAGES_COUNT_API_URL:"http://unread-messages-count-api/url",LOGIN_BASE_URL:"http://login-base/url",CLIENT_ID:"client-id",IDENTITY_PROVIDER_URL:"http://identity-redirect/url",IDENTITY_CLIENT_ID:"identity-client-id",IDENTITY_AUDIENCE:"https://identity-audience/url",IDENTITY_USER_SCOPES:"openid pid:user_profile.name:read pid:user_profile.porscheid:read",BFF_ENDPOINT:"https://bff-endpoint",BFF_CN_ENDPOINT:"https://china-bff-endpoint"},De={CONTENT_URL:"https://preview-nav.porsche.com/v4/content",CONTENT_CN_URL:"https://preview-navigation.porsche.cn/v4/content",SHOP_CONTENT_URL:"https://shop.porsche-preview.com/api/content",ASSETS_URL:".",ASSETS_CN_URL:".",PHN_DRAWER_CDN_URL:"https://local.porsche.com:3334/build",PHN_DRAWER_CN_CDN_URL:"https://local.porsche.com:3334/build",FOOTER_ASSETS_URL:"https://footer.pchomenav.aws.porsche.cloud/assets",COUNTRY_SELECTOR_URL:"https://preview.ppn.porsche.com/countries",PROFILE_API_URL:"https://api.porsche-preview.com/profiles/mydata",FINDER_URL:"https://finder.porsche.com",UNREAD_MESSAGES_COUNT_API_URL:"https://api.porsche-preview.com/inbox/pp/rest/messages/unreadCount",LOGIN_BASE_URL:"https://preview-login.porsche.com",CLIENT_ID:"V5yfGusXVALiypCMRFBfM4IAHaZ0IA4A",IDENTITY_PROVIDER_URL:"https://identity.porsche-preview.com",IDENTITY_CLIENT_ID:"6nPQZTTgpN6HEgvb9gswJyduzgVfy7Cr",IDENTITY_AUDIENCE:"https://api.porsche-preview.com",IDENTITY_USER_SCOPES:"openid pid:user_profile.name:read pid:user_profile.porscheid:read",BFF_ENDPOINT:"https://resources-nav.porsche.services",BFF_CN_ENDPOINT:"https://preview-navigation.porsche.cn"},Pe={CONTENT_URL:"https://preview-nav.porsche.com/v4/content",CONTENT_CN_URL:"https://preview-navigation.porsche.cn/v4/content",SHOP_CONTENT_URL:"https://shop.porsche-preview.com/api/content",ASSETS_URL:"https://preview-nav.porsche.com",ASSETS_CN_URL:"https://preview-navigation.porsche.cn",PHN_DRAWER_CDN_URL:"https://preview-nav.porsche.com/preview/navigation-drawer",PHN_DRAWER_CN_CDN_URL:"https://preview-navigation.porsche.cn/preview/navigation-drawer",FOOTER_ASSETS_URL:"https://footer.pchomenav.aws.porsche.cloud/assets",COUNTRY_SELECTOR_URL:"https://preview.ppn.porsche.com/countries",PROFILE_API_URL:"https://api.porsche-preview.com/profiles/mydata",FINDER_URL:"https://finder.porsche.com",UNREAD_MESSAGES_COUNT_API_URL:"https://api.porsche-preview.com/inbox/pp/rest/messages/unreadCount",LOGIN_BASE_URL:"https://preview-login.porsche.com",CLIENT_ID:"V5yfGusXVALiypCMRFBfM4IAHaZ0IA4A",IDENTITY_PROVIDER_URL:"https://identity.porsche-preview.com",IDENTITY_CLIENT_ID:"6nPQZTTgpN6HEgvb9gswJyduzgVfy7Cr",IDENTITY_AUDIENCE:"https://api.porsche-preview.com",IDENTITY_USER_SCOPES:"openid pid:user_profile.name:read pid:user_profile.porscheid:read",BFF_ENDPOINT:"https://resources-nav.porsche.services",BFF_CN_ENDPOINT:"https://preview-navigation.porsche.cn"},Se={CONTENT_URL:"https://preview-nav.porsche.com/v4/content",CONTENT_CN_URL:"https://preview-navigation.porsche.cn/v4/content",SHOP_CONTENT_URL:"https://shop.porsche-preview.com/api/content",ASSETS_URL:"https://preview-nav.porsche.com",ASSETS_CN_URL:"https://preview-navigation.porsche.cn",PHN_DRAWER_CDN_URL:"https://preview-nav.porsche.com/dev/navigation-drawer",PHN_DRAWER_CN_CDN_URL:"https://preview-navigation.porsche.cn/dev/navigation-drawer",FOOTER_ASSETS_URL:"https://footer.pchomenav.aws.porsche.cloud/assets",COUNTRY_SELECTOR_URL:"https://preview.ppn.porsche.com/countries",PROFILE_API_URL:"https://api.porsche-preview.com/profiles/mydata",FINDER_URL:"https://finder.porsche.com",UNREAD_MESSAGES_COUNT_API_URL:"https://api.porsche-preview.com/inbox/pp/rest/messages/unreadCount",LOGIN_BASE_URL:"https://preview-login.porsche.com",CLIENT_ID:"V5yfGusXVALiypCMRFBfM4IAHaZ0IA4A",IDENTITY_PROVIDER_URL:"https://identity.porsche-preview.com",IDENTITY_CLIENT_ID:"6nPQZTTgpN6HEgvb9gswJyduzgVfy7Cr",IDENTITY_AUDIENCE:"https://api.porsche-preview.com",IDENTITY_USER_SCOPES:"openid pid:user_profile.name:read pid:user_profile.porscheid:read",BFF_ENDPOINT:"https://resources-nav.porsche.services",BFF_CN_ENDPOINT:"https://preview-navigation.porsche.cn"},we={CONTENT_URL:"https://nav.porsche.com/00BC524/v4/content",CONTENT_CN_URL:"https://navigation.porsche.cn/v4/content",SHOP_CONTENT_URL:"https://shop.porsche.com/api/content",ASSETS_URL:"https://nav.porsche.com/00BC524",ASSETS_CN_URL:"https://navigation.porsche.cn",PHN_DRAWER_CDN_URL:"https://nav.porsche.com/00BC524/navigation-drawer",PHN_DRAWER_CN_CDN_URL:"https://navigation.porsche.cn/navigation-drawer",FOOTER_ASSETS_URL:"https://nav.porsche.com/00BC524/footer/assets",PROFILE_API_URL:"https://api.porsche.com/profiles/mydata",FINDER_URL:"https://finder.porsche.com",COUNTRY_SELECTOR_URL:"https://www.porsche.com/countries",UNREAD_MESSAGES_COUNT_API_URL:"https://api.porsche.com/inbox/p/rest/messages/unreadCount",LOGIN_BASE_URL:"https://login.porsche.com",CLIENT_ID:"QPw3VOLAMfI7r0nmRY8ELq4RzZpZeXEE",IDENTITY_PROVIDER_URL:"https://identity.porsche.com",IDENTITY_CLIENT_ID:"fFp1mRfLwaUkbrAFv7QYeubkPofNYvWY",IDENTITY_AUDIENCE:"https://api.porsche.com",IDENTITY_USER_SCOPES:"openid pid:user_profile.name:read pid:user_profile.porscheid:read",BFF_ENDPOINT:"https://resources-nav.porsche.services",BFF_CN_ENDPOINT:"https://navigation.porsche.cn"},Ue={test:Oe,local:De,preview:Pe,dev:Se,production:we};let y=null;function ye(){if(y===null)throw new Error("No root element present");return y}function Lt(t){y=t}function It(t){return ye().querySelector(t)}function mt(t){return!!t&&typeof t.then=="function"&&t[Symbol.toStringTag]==="Promise"}function O(t){return typeof t=="string"&&t.length>0}function Ot(t){return t instanceof HTMLElement?t:null}function be(t,e){return t&&typeof t=="object"&&e in t}function Dt(t){return typeof t=="string"?t:""}function Pt(t){return t.replace(/([A-Z])/g,e=>`-${e[0].toLowerCase()}`)}function St(t,e,n=(s,o)=>s[o]){return Object.entries(e).reduce((s,[o,i])=>{const a=n(t,o);return typeof a=="string"?s[o]=a:s[o]=i,s},{})}function wt(t){const{locale:e}=me.state,n=Ue[t];return e==="en-CN"||e==="zh-CN"?{...n,CONTENT_URL:n.CONTENT_CN_URL,ASSETS_URL:n.ASSETS_CN_URL,PHN_DRAWER_CDN_URL:n.PHN_DRAWER_CN_CDN_URL}:n}function Me(t){return t===le}function xe(t){return t===Q}function Ut(t){return!Me(t)&&!xe(t)}function yt(...t){return t.join("---")}function bt(t){return t>=z.s}function Mt(t){return t<=z.xs}const xt=(t,e)=>e===U.transparent||e===U.hero?t:X.light;function Ft(t){return t.x===0&&t.y===0}function Gt(t,e){return e in t?e:q.default}var Fe=Object.defineProperty,Ge=(t,e,n)=>e in t?Fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h=(t,e,n)=>(Ge(t,typeof e!="symbol"?e+"":e,n),n);const b={BEFORE_MERGE:"BEFORE_MERGE",AFTER_MERGE:"AFTER_MERGE"},P={clean:{enabled:!1,executionPlace:b.AFTER_MERGE,values:["",void 0,null]},logging:{enabled:!0,level:"warn"},validation:{enabled:!1,allowUnknown:!1,verbose:!0},webProperties:{enabled:!0,eventNamePattern:/.*/,reactiveUrl:!0,reactiveDimensions:!0}};class He{create(e){return typeof e.event!="string"||e.event.length===0?{}:{context:{eventAction:e.event}}}}const ee=(t,e,n=!1)=>{if(!t)return!1;let s;for(s in t)if(!(!t[s]&&!n)&&e(t[s],s)===!1)return!1;return!0},S=(t,e)=>ee(t,(n,s)=>{for(const o in t[s])if(e(n[o],o,n,s)===!1)return!1;return!0}),m=t=>{for(const e in t)return!1;return!0},M=(t,e=(n=>(n=P.clean)==null?void 0:n.values)()||[])=>{S(t,(s,o,i,a)=>{e.includes(s)&&(delete i[o],m(i)&&delete t[a])});let n;for(n in t){const s=t[n];(typeof s>"u"||m(s))&&delete t[n]}return t},ke=(t,e)=>t&&(S(t,(n,s,o,i)=>{e.includes(`${i.toString()}.${s.toString()}`)&&(delete o[s],m(o)&&delete t[i])}),t),x=t=>(ee(t,(e,n)=>(typeof e!="function"||(t[n]=e()),!0)),S(t,(e,n,s)=>(typeof e!="function"||(s[n]=e()),!0)),t),Ye=(t,e,...n)=>{const s=e.split(".");if(s.length!==2)return;const[o,i]=s,a=Be(t[o],...n);if(a)return a[i]},Be=(t,...e)=>typeof t=="function"?t(...e):t,Ve=t=>{if(!t)return[];const e=[];return S(x(t),(n,s,o,i)=>{e.push(`${i.toString()}.${s.toString()}`)}),e},Ke=P.logging;var F=(t=>(t[t.error=0]="error",t[t.warn=1]="warn",t[t.log=2]="log",t))(F||{});const te=class ne{constructor(e,n){h(this,"prefix"),h(this,"settings"),this.prefix=e,this.settings={...Ke,...n}}_getMergedSettings(e){return e?{...this.settings,...e}:this.settings}_isAllowed(e,n){if(!ne.isAvailable||!n.enabled)return!1;const s=F[n.level];switch(e){case"error":case"warn":return s>=F[e];case"info":case"log":case"debug":case"dir":return s>=2;default:return!1}}_log(e,n="log",s){const o=this._getMergedSettings(s);if(this._isAllowed(n,o))switch(n){case"dir":console.log(`[${this.prefix}] ${n}:`),console[n](e);break;default:console[n](`[${this.prefix}] ${e}`)}}log(e,n){this._log(e,"log",n)}dir(e,n){this._log(e,"dir",n)}debug(e,n){this._log(e,"debug",n)}error(e,n){this._log(e,"error",n)}info(e,n){this._log(e,"info",n)}warn(e,n){this._log(e,"warn",n)}};h(te,"isAvailable",typeof console<"u");let $e=te;const C=(...t)=>{const e={};return t.forEach(n=>{if(m(n))return;const s={...e,...n};let o;for(o in s)typeof s[o]=="object"&&!Array.isArray(s[o])?e[o]={...e[o],...n[o]}:e[o]=s[o]}),e};class We{create(e){return M({context:{timestamp:e.timestamp,server:e.hostname},pageExperience:{pageId:e.url},visitor:{deviceBrowserBreakpoint:e.breakpoint,deviceBrowserHeight:e.height,deviceBrowserOrientation:e.orientation,deviceBrowserWidth:e.width,deviceType:e.deviceType,useragent:e.userAgent}},[void 0])}}const je=P.webProperties,V=()=>window.location.href.replace(/[?#].*/,""),Ze=()=>new Date().toISOString(),Xe=()=>window.location.hostname,K=()=>window.innerHeight.toString(),$=()=>window.innerHeight>window.innerWidth?"p":"l",W=()=>window.innerWidth.toString(),Qe=()=>window.matchMedia("(hover: none), (pointer: coarse)").matches?"mobile":"desktop",ze=()=>window.navigator.userAgent,Je=t=>{if(!t.breakpoints||t.breakpoints.length<1)return;const{breakpoints:e}=t,n=()=>{const s=window.innerWidth;let o=0,i=0;for(;i<e.length&&s>=e[i];)o=e[i],i++;return o.toString()};return t.reactiveDimensions?n:n()},qe=(t,e)=>{const n={...je,...t},s={breakpoint:Je(n),timestamp:Ze(),hostname:Xe(),url:n.reactiveUrl?V:V(),height:n.reactiveDimensions?K:K(),orientation:n.reactiveDimensions?$:$(),width:n.reactiveDimensions?W:W(),deviceType:Qe(),userAgent:ze()};return e?e.create(s):s},et=(t,e)=>{switch(e){case"string":case"number":case"boolean":return typeof t===e;case"any[]":return Array.isArray(t)&&t.length>0;case"Record<string, any>":return typeof t=="object"&&!Array.isArray(t)&&Object.keys(t).length>0;case"any":return!0;default:if((typeof t=="boolean"||typeof t=="number"||typeof t=="string")&&e.indexOf("|")>0)return e.split("|").map(n=>{const s=n.trim();return/^'.*'$/.test(s)?s.replace(/(^ ?'?|'? ?$)/g,""):/^(true|false)$/.test(s)?s==="true":/^-?(\d*\.)?\d+$/.test(s)?Number.parseFloat(s):s.replace(/(^ ?'?|'? ?$)/g,"")}).includes(t)}return!0},tt=(t,e,n)=>{const s={level:null,issues:[]};if(!n.enabled||!n.eventMatrix)return s;const{events:o,...i}=n.eventMatrix,a=o.indexOf(t);if(a===-1)return s.level="error",s.issues.push({level:"error",type:"EVENT_NOT_FOUND",name:t,message:`'${t}': Event does not exist.`}),s;const R=Ve(e),N=Object.keys(i),g=R.filter(_=>!N.includes(_));g.length>0&&(n.allowUnknown||ke(e,g),g.forEach(_=>{s.level=s.level??"warn",s.issues.push({level:"warn",type:"PROPERTY_DOES_NOT_EXIST",name:_,message:`'${_}': Property does not exist in the given Event Matrix.${n.allowUnknown?"":" It was omitted from the DataLayer payload."}`})}));let l;for(l in i){const _=i[l],f=typeof _.e[a]<"u",T=_.r===1,r=e?Ye(e,l):void 0,c=typeof r<"u";if(f&&T&&!c&&(s.level="error",s.issues.push({level:"error",type:"REQUIRED_PROPERTY_MISSING",name:l,message:`'${l}': The required property is missing.`}),!n.verbose)||c&&!et(r,_.t)&&(s.level="error",s.issues.push({level:"error",type:"WRONG_PROPERTY_TYPE",name:l,message:`'${l}': Wrong type detected. Expected '${_.t}', got '${typeof r}'.`}),!n.verbose))return s}return s};class nt{constructor(e,n,s="GlobalDataLayer"){h(this,"_className"),h(this,"_settings"),h(this,"_defaultProperties"),h(this,"_defaultPropertiesCache"),h(this,"_logger"),h(this,"_webPropertiesHandled",!1),h(this,"_dataLayerStore"),h(this,"_extensions",new Map);const o=C(P,e||{});this._className=s,this._logger=new $e(this._className,o.logging),this._settings=o,n?this._dataLayerStore=n:typeof window<"u"?(this._dataLayerStore=window.pagData=window.pagData||[],this._logger.info("`dataLayerStore` was set to default `window.pagData`")):(this._dataLayerStore=[],this._logger.info("`dataLayerStore` was set to default `[]`")),this._defaultProperties=[],this._defaultPropertiesCache=new Map}setup(){this._handleDefaultWebProperties()}get Settings(){return this._settings}get DataLayerStore(){return this._dataLayerStore}getRegisteredExtension(e){const n=new e;return this.getRegisteredExtensionByClassName(n.className)}getRegisteredExtensionByClassName(e){return this._extensions.has(e)?this._extensions.get(e):void 0}getRegisteredExtensions(){const e=[];for(const n of this._extensions.values())e.push(n);return e}registerExtension(e,n=!1){if(!n&&this._extensions.has(e.className)){this._logger.warn(`Tried to register extension class <${e.className}> which already exists.`);return}e.dataLayerInstance=this,this._extensions.set(e.className,e),n?this._logger.info(`Overriden registration for extension class <${e.className}>.`):this._logger.info(`Registered extension class <${e.className}>.`)}removeExtension(e){const n=new e;if(this._extensions.has(n.className)){this._extensions.delete(n.className);return}this._logger.warn(`Tried to remove not existing extension class <${n.className}>.`)}removeExtensionByClassName(e){if(this._extensions.has(e)){this._extensions.delete(e);return}this._logger.warn(`Tried to remove not existing extension class <${e}>.`)}push(e,n=[{}],s){var o,i;if(e.length===0)return!1;const a=s&&!m(s)?C(this._settings,s):this._settings;Array.isArray(n)||(n=[n]),n.forEach(x);const R=this._eventNamePayloadFactory.create({event:e}),N=x(this.getDefaultProperties(e));a.clean.enabled&&a.clean.executionPlace===b.BEFORE_MERGE&&[N||{},...n].forEach(l=>M(l,a.clean.values));const g=C(R,N||{},...n);if(a.clean.enabled&&a.clean.executionPlace===b.AFTER_MERGE&&M(g,a.clean.values),(o=a==null?void 0:a.validation)!=null&&o.enabled&&(i=a==null?void 0:a.validation)!=null&&i.eventMatrix){const l=tt(e,g,a.validation),_=l.issues.sort((f,T)=>f.level!==T.level&&T.level==="warn"?-1:0).map(f=>`- [${f.level}]: ${f.message}`).join(`
`);switch(l.level){case"error":return this._logger.error(`Validation failed for event '${e}' with errors/warnings: 
${_}`,a.logging),!1;case"warn":this._logger.warn(`Validation success for event '${e}' with warnings: 
${_}`,a.logging);break;default:this._logger.info(`Validation success for event '${e}'.`,a.logging);break}}return this._dataLayerStore.push(g),!0}getDefaultProperties(e){if(this._defaultPropertiesCache.has(e))return this._defaultPropertiesCache.get(e);const n={byName:[],byArray:[],byRegex:[]};this._defaultProperties.forEach(o=>{if(o.identifier===e)return n.byName.push(o.data);if(Array.isArray(o.identifier)&&o.identifier.includes(e))return n.byArray.push(o.data);if(o.identifier instanceof RegExp&&o.identifier.test(e))return n.byRegex.push(o.data)});const s=[...n.byRegex,...n.byArray,...n.byName];if(s.length)return this._defaultPropertiesCache.set(e,C(...s)),this._defaultPropertiesCache.get(e)}setDefaultProperties(e,n){this._defaultPropertiesCache.clear();const s=this._defaultProperties.find(o=>o.identifier===e);if(s){s.data=C(s.data,n);return}this._defaultProperties.push({identifier:e,data:n})}_handleDefaultWebProperties(){if(this._webPropertiesHandled||!this._settings.webProperties.enabled)return;const e=qe(this._settings.webProperties,this._webPayloadFactory);this.setDefaultProperties(this._settings.webProperties.eventNamePattern,e),this._webPropertiesHandled=!0}}class st extends nt{constructor(e,n,s="GlobalDataLayer"){super(e,n,s),h(this,"_eventNamePayloadFactory"),h(this,"_webPayloadFactory"),this._eventNamePayloadFactory=new He,this._webPayloadFactory=new We,this.setup()}setup(){super.setup()}}const L={ASIA_PACIFIC:"asia-pacific",EASTERN_EUROPE:"eastern-europe",MIDDLE_EAST:"middle-east",LATIN_AMERICA:"latin-america",INTERNATIONAL:"international"},j={AP:L.ASIA_PACIFIC,CE:L.EASTERN_EUROPE,LL:L.LATIN_AMERICA,WW:L.INTERNATIONAL};function ot(t){return Object.values(L).includes(t)}function Z(t){if(!O(t))throw new D("empty locale passed",k.NO_INPUT);const e=t.substring(0,t.indexOf("-")).toLowerCase();let n=t.substring(t.indexOf("-")+1).toLowerCase();if(ot(n)||(n=n.toUpperCase()),!O(e)||!O(n))throw new D(`invalid locale ${t} passed`,k.INVALID_INPUT);return{language:e,country:be(j,n)?j[n]:n}}function rt(t){switch(t){case d.PRODUCTION:return"P";case d.PREVIEW:return"PP";default:return"K"}}class I{constructor(){this.homeNavEventId=/^PAGHomeNav_/,this.initialise()}static getInstance(){return I.instance||(I.instance=new I),I.instance}initialise(){this.gdl=new st}pushDataLayerEvent(e,n){n?this.gdl.push(e,n):this.gdl.push(e)}setEnvironment(e){this.gdl.setDefaultProperties(this.homeNavEventId,{context:{environment:rt(e)}})}setPageName(e){this.gdl.setDefaultProperties(this.homeNavEventId,{pageExperience:{pageName:e}})}setUser(e,n,s){this.gdl.setDefaultProperties(this.homeNavEventId,{ids:{userId:e,ciamId:n},visitor:{loginStatus:s}})}setLocale(e){try{const{country:n,language:s}=Z(e);this.gdl.setDefaultProperties(this.homeNavEventId,{context:{country:n,language:s}})}catch{}}setDefaultProperties(e,n){let s={context:{applicationId:ie},visitor:{loginStatus:!1}};try{const{country:o,language:i}=Z(e);s={...s,context:{...s.context,country:o,language:i,applicationName:ae}}}catch{}O(n)&&(s={...s,pageExperience:{pageName:n}}),this.gdl.setDefaultProperties(this.homeNavEventId,s)}}const u={id:"",text:"",link:"",icon:"",description:""},v={id:"",text:"",description:""},it={statement:"",region:"",language:"",change:v},at={text:"",id:"",all:{id:"",text:"",link:"",icon:"",description:""},series:[]},A={id:"",text:"",link:"",children:[]},ct={cart:"",wishlist:null,additionalContent:[],id:"",text:"",link:"",children:[],availableLocales:[],availableLocalesOnlyForShop:[],logoLinksToShopLocales:[]},lt={id:"",text:"",link:"",loggedInFallback:"",login:u,loginText:"",logout:u,messages:u,more:null,signup:u,signupText:"",links:[],savedSearches:null,savedVehicles:null,onlineOrderHistory:null},pt={id:"",text:"",numberOfDealers:42,search:{id:"",text:"",form:{inputPlaceholder:"",inputDescription:""},clear:v,or:"",geolocation:v,dropdown:{province:"",city:"",selectAProvince:"",selectACity:""},load:"",map:u,outboundLink:u},details:{id:"",finder:u,bookService:u,testDrive:u,backToSearch:""},openingHours:null},_t={wrong:"",retry:"",noResults:"",noInput:"",invalidInput:"",geolocationDenied:""},ht={cart:"",id:"",text:"",link:"",children:[]},Et={menu:v,crest:u,back:v,close:v,accessibilityStatement:u,countryRecommender:it,contextualButtons:{},contextualLinks:{},models:at,dealer:pt,myPorsche:lt,vehiclePurchase:A,shop:ct,externalShop:u,experience:A,services:A,error:_t,loadingDescription:"",legacyMore:A,legacyShop:A,level0:{},connect:ht,scrollingIndicator:""},Ht=J(Et);export{q as A,xt as B,gt as C,_e as D,d as E,It as F,I as G,be as H,Ft as I,Ct as J,At as K,Nt as L,Tt as M,X as N,vt as O,St as P,Pt as Q,Rt as S,ft as V,U as a,re as b,J as c,Ht as d,bt as e,Ot as f,wt as g,ce as h,O as i,D as j,k,Lt as l,Ut as m,me as n,ut as o,pe as p,z as q,Mt as r,Z as s,Dt as t,Q as u,ye as v,mt as w,yt as x,ot as y,Gt as z};
